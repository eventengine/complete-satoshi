<table><tr><td>1</td><td> Bitcoin / Development & Technical Discussion / Added some DoS limits, removed safe mode (0.3.19)</td><td>on: December 12, 2010, 06:22:33 PM</td></tr><tr><td colspan=3>There's more work to do on DoS, but I'm doing a quick build of what I have so far in case it's needed, before venturing into more complex ideas.  The build for this is version 0.3.19.**- Added some DoS controls*As Gavin and I have said clearly before, the software is not at all resistant to DoS attack.  This is one improvement, but there are still more ways to attack than I can count.  **I'm leaving the -limitfreerelay part as a switch for now and it's there if you need it.**- Removed "safe mode" alerts*"safe mode" alerts was a temporary measure after the 0.3.9 overflow bug.  We can say all we want that users can just run with "-disablesafemode", but it's better just not to have it for the sake of appearances.  It was never intended as a long term feature.  Safe mode can still be triggered by seeing a longer (greater total PoW) invalid block chain.**Builds:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.19/</td></tr><tr><td>2</td><td> Bitcoin / Bitcoin Discussion / Re: PC World Article on Bitcoin</td><td>on: December 11, 2010, 11:39:16 PM</td></tr><tr><td colspan=3>It would have been nice to get this attention in any other context.  WikiLeaks has kicked the hornet's nest, and the swarm is headed towards us.</td></tr><tr><td>3</td><td> Bitcoin / Development & Technical Discussion / Re: minimalistic bitcoin client on D language?</td><td>on: December 11, 2010, 10:07:04 PM</td></tr><tr><td colspan=3>Quote from: Hal on December 11, 2010, 08:08:45 PM

I'd like to hear some specific criticisms of the code. To me it looks like an impressive job, although I'd wish for more comments. Now I've mostly studied the init, main, script and a bit of net modules. This is some powerful machinery.

That means a lot coming from you, Hal.  Thanks.</td></tr><tr><td>4</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin and buffer overflow attacks</td><td>on: December 11, 2010, 01:32:37 PM</td></tr><tr><td colspan=3>Quote from: da2ce7 on December 11, 2010, 05:49:22 AM

direct to IP address transfers seems like a obvious surface area to attack.

If you ever find anyone who turned it on.  It's disabled by default.

Quote from: witchspace on December 11, 2010, 09:59:40 AM

There is no way to be absolutely sure that there are no buffer overflow attacks. Although it would help to implement the client in a language that doesn't have buffer overflows because it checks array indices (Python, Java, C#, ...).

It's all STL.  There are almost no buffers.</td></tr><tr><td>5</td><td> Bitcoin / Bitcoin Discussion / Re: BitDNS and Generalizing Bitcoin</td><td>on: December 11, 2010, 01:08:30 PM</td></tr><tr><td colspan=3>@dtvan: all 3 excellent points. *1) IP records don't need to be in the chain, just do registrar function not DNS.  And CA problem solved, neat.*2) Pick one TLD, .web +1.*3) Expiration and significant renewal costs, very important.

Quote from: joe on December 11, 2010, 10:53:58 AM

However, thinking more about this now I support inclusion of additional coinbases / tracking systems in the main network. The reason for doing this is so as not to water down CPU power into multiple networks. We want one strong network, so the network should be versatile.

Avoiding CPU power fragmentation is no longer a reason.  Independent networks/chains can share CPU power without sharing much else.  See: http://bitcointalk.org/index.php?topic=1790.msg28696#msg28696 and http://bitcointalk.org/index.php?topic=1790.msg28715#msg28715</td></tr><tr><td>6</td><td> Bitcoin / Bitcoin Discussion / Re: BitDNS and Generalizing Bitcoin</td><td>on: December 10, 2010, 08:19:39 PM</td></tr><tr><td colspan=3>I agree.  All transactions, IP changes, renewals, etc. should have some fee that goes to the miners.**You might consider a certain amount of work to generate a domain, instead of a fixed total circulation.  The work per domain could be on a schedule that grows with Moore's Law.  That way the number of domains would grow with demand and the number of people using it.</td></tr><tr><td>7</td><td> Bitcoin / Bitcoin Discussion / Re: BitDNS and Generalizing Bitcoin</td><td>on: December 10, 2010, 07:55:12 PM</td></tr><tr><td colspan=3>Quote from: Hal on December 10, 2010, 07:14:04 PM

additional block chains would each create their own flavor of coins, which would trade with bitcoins on exchanges? These chain-specific coins would be used to reward miners on those chains, and to purchase some kinds of rights or privileges within the domain of that chain?

Right, the exchange rate between domains and bitcoins would float.**A longer interval than 10 minutes would be appropriate for BitDNS.**So far in this discussion there's already a lot of housekeeping data required.  It will be much easier if you can freely use all the space you need without worrying about paying fees for expensive space in Bitcoin's chain.  Some transactions:**Changing the IP record.**Name change.  A domain object could entitle you to one domain, and you could change it at will to any name that isn't taken.  This would encourage users to free up names they don't want anymore.  Generated domains start out blank and the miner sells it to someone who changes it to what they want.  **Renewal.  Could be free, or maybe require consuming another domain object to renew.  In that case, domain objects (domaincoins?) could represent the right to own a domain for a year.  The spent fee goes to the miners in the next block fee.</td></tr><tr><td>8</td><td> Bitcoin / Development & Technical Discussion / Accounts example code</td><td>on: December 10, 2010, 07:21:03 PM</td></tr><tr><td colspan=3>Some sample pseudocode using the new Accounts based commands in 0.3.18.**print "send to " + getaccountaddress(username) + " to fund your account"*print "balance: " + getbalance(username, 0)*print "available balance: " + getbalance(username, 6)**// if you make a sale, move the money from their account to your "" account*if (move(username, "", amount, 6, "purchased item"))*    SendTheGoods()**// withdrawal*sendfrom(username, bitcoinaddress, amount, 6, "withdrawal by user")**You can use listtransactions(username) to show them a list of their recent transactions.</td></tr><tr><td>9</td><td> Bitcoin / Bitcoin Discussion / Re: BitDNS and Generalizing Bitcoin</td><td>on: December 10, 2010, 05:29:28 PM</td></tr><tr><td colspan=3>Piling every proof-of-work quorum system in the world into one dataset doesn't scale.**Bitcoin and BitDNS can be used separately.  Users shouldn't have to download all of both to use one or the other.  BitDNS users may not want to download everything the next several unrelated networks decide to pile in either.**The networks need to have separate fates.  BitDNS users might be completely liberal about adding any large data features since relatively few domain registrars are needed, while Bitcoin users might get increasingly tyrannical about limiting the size of the chain so it's easy for lots of users and small devices.**Fears about securely buying domains with Bitcoins are a red herring.  It's easy to trade Bitcoins for other non-repudiable commodities.**If you're still worried about it, it's cryptographically possible to make a risk free trade.  The two parties would set up transactions on both sides such that when they both sign the transactions, the second signer's signature triggers the release of both.  The second signer can't release one without releasing the other.</td></tr><tr><td>10</td><td> Bitcoin / Development & Technical Discussion / Re: Fees in BitDNS confusion</td><td>on: December 09, 2010, 11:58:54 PM</td></tr><tr><td colspan=3>Not locktime.**There's a possible design for far in the future:**You intentionally write a double-spend.  You write it with the same inputs and outputs, but this time with a fee.  When your double-spend gets into a block, the first spend becomes invalid.  The payee does not really notice, because at the moment the new transaction becomes valid, the old one becomes invalid, and the new transaction simply takes its place.**It's easier said than implemented.  There would be a fair amount of work to make a client that correctly writes the double-spend, manages the two versions in the wallet until one is chosen, handles all the corner cases.  Every assumption in the existing code is that you're not trying to write double-spends.**There would need to be some changes on the Bitcoin Miner side also, to make the possibility to accept a double-spend into the transaction pool, but only strictly if the inputs and outputs match and the transaction fee is higher.  Currently, double-spends are never accepted into the transaction pool, so every node bears witness to which transaction it saw first by working to put it into a block.</td></tr><tr><td>11</td><td> Bitcoin / Bitcoin Discussion / Re: BitDNS and Generalizing Bitcoin</td><td>on: December 09, 2010, 10:46:50 PM</td></tr><tr><td colspan=3>Quote from: nanotube on December 09, 2010, 09:20:40 PM

seems that the miner would have to basically do "extra work". and if there's no reward from the bitdns mining from the extra work (which of course, slows down the main bitcoin work), what would be a miner's incentive to include bitdns (and whatever other side chains) ?

The incentive is to get the rewards from the extra side chains also for the same work.**While you are generating bitcoins, why not also get free domain names for the same work?**If you currently generate 50 BTC per week, now you could get 50 BTC and some domain names too.**You have one piece of work.  If you solve it, it will solve a block from both Bitcoin and BitDNS.  In concept, they're tied together by a Merkle Tree.  To hand it in to Bitcoin, you break off the BitDNS branch, and to hand it in to BitDNS, you break off the Bitcoin branch.**In practice, to retrofit it for Bitcoin, the BitDNS side would have to have maybe ~200 extra bytes, but that's not a big deal.  You've been talking about 50 domains per block, which would dwarf that little 200 bytes per block for backward compatibility.  We could potentially schedule a far in future block when Bitcoin would upgrade to a modernised arrangement with the Merkle Tree on top, if we care enough about saving a few bytes.**Note that the chains are below this new Merkle Tree.  That is, each of Bitcoin and BitDNS have their own chain links inside their blocks.  This is inverted from the common timestamp server arrangement, where the chain is on top and then the Merkle Tree, because that creates one common master chain.  This is two timestamp servers not sharing a chain.</td></tr><tr><td>12</td><td> Bitcoin / Bitcoin Discussion / Re: BitDNS and Generalizing Bitcoin</td><td>on: December 09, 2010, 09:02:42 PM</td></tr><tr><td colspan=3>I think it would be possible for BitDNS to be a completely separate network and separate block chain, yet share CPU power with Bitcoin.  The only overlap is to make it so miners can search for proof-of-work for both networks simultaneously.**The networks wouldn't need any coordination.  Miners would subscribe to both networks in parallel.  They would scan SHA such that if they get a hit, they potentially solve both at once.  A solution may be for just one of the networks if one network has a lower difficulty.**I think an external miner could call getwork on both programs and combine the work.  Maybe call Bitcoin, get work from it, hand it to BitDNS getwork to combine into a combined work.**Instead of fragmentation, networks share and augment each other's total CPU power.  This would solve the problem that if there are multiple networks, they are a danger to each other if the available CPU power gangs up on one.  Instead, all networks in the world would share combined CPU power, increasing the total strength.  It would make it easier for small networks to get started by tapping into a ready base of miners.</td></tr><tr><td>13</td><td> Bitcoin / Development & Technical Discussion / Re: Automated nightly builds</td><td>on: December 09, 2010, 06:28:45 PM</td></tr><tr><td colspan=3>Thanks for setting this up Cdecker.  **Is there any chance of getting it to build the GUI version also?  If this is Ubuntu, if you get wxWidgets 2.9.0 it should just be a matter of following the steps in build-unix.txt exactly.  Is this an environment where you can build wxWidgets once and leave it there and just keep using it?</td></tr><tr><td>14</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC method idea: list transactions newer than a given txid</td><td>on: December 09, 2010, 06:08:08 PM</td></tr><tr><td colspan=3>Quote from: jgarzik on December 09, 2010, 12:58:05 AM

I agree with you and satoshi about "txs after <txid>".  My listtransactions (now xlisttransactions) patch pointedly does not have that feature, and never has.

As long as the interface is designed for things like showing the user the last N transactions history, it's fine, now that we have the Accounts feature making it easier to do payment detection the right way.**Gavin, could listtransactions have an option to list transactions for all accounts?**I'm not sure what the interface could be, maybe:*listtransactions <JSON null type> [count]**It would be hard to do that from the command line though. **I can't think of a good solution for the interface, that's the problem.  Maybe "*" special case like "" is.  Everyone would have to make sure no user can create account name "*".

Quote from: jgarzik on December 09, 2010, 04:13:50 PM

Sure, and that's easy enough to track with transactions.

I don't get how that's "easy" to track with transactions.</td></tr><tr><td>15</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.18</td><td>on: December 09, 2010, 03:17:53 PM</td></tr><tr><td colspan=3>I came to agree with Gavin about whitelisting when I realized how quickly new transaction types can be added.

Quote from: nanotube on December 09, 2010, 06:19:05 AM

why not make it easier on everyone and just allow say, 64 or 128 bytes of random data in a transaction?

That's already possible.  <pubkey> OP_CHECKSIG.  <pubkey> can be 33 to 120 bytes.**I also support a third transaction type for timestamp hash sized arbitrary data.  There's no point not having one since you can already do it anyway.  It would tell nodes they don't need to bother to index it.</td></tr><tr><td>16</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.18</td><td>on: December 09, 2010, 02:37:05 PM</td></tr><tr><td colspan=3>New transaction templates can be added as needed.  Within a few days, there will be plenty of GPU power that accepts and works on it.  Network support will be thorough long before there'll be enough clients who understand how to receive and interpret the new transaction.**Timestamp hashes are still already possible:**txin: 0.01*txout: 0.00  <appid, hash> OP_CHECKSIG*fee: 0.01 **If there's an actual application like BitDNS getting ready to actually start inserting hashes, we can always add a specific transaction template for timestamps.**I like Hal Finney's idea for user-friendly timestamping.  Convert the hash of a file to a bitcoin address and send 0.01 to it:

Quote from: Hal on December 05, 2010, 11:43:56 PM

I thought of a simple way to implement the timestamp concept I mentioned above. Run sha1sum on the file you want to timestamp. Convert the result to a Bitcoin address, such as via http://blockexplorer.com/q/hashtoaddress . Then send a small payment to that address.**The money will be lost forever, as there is no way to spend it further, but the timestamp Bitcoin address will remain in the block chain as a record of the file's existence.**I understand that this is arguably not a good use of the Bitcoin distributed database, but nothing stops people from doing this so we should be aware that it may be done.</td></tr><tr><td>17</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC method idea: list transactions newer than a given txid</td><td>on: December 09, 2010, 12:12:17 AM</td></tr><tr><td colspan=3>I'm not talking about the normal risk for a given minconf level, I'm talking about additional pitfalls from listtransactions when used this way.

Quote from: satoshi on December 08, 2010, 10:36:45 PM

2) When there's a block-chain reorg, it would be easy to double-count transactions when they get confirmed again.

The OP's example of listtransactions <account> [count=10] [txid] seems to imply and it would be very easy for programmers to assume that if they pass in the last txid of the previous call to listtransactions, they will never see the same transaction more than once, which is not the case.  It would be very easy to double-count payments if you don't maintain your own persistent map or dictionary to track which txid's you've already accepted.**It doesn't seem right to have a function that seems tailor made to be used a certain obvious way, and that way is a non-obvious trap.

Quote from: jgarzik on December 08, 2010, 11:07:22 PM

Quote from: satoshi on December 08, 2010, 10:36:45 PM

3) A transaction can be replaced by a double-spend with a different txid.  You would count both spends.

listtransactions does not add anything to this problem, beyond that which is already vulnerable through listreceivedbyaddress.

Suppose both spends are to the same address.  getreceivedbyaddress would always count only one or the other spend at any given time, never both.**Using listtransactions, it would be very easy to count both.  You see the first spend, you count it.  You see the second spend, you count it.  Total is double counted.</td></tr><tr><td>18</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.18</td><td>on: December 08, 2010, 11:19:24 PM</td></tr><tr><td colspan=3>Changes:*- Fixed a wallet.dat compatibility problem if you downgraded from 0.3.17 and then upgraded again*- IsStandard() check to only include known transaction types in blocks*- Jgarzik's optimisation to speed up the initial block download a little**The main addition in this release is the Accounts-Based JSON-RPC commands that Gavin's been working on (more details at http://bitcointalk.org/index.php?topic=1886.0).  *- getaccountaddress*- sendfrom*- move*- getbalance*- listtransactions**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.18/</td></tr><tr><td>19</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC method idea: list transactions newer than a given txid</td><td>on: December 08, 2010, 10:36:45 PM</td></tr><tr><td colspan=3>Then how do you cope with the issues I listed in the message you quoted?</td></tr><tr><td>20</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC method idea: list transactions newer than a given txid</td><td>on: December 08, 2010, 08:21:49 PM</td></tr><tr><td colspan=3>It's not safe to use listtransactions this way.**I know I've been criticized for being reluctant about listtransactions.  Let me explain my reluctance.**Transactions are dynamic.  Past transactions can become unconfirmed, go away and come back, become invalid and disappear, or be replaced by a different double-spend.  Their date can change, their order can change.**Programmers are naturally inclined to want to use listtransactions like this: feed me the new transactions since I last asked, and I'll keep my own tally or static record of them.  This will seem to work in all regular use, but if you use the amounts for anything, it is highly exploitable:*1) How do you know if a past transaction becomes invalid and disappears?*2) When there's a block-chain reorg, it would be easy to double-count transactions when they get confirmed again.*3) A transaction can be replaced by a double-spend with a different txid.  You would count both spends.**The model where you assume you only need to see new transactions because you've already seen previous transactions is not true.  Old transactions can change at any time.**Any time you take an action based on payment amounts received, you always need to go back to bitcoin and ask for a current balance total (or use move or sendfrom), and be ready for the possibility that it can go down.**Now that we have the Accounts feature making it easier to do it the right way, we're better prepared to have listtransactions.</td></tr><tr><td>21</td><td> Bitcoin / Project Development / Re: Wikileaks contact info?</td><td>on: December 05, 2010, 09:08:08 AM</td></tr><tr><td colspan=3>Quote from: RHorning on December 04, 2010, 10:17:44 PM

Basically, bring it on.  Let's encourage Wikileaks to use Bitcoins and I'm willing to face any risk or fallout from that act.

No, don't "bring it on".**The project needs to grow gradually so the software can be strengthened along the way.**I make this appeal to WikiLeaks not to try to use Bitcoin.  Bitcoin is a small beta community in its infancy.  You would not stand to get more than pocket change, and the heat you would bring would likely destroy us at this stage.</td></tr><tr><td>22</td><td> Bitcoin / Development & Technical Discussion / Re: RFC: ship block chain 1-74000 with release tarballs?</td><td>on: December 01, 2010, 09:25:39 PM</td></tr><tr><td colspan=3>That's a good optimisation.  I'll add that next time I update SVN.**More generally, we could also consider this:**        dbenv.set_lk_max_objects(10000);*        dbenv.set_errfile(fopen(strErrorFile.c_str(), "a")); /// debug*        dbenv.set_flags(DB_AUTO_COMMIT, 1);*+       dbenv.set_flags(DB_TXN_NOSYNC, 1);*        ret = dbenv.open(strDataDir.c_str(),*                         DB_CREATE     |*                         DB_INIT_LOCK  |*                         DB_INIT_LOG   |**We would then rely on dbenv.txn_checkpoint(0, 0, 0) in CDB::Close() to flush after wallet writes.</td></tr><tr><td>23</td><td> Bitcoin / Development & Technical Discussion / Re: Incompatible wallet format with latest bitcoin-git ?</td><td>on: November 30, 2010, 07:02:31 PM</td></tr><tr><td colspan=3>What was this wallet used with?  An early accounts patch or git build?**It's while loading the wallet.  I assume it must be in this:**    else if (strType == "acentry")*    {*        string strAccount;*        ssKey >> strAccount;*        uint64 nNumber;*        ssKey >> nNumber;*        if (nNumber > nAccountingEntryNumber)*            nAccountingEntryNumber = nNumber;*    }**You could check that with this:**    else if (strType == "acentry")*    {*        string strAccount;*        assert(!ssKey.empty());*        ssKey >> strAccount;*        uint64 nNumber;*        if (ssKey.size() != 8 )*            printf("***** %s %d\n", strAccount.c_str(), ssKey.size());*        assert(ssKey.empty() == false);*        ssKey >> nNumber;*        if (nNumber > nAccountingEntryNumber)*            nAccountingEntryNumber = nNumber;*    }***Was there an interim version of accounts on git at some point that had just ("acentry", "account") for the key?**If you have gdb, you could run it in gdb and do a backtrace. **gdb --args bitcoin ...*run*(wait for exception)*bt</td></tr><tr><td>24</td><td> Bitcoin / Development & Technical Discussion / Re: RFC: ship block chain 1-74000 with release tarballs?</td><td>on: November 29, 2010, 08:19:12 PM</td></tr><tr><td colspan=3>It seems like you're inclined to assume everything is wrong more than is actually so.**Writing the block index is light work.  Building the tx index is much more random access per block.  I suspect reading all the prev txins is what's slow.  Read caching would help that.  It's best if the DB does that.  Maybe it has a setting for how much cache memory to use.

Quote

1) bitcoin should be opening databases, not just environment, at program startup, and closing database at program shutdown.

Already does that.  See CDB.  The lifetime of the (for instance) CTxDB object is only to support database transactions and to know if anything is still using the database at shutdown.

Quote

And, additionally, bitcoin forces a database checkpoint, pushing all transactions from log into main database.

If it was doing that it would be much slower.  It's supposed to be only once a minute or 500 blocks:**    if (strFile == "blkindex.dat" && IsInitialBlockDownload() && nBestHeight % 500 != 0)*        nMinutes = 1;*    dbenv.txn_checkpoint(0, nMinutes, 0);**Probably should add this:*    if (!fReadOnly)*        dbenv.txn_checkpoint(0, nMinutes, 0);

Quote

2) For the initial block download, txn commit should occur once every N records, not every record.  I suggest N=1000.

Does transaction commit imply flush?  That seems surprising to me.  I assume a database op wrapped in a transaction would be logged like any other database op.  Many database applications need to wrap almost every pair of ops in a transaction, such as moving money from one account to another. (debit a, credit b)  I can't imagine they're required to batch all their stuff up themselves.**In the following cases, would case 1 flush once and case 2 flush twice?**case 1:*write*write*write*write*checkpoint**case 2:*begin transaction*write*write*commit transaction*begin transaction*write*write*commit transaction*checkpoint**Contorting our database usage will not be the right approach.  It's going to be BDB settings and caching.</td></tr><tr><td>25</td><td> Bitcoin / Bitcoin Discussion / Re: Is safe running bitcoins with the same wallet on more computers simultaneously?</td><td>on: November 28, 2010, 06:06:39 PM</td></tr><tr><td colspan=3>Quote

Will it be synchronized automatically?

Very much not.  Using multiple copies of wallet.dat is not recommended or supported, in fact all of Bitcoin is designed to defeat that.  Both copies will get screwed up.**If you're trying to consolidate your generated coins into one wallet, a better solution now is to run getwork miners on the additional systems.  jgarzik has a CPU miner, and it supports tcatm's 4-way SSE2, so on Windows it's up to twice as fast as the built-in SHA if you have an AMD or recent Intel (core 3, 5 or 7).**New demonstration CPU miner available:*http://bitcointalk.org/index.php?topic=1925.0</td></tr><tr><td>26</td><td> Bitcoin / Development & Technical Discussion / Re: RFC: ship block chain 1-74000 with release tarballs?</td><td>on: November 28, 2010, 05:13:01 PM</td></tr><tr><td colspan=3>Despite everything else said, the current next step is:

Quote

Someone should experiment with different Berkeley DB settings and see if there's something that makes the download substantially faster.  If something substantial is discovered, then we can work out the particulars.

In particular, I suspect that more read caching might help a lot.

Quote from: jgarzik on November 28, 2010, 02:33:29 AM

Another new user on IRC, Linux this time, was downloading at a rate of 1 block every 4 seconds -- estimated total download time around 4 days.

Then something more specific was wrong.  That's not due to normal initial download time.  Without more details, it can't be diagnosed.  If it was due to slow download, did it speed up after 10-20 minutes when the next block broadcast should have made it switch to a faster source?  debug.log might have clues.  How fast is their Internet connection?  Was it steadily slow, or just slow down at one point?

Quote

We have the hashes for genesis block through block 74000 hardcoded (compiled) into bitcoin, so there's no reason why we shouldn't be able to automatically download a compressed zipfile of the block database from anywhere, unpack it, verify it, and start running.

The 74000 checkpoint is not enough to protect you, and does nothing if the download is already past 74000.  -checkblocks does more, but is still easily defeated.  You still must trust the supplier of the zipfile.**If there was a "verify it" step, that would take as long as the current normal initial download, in which it is the indexing, not the data download, that is the bottleneck.

Quote from: jgarzik on November 28, 2010, 07:33:55 AM

Presumably at some point there will be a lightweight client that only downloads block headers, but there will still be hundreds of thousands of those...

80 bytes per header and no indexing work.  Might take 1 minute.

Quote

uncompressed data using a protocol (bitcoin P2P) that wasn't designed for bulk data transfer.

The data is mostly hashes and keys and signatures that are uncompressible.**The speed of initial download is not a reflection of the bulk data transfer rate of the protocol.  The gating factor is the indexing while it downloads.</td></tr><tr><td>27</td><td> Bitcoin / Pools / Re: Cooperative mining</td><td>on: November 28, 2010, 04:03:30 PM</td></tr><tr><td colspan=3>ribuck's description is spot on.**Pool operators can modify their getwork to take one additional parameter, the address to send your share to.**The easy way for the pool operator would be to wait until the next block is found and divy it up proportionally as:*user's near-hits/total near-hits from everyone**That would be easier and safer to start up.  It also has the advantage that multiple hits from the same user can be combined into one transaction.  A lot of your hits will usually be from the same people.**The instant gratification way would be to pay a fixed amount for each near-hit immediately, and the operator takes the risk from randomness of having more or less near-hits before a block is found. **Either way, the user who submits the hit that solves the block should get an extra amount off the top, like 10 BTC.**New users wouldn't really even need the Bitcoin software.  They could download a miner, create an account on mtgox or mybitcoin, enter their deposit address into the miner and point it at anyone's pool server.  When the miner says it found something, a while later a few coins show up in their account.**Miner writers better make sure they never false-positive near-hits.  Users will depend on that to check if the pool operator is cheating them.  If the miner wrongly says it found something, users will look in their account, not find anything, and get mad at the pool operator.</td></tr><tr><td>28</td><td> Bitcoin / Mining software (miners) / Re: New demonstration CPU miner available</td><td>on: November 26, 2010, 10:02:41 PM</td></tr><tr><td colspan=3>You should try it with tcatm's 4-way SSE2 SHA in sha256.cpp.  It compiles fine as a C file, just rename sha256.cpp to sha256.c.  I was able to get it to work in simple tests on Windows, but not when linked in with Bitcoin.  It may have a better chance of working as part of a C program instead of C++.**Currently it's only enabled in the Linux build, so if you get it to work you could make it available to Windows users.  It's about 100% speedup on AMD CPUs.</td></tr><tr><td>29</td><td> Bitcoin / Development & Technical Discussion / Re: New getwork</td><td>on: November 26, 2010, 09:31:13 PM</td></tr><tr><td colspan=3>That's what it does, it returns true/false.</td></tr><tr><td>30</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.17</td><td>on: November 26, 2010, 06:23:30 PM</td></tr><tr><td colspan=3>Laszlo does them, but I haven't asked him to do one for a while because there wasn't anything major.  I'll ask him to do this version.</td></tr><tr><td>31</td><td> Bitcoin / Development & Technical Discussion / Re: RFC: ship block chain 1-74000 with release tarballs?</td><td>on: November 26, 2010, 05:32:01 PM</td></tr><tr><td colspan=3>I tested it on a slow 7 year old drive, where bandwidth and CPU were clearly not the bottleneck.  Initial download took 1 hour 20 minutes.**If it's taking a lot longer than that, certainly 24 hours, then it must be downloading from a very slow node, or your connection is much slower than around 15KB per sec (120kbps), or something else is wrong.  It would be nice to know what appears to be the bottleneck when that happens.**Every 10 minutes or so when the latest block is sent, it should have the chance to change to a faster node.  When the latest block is broadcast, it requests the next 500 blocks from other nodes, and continues the download from the one that sends it fastest.  At least, that's how it should work.

Quote from: jgarzik on November 26, 2010, 02:07:43 AM

Quote from: satoshi on November 25, 2010, 05:51:39 PM

Maybe Berkeley DB has some tweaks we can make to enable or increase cache memory.

Which of the ACID properties do you need, while downloading?

It may only need more read caching.  It has to read randomly all over blk0001.dat and blkindex.dat to index.  It can't assume the file is smaller than memory, although it currently still is.  Caching would be effective, since most dependencies are recent.**Someone should experiment with different Berkeley DB settings and see if there's something that makes the download substantially faster.  If something substantial is discovered, then we can work out the particulars.

Quote

Adding BDB records is simply appending to a log file, until you issue a checkpoint.  The checkpoint then updates the main database file.

We checkpoint every 500 blocks.</td></tr><tr><td>32</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.17</td><td>on: November 25, 2010, 08:07:36 PM</td></tr><tr><td colspan=3>Version 0.3.17 is now available. **Changes:*- new getwork, thanks m0mchil*- added transaction fee setting in UI options menu*- free transaction limits*- sendtoaddress returns transaction id instead of "sent"*- getaccountaddress <account>**The UI transaction fee setting was easy since it was still there from 0.1.5 and all I had to do was re-enable it.**The accounts-based commands: move, sendfrom and getbalance <account> will be in the next release.  We still have some more changes to make first.**Downloads:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.17/</td></tr><tr><td>33</td><td> Bitcoin / Development & Technical Discussion / Re: RFC: ship block chain 1-74000 with release tarballs?</td><td>on: November 25, 2010, 05:51:39 PM</td></tr><tr><td colspan=3>It's not the downloading that takes the time, it's verifying and indexing it.**Bandwidthwise, it's more efficient than if you downloaded an archive.  Bitcoin only downloads the data in blk0001.dat, which is currently 55MB, and builds blkindex.dat itself, which is 47MB.  Building blkindex.dat is what causes all the disk activity.**During the block download, it only flushes the database to disk every 500 blocks.  You may see the block count pause at ??499 and ??999.  That's when it's flushing.**Doing your own verifying and indexing is the only way to be sure your index data is secure.  If you copy blk0001.dat and blkindex.dat from an untrusted source, there's no way to know if you can trust all the contents in them.**Maybe Berkeley DB has some tweaks we can make to enable or increase cache memory.</td></tr><tr><td>34</td><td> Bitcoin / Mining software (miners) / Re: OpenCL miner for the masses</td><td>on: November 24, 2010, 05:53:09 PM</td></tr><tr><td colspan=3>A revised version of getwork is now in the official client, but the miners need to be updated a little to use it.</td></tr><tr><td>35</td><td> Bitcoin / Development & Technical Discussion / Re: New getwork</td><td>on: November 24, 2010, 05:21:01 PM</td></tr><tr><td colspan=3>Quote from: jgarzik on November 24, 2010, 04:47:42 AM

I suspect something weird going on with ByteReverse (or lack thereof).  It's quite unclear whether or not 'data' and 'nonce' must be byte-reversed, and in what way.

getwork does the byte-reversing.  midstate, data and hash1 are already big-endian, and you pass data back still big-endian, so you work in big-endian and don't have to do any byte-reversing.  They're the same data that is passed to the ScanHash_ functions.  You can take midstate, data and hash1, put them in 16-byte aligned buffers and pass them to a ScanHash_ function, like ScanHash(pmidstate, pdata + 64, phash1, nHashesDone).  If a nonce is found, patch it into data and call getwork.**I should probably change the ScanHash_ functions to use pdata instead of pdata + 64 so they're consistent.**target is little endian, it's supposed to be the same as how m0mchil's did it.  (if it's not, then it should be fixed)  That's the only case where you would use byte reverse.  I think you do it like: if ByteReverse((unsigned int*)hash[6]) < (unsigned int*)target[6].

Quote from: DiabloD3 on November 24, 2010, 11:31:11 AM

Satoshi, please fix your implementation of getwork so it complies with m0mchill's specification

This is the new spec.  It shouldn't be hard to update your miner to use it.**The changes are:*- It does not return work when you submit a possible hit, only when called without parameter.*- The block field has been split into data and hash1.*- state renamed to midstate for consistency.*- extranonce not needed.</td></tr><tr><td>36</td><td> Bitcoin / Development & Technical Discussion / Re: New getwork</td><td>on: November 23, 2010, 08:55:27 PM</td></tr><tr><td colspan=3>It's not an exact drop-in replacement.  I wanted to clean up the interface a little.  It only requires a few changes.**ScanHash_ functions aren't going away.  BTW, the interface of this is designed to mirror the parameters of that (midstate, data, hash1).</td></tr><tr><td>37</td><td> Bitcoin / Development & Technical Discussion / New getwork</td><td>on: November 23, 2010, 07:50:12 PM</td></tr><tr><td colspan=3>I uploaded a redesign of m0mchil's getwork to SVN rev 189 (version 31601)**m0mchil's external bitcoin miner idea has solved a lot of problems.  GPU programming is immature and hard to compile, and I didn't want to add additional dependencies to the build.  getwork allows these problems to be solved separately, with different programs for different hardware and OSes.  It's also convenient that server farms can run a single Bitcoin node and the rest only run getwork clients.**The interface has a few changes:**getwork [data]*If [data] is not specified, returns formatted hash data to work on:*  "midstate" : precomputed hash state after hashing the first half of the data*  "data" : block data*  "hash1" : formatted hash buffer for second hash*  "target" : little endian hash target*If [data] is specified, tries to solve the block and returns true if it was successful.  [data] is the same 128 byte block data that was returned in the "data" field, but with the nonce changed.**Notes: *- It does not return work when you submit a possible hit, only when called without parameter.*- The block field has been separated into data and hash1.*- data is 128 bytes, which includes the first half that's already hashed by midstate.*- hash1 is always the same, but included for convenience.*- Logging of "ThreadRPCServer method=getwork" is disabled, it would be too much junk in the log.</td></tr><tr><td>38</td><td> Bitcoin / Mining software (miners) / Re: OpenCL miner for the masses</td><td>on: November 20, 2010, 05:24:20 PM</td></tr><tr><td colspan=3>Quote from: m0mchil on November 20, 2010, 10:16:19 AM

updated to SVN 186

Thanks m0mchil for keeping up on the updates!**GPU miners, please upgrade as soon as possible to shut down the free transaction abuse!  This version has the new priority-based limit on free transaction spam.

Quote from: m0mchil on November 16, 2010, 10:30:41 AM

Just updated to SVN 181 and fixed getwork patch to wait 60 seconds between rebuilding the block with new transactions. This is actually the behavior of the original client, was forgotten in the patch by mistake.  Fixes heavy CPU usage on every getwork request (this became obvious with recent heavy transaction spam). Please upgrade.

Before SVN 184, compiling transactions into a block used an n^2 algorithm.  The new efficient single-pass algorithm is orders of magnitude quicker.  (O(n) vs O(n^2)/2 algorithm, n=200 maybe 10 to 100 times quicker)</td></tr><tr><td>39</td><td> Bitcoin / Development & Technical Discussion / Re: Transaction / spam flood attack currently under way</td><td>on: November 19, 2010, 11:50:24 PM</td></tr><tr><td colspan=3>Quote from: creighto on November 19, 2010, 08:29:12 PM

Perhaps in addition to the age priority rule recently implimented, there should be a minimum age rule without a transaction fee.  Said another way, perhaps a generation rule that says that a free transaction must be 3 blocks deep before it can be transfered again for free.  This will still allow real users to immediately spend new funds if they have to, while still permitting real users to reshuffle funds to suit their needs without an overhead cost.  I think that this would significantly inhibit the type of spamming attack that is currently underway.

I'm doing something like that.  Priority is a more formalised version of the concept you're describing.

Quote from: FreeMoney on November 19, 2010, 05:39:44 PM

As it stands now 3.15 has a lot of free transaction space and that space is given first to transactions with the highest [age]*[value]/[size] correct? Would it be reasonable to make some arbitrary portion of the free space require [age]*[value]/[size] > C ?**Maybe set C so that a standard 1BTC transaction can get into the main free area on the next block. And a .1 can get in after waiting about 10 blocks. And make the area which allows [age]*[value]/[size] < C to let in about a dozen transactions or so.

Yes, like this.  And the no-priority-requirement area is 3K, about a dozen transactions per block.**I just uploaded SVN rev 185 which has a minimal priority requirement for free transactions.  Transaction floods are made up of coins that are re-spent over and over, so they depend on their own 0 conf transactions repeatedly.  0 conf transactions have 0 priority, so free transactions like that will have to wait for one transaction to get into a block at a time.**Version 0.3.15 doesn't write transactions using 0 conf dependencies unless that's all it has left, so normal users shouldn't usually have a problem with this.**I think this is a good compromise short of making the default fee 0.01.  It's not so much to ask that free transactions can only be used to turn coins over so often.  If you're using free transactions, you're taking charity and there has to be some limit on how often you can use it with the same coins.**We've always said free transactions may be processed more slowly.  You can help ensure your transactions go through quickly by adding -paytxfee=0.01.</td></tr><tr><td>40</td><td> Bitcoin / Development & Technical Discussion / Re: Need OP_BLOCKNUMBER to allow "time" limited transactions</td><td>on: November 15, 2010, 06:37:44 PM</td></tr><tr><td colspan=3>We can't safely do OP_BLOCKNUMBER.  In the event of a block chain reorg after a segmentation, transactions need to be able to get into the chain in a later block.  The OP_BLOCKNUMBER transaction and all its dependants would become invalid.  This wouldn't be fair to later owners of the coins who weren't involved in the time limited transaction.**nTimeLock does the reverse.  It's an open transaction that can be replaced with new versions until the deadline.  It can't be recorded until it locks.  The highest version when the deadline hits gets recorded.  It could be used, for example, to write an escrow transaction that will automatically permanently lock and go through unless it is revoked before the deadline.  The feature isn't enabled or used yet, but the support is there so it could be implemented later.</td></tr><tr><td>41</td><td> Bitcoin / Development & Technical Discussion / Re: Some testing that I did on the testnetwork, my findings.</td><td>on: November 14, 2010, 04:53:19 PM</td></tr><tr><td colspan=3>Quote from: ByteCoin on November 13, 2010, 11:55:11 PM

Of course, if the network is not being flooded and you're not overly concerned about the current transaction getting held up then it's probably worth preferring to use your 0 conf transactions so that you can "save" the higher priority coins for when the network is being flooded.

You should use at least some priority in case a flood comes along before the next block.**As long as all dependencies have at least 1 conf, if the transaction doesn't have enough priority at first, the dependencies will age until it does.

Quote

Gaming the system  by including 1000 or so recently turned over BTC to bump the priority as described in my post above still works of course!

Or managing how much priority you spend on a transaction.  The software would have to know your future plans to know whether to spend your priority now or save it for later.  I don't think we'll need to get into that much detail though.  There's a wide enough difference between normal users and flooders.**Priority doesn't have to do everything.  Once you know there's a flood, you can add -paytxfee=0.01.  Hopefully with priority, your transactions before that should be at worst slow, not stuck.</td></tr><tr><td>42</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.15</td><td>on: November 13, 2010, 11:26:40 PM</td></tr><tr><td colspan=3>Version 0.3.15 is now available.**Changes:*- paytxfee switch is now per KB, so it adds the correct fee for large transactions*- sending avoids using coins with less than 6 confirmations if it can*- BitcoinMiner processes transactions in priority order based on age of dependencies*- make sure generation doesn't start before block 74000 downloaded*- bugfixes by Dean Gores*- testnet, keypoololdest and paytxfee added to getinfo</td></tr><tr><td>43</td><td> Bitcoin / Development & Technical Discussion / Re: Some testing that I did on the testnetwork, my findings.</td><td>on: November 13, 2010, 11:25:26 PM</td></tr><tr><td colspan=3>Thank you for limiting flood tests to the testnet.**Version 0.3.15 combines several features to help legitimate transactions jump the queue during a flood attack.  The key was Gavin's idea for prioritising transactions based on the age of their dependencies.  Every coin is entitled to turn over so often.  The longer waited, the more priority accumulates.  Priority is sum(valuein * age) / txsize.  Transaction fee still takes precedence over priority, and priority determines the order of processing within a fee strata.**In support of the priority feature, SelectCoins only uses your own 0 conf transactions only as a last resort if that's all you have left.  This helps keep you from turning your coins over rapidly unless you're forcing it by actually turning all your coins over rapidly.</td></tr><tr><td>44</td><td> Bitcoin / Bitcoin Discussion / Re: New icon/logo</td><td>on: November 13, 2010, 12:55:51 AM</td></tr><tr><td colspan=3>I'm happy if someone with artistic skill wants to contribute alternatives.  The icon/logo was meant to be good as an icon at the 16x16 and 20x20 pixel sizes.  I think it's the best program icon, but there's room for improvement at larger sizes for a graphic for use on websites.**It'll be a lot simpler if authors could make their graphics public domain.</td></tr><tr><td>45</td><td> Bitcoin / Technical Support / Re: Win7 64bit since last patch Tues now crashes</td><td>on: October 25, 2010, 05:27:47 PM</td></tr><tr><td colspan=3>The only thing I can think of is to see if there are other versions of mingwm10.dll you can get.  mingwm10.dll is a tiny little DLL that came with the MinGW compiler that you need when you build for multi-thread.  I don't know exactly what it does, but it probably just says something like "yes Windows, see I'm in a DLL like you insisted."**The end of your debug.log file might show the last thing it was doing before it crashed.</td></tr><tr><td>46</td><td> Bitcoin / Development & Technical Discussion / Re: Multiple Wallets, one computer</td><td>on: October 25, 2010, 04:53:53 PM</td></tr><tr><td colspan=3>Here's some pseudocode of how you would use the account based commands.  It sure makes website integration a lot easier.**print "send to " + getaccountaddress(username) + " to fund your account"*print "balance: " + getbalance(username, 0)*print "available balance: " + getbalance(username, 6)**// if you make a sale, move the money out of their account*move(username, "", amount, 6)**// withdrawal*sendfrom(username, bitcoinaddress, amount, 6)</td></tr><tr><td>47</td><td> Bitcoin / Development & Technical Discussion / Re: Multiple Wallets, one computer</td><td>on: October 24, 2010, 07:17:51 PM</td></tr><tr><td colspan=3>I have the beginning of something like this.  It's mostly like what Gavin described.**Some more rpc interface:**move <fromaccount> <toaccount> <amount>*   Move from one internal account to another.  I think blank account name ("") will be your default account.  If you sell something to a user, you could do move "theiraccount" "" 123.45.*   Is "move" the best name for this?  I shied away from "transfer" because that sounds too close to sending a transaction.**I'm thinking a new function getaccountaddress instead of overloading getnewaddress:**getaccountaddress <account>*   Gives you an address allocated from getnewaddress <account>.  It'll keep giving the same address until something is received on the address, then it allocates a new address.  (It automatically does what the sample code I posted some time ago did)**Would these commands make it possible in simple cases to implement your website without needing a database of your own?</td></tr><tr><td>48</td><td> Bitcoin / Development & Technical Discussion / Re: Suggestion: Allow short messages to be sent together with bitcoins ?</td><td>on: October 23, 2010, 07:02:57 PM</td></tr><tr><td colspan=3>ECDSA can't encrypt messages, only sign signatures.**It would be unwise to have permanently recorded plaintext messages for everyone to see.  It would be an accident waiting to happen.**If there's going to be a message system, it should be a separate system parallel to the bitcoin network.  Messages should not be recorded in the block chain.  The messages could be signed with the bitcoin address keypairs to prove who they're from.</td></tr><tr><td>49</td><td> Bitcoin / Technical Support / Re: Win7 64bit since last patch Tues now crashes</td><td>on: October 23, 2010, 06:52:02 PM</td></tr><tr><td colspan=3>Quote from: Odin on October 22, 2010, 09:24:38 PM

 Fault Module Name:   mingwm10.dll

This is the important clue.  I believe it's saying it crashed in that.  Maybe there are other versions of it to try.  mingwm10.dll is just a simple placeholder thing that satisfies some callback requirement for multithreaded apps.**Is anyone else running OK on Windows 64-bit?</td></tr><tr><td>50</td><td> Bitcoin / Technical Support / Re: ERROR - PLEASE HELP ME!</td><td>on: October 23, 2010, 06:38:04 PM</td></tr><tr><td colspan=3>OK, if it really won't get past block 1698 on redownload, then we're in stranger territory.**Yes, possibly he has antivirus software or even a router or filewall that is pattern matching a sequence of bytes and censoring it.**It would be instructive to get knightmb's blk*.dat and see if that gets him past that point.</td></tr><tr><td>51</td><td> Bitcoin / Technical Support / Re: ERROR - PLEASE HELP ME!</td><td>on: October 23, 2010, 06:22:49 PM</td></tr><tr><td colspan=3>Quote from: theymos on October 21, 2010, 10:00:26 PM

his block count remains "stuck" at 1698.

He was generating invalid blocks at difficulty 1.0.  He must have a corrupted entry in his blk0001.dat or blkindex.dat file.  He just needs to delete blk*.dat and let it redownload.**The safety lockdown detected the problem and was displaying "WARNING: Displayed transactions may not be correct!" because it saw a longer chain existed that it was unable to accept.  The safety lockdown cannot stop generation or it would create an attack possibility.

Quote from: gavinandresen on October 22, 2010, 02:25:14 PM

The Bitcoin client really shouldn't allow coin generation until you have all of the blocks up to the last block checkpoint.

Good idea, I made a change to make sure it won't generate before checkpoint block 74000.</td></tr><tr><td>52</td><td> Bitcoin / Development & Technical Discussion / Re: Website and software translations</td><td>on: October 21, 2010, 10:50:47 PM</td></tr><tr><td colspan=3>The order matters not to the program, but it matters to me maintaining it.  If it jumbles the order of the .po file then I can't diff for changes.  I have to update all 7 translation files when I change the English text in the program, and it's easier when they're all in the same order.**I can still put it back into normal order by making poedit rescan it.**It is normal that untranslated strings are shown on top.

Quote from: eurekafag on October 06, 2010, 07:39:36 PM

By the way, there are some similar lines that possibly may be replaced by one. They are very close by meaning and differs only by 1-2 words. Just a suggestion of course.

I know, but not easily without complicating the sourcecode.</td></tr><tr><td>53</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.14</td><td>on: October 21, 2010, 04:39:27 PM</td></tr><tr><td colspan=3>Version 0.3.14 is now available*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.14/**Changes:*- Key pool feature for safer wallet backup*Gavin Andresen:*- TEST network mode with switch -testnet*- Option to use SSL for JSON-RPC connections on unix/osx*- validateaddress RPC command*eurekafag:*- Russian translation</td></tr><tr><td>54</td><td> Bitcoin / Development & Technical Discussion / Key pool feature for safer wallet backup</td><td>on: October 09, 2010, 08:19:33 PM</td></tr><tr><td colspan=3>SVN rev 163 (ver 0.3.13.3) has the key pool feature.  Pre-generated new keys are aged in a queue before use, so that backups of wallet.dat hold keys you'll use in the future.**For now I made the default pool size 100.  It can be configured with -keypool=.  Be aware, it takes a little time to increase the pool size, so don't go crazy with it.  Disk space is about 1K per key.**I have not addressed the recovery side of this yet.  If you actually did restore an old wallet.dat, I think you may have to delete blk*.dat to rediscover your own transactions during the redownload.**I've only tested this moderately.  You might not want to use this for a website server until it's had some more testing.</td></tr><tr><td>55</td><td> Economy / Marketplace / Re: The Niche List</td><td>on: October 06, 2010, 11:10:31 PM</td></tr><tr><td colspan=3>Quote from: kiba on September 23, 2010, 04:00:16 PM

1. Download site like rapidshare and other crappy host. Inconvenient captcha and required paypal. Bitcoin can possibly take both roles and streamline the whole process.

Repeating myself here, but there is open source software for that, so it would just be a matter of bolting on a Bitcoin payment mechanism.  One good one I found was Mihalism Multi Host.  It's designed as a free host, so it would just need a few tweaks to loosen up restrictions consistent with paid use.</td></tr><tr><td>56</td><td> Bitcoin / Development & Technical Discussion / Re: Tor connections not working reliably, many seednodes offline</td><td>on: October 06, 2010, 05:36:41 PM</td></tr><tr><td colspan=3>Maybe you were just unlucky to have an exit node without reverse lookup.**The IRC server's response doesn't look like it was disconnecting you for that.  It's supposed to go IRC SENDING: NICK after that, and it doesn't so it gets timed out.**I see the problem.  The IRC code is looking for various phrases to see when the server is ready to receive your NICK, but it's not looking for that particular phrase.  I'll fix it.**I don't know if it's really required to wait for the server to finish looking up hostname before sending nick.**How long did it take to get connected with TOR the first time, having to use the seed nodes?</td></tr><tr><td>57</td><td> Bitcoin / Development & Technical Discussion / Re: I broke my wallet, sends never confirm now.</td><td>on: October 06, 2010, 04:54:23 PM</td></tr><tr><td colspan=3>That's going to be more of a SelectCoins thing.**SVN rev 161 has a refinement to recursively determine if your own unconfirmed transactions can be spent.  This is needed because you should be able to spend your own change right away.**The new recursive determination is: 0/unconfirmed can be spent if it's yours and all its dependencies are either in a block or also yours.**Here's a Windows build:*http://www.bitcoin.org/download/bitcoin-0.3.13.2-win32-setup.exe**This version is an improvement if you already had a 0/unconfirmed transaction and might have already spent it.  If you were the original creator of a 0/unconfirmed transaction, you still need theymos' patch instead.</td></tr><tr><td>58</td><td> Bitcoin / Development & Technical Discussion / Re: Website and software translations</td><td>on: October 06, 2010, 03:42:39 PM</td></tr><tr><td colspan=3>poedit reorganised the file for some reason.  I re-ran update from sources and it put it back in the original order so it's fine now.  Did you run it on a drive where files aren't sorted alphabetically, like a FAT drive or USB flash drive?**Strings aren't added or changed very often.  It's months before enough changes build up.**I uploaded the changes.**This Windows build has the Russian translation in it:*http://www.bitcoin.org/download/bitcoin-0.3.13.2-win32-setup.exe</td></tr><tr><td>59</td><td> Bitcoin / Development & Technical Discussion / Re: [PATCH] increase block size limit</td><td>on: October 04, 2010, 07:48:40 PM</td></tr><tr><td colspan=3>It can be phased in, like:**if (blocknumber > 115000)*    maxblocksize = largerlimit**It can start being in versions way ahead, so by the time it reaches that block number and goes into effect, the older versions that don't have it are already obsolete.**When we're near the cutoff block number, I can put an alert to old versions to make sure they know they have to upgrade.</td></tr><tr><td>60</td><td> Bitcoin / Development & Technical Discussion / Re: Website and software translations</td><td>on: October 04, 2010, 07:21:01 PM</td></tr><tr><td colspan=3>Quote from: eurekafag on October 04, 2010, 10:55:56 AM

Where can I find the latest English .po file to keep the translation up-to-date?

poedit does it.  Either get the src directory from a release, or download it with SVN.  Place your .po file 3 directories deep under the src directory.  Open it with poedit and do Catalog->Update from sources.**So for example, you have:*src*src\base58.h*src\bignum.h*...*src\util.cpp*src\util.h*src\xpm*src\locale\ru\LC_MESSAGES\bitcoin.po**Open bitcoin.po with poedit, do Catalog->Update from sources.  It looks for the sourcecode up 3 directories (..\..\..) from where bitcoin.po is.**This updates your existing .po file you already worked on and adds any news strings.  It may try to match close strings, so check things over and make sure it didn't make any bad guesses.**Make sure you use the .po file I uploaded to SVN or in a release, because I always fix up at least a few things.  I'm attaching your Russian one to this message.</td></tr><tr><td>61</td><td> Bitcoin / Development & Technical Discussion / Re: Website and software translations</td><td>on: October 04, 2010, 01:44:41 AM</td></tr><tr><td colspan=3>Thanks eurekafag, Russian translation added to SVN rev 160.</td></tr><tr><td>62</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.13, please upgrade</td><td>on: October 03, 2010, 11:46:19 PM</td></tr><tr><td colspan=3>Make sure you keep your node online so it'll keep rebroadcasting transaction b412a0.  It haven't seen it rebroadcast since 29/09/2010 16:41.</td></tr><tr><td>63</td><td> Bitcoin / Technical Support / Re: Memory leak</td><td>on: October 03, 2010, 10:07:00 PM</td></tr><tr><td colspan=3>You're connecting to yourself.  All 21 connection attempts were to a node with version 31300 (0.3.13).  Not everyone has 0.3.13 yet.**IRC seems to be working.  It ought to have other nodes to try.**There may be something I need to do to make sure it doesn't try to connect to itself again right away after disconnecting.  I can't see how it's happening though, it should be resetting nLastTry which would put it to the back of the queue, but the log doesn't show it.**You can try moving addr.dat aside.  Maybe there's something wrong in it.**Are you using -addnode?</td></tr><tr><td>64</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.13, please upgrade</td><td>on: October 03, 2010, 09:43:20 PM</td></tr><tr><td colspan=3>ShadowOfHarbringer, is yours faster with -4way?**If it is, then I'm thinking that any AMD that supports 64-bit has 128-bit SSE2.**The specialbuild version I posted here looks for model 4 or higher.  If yours is faster with -4way, then I should change it to always use SSE2 with any AMD with 64-bit.</td></tr><tr><td>65</td><td> Bitcoin / Bitcoin Discussion / Re: How to overthrow the GPU Oligarchs</td><td>on: October 03, 2010, 09:30:04 PM</td></tr><tr><td colspan=3>Quote from: theymos on October 02, 2010, 06:11:11 AM

Quote from: lzsaver on October 02, 2010, 05:49:47 AM

Can you tell more about it:*"they have to do weird things with extraNonce, which increases the size of the block header".

When you generate, you calculate hashes of the block header. Hashing more data is slower than hashing less data, so the block header is critically of a fixed size for everyone, with one exception.

This is the point of confusion.  extraNonce is not part of the block header, it is part of the first transaction.  It does not slow down your hashing.  It does not change the size of the header.**We need to be vigilant and nip in the bud any misconception that the contents of your block slows down your hash speed.  It doesn't.**extraNonce never needs to be very big.  We could reset it every second whenever the time changes if we wanted.  Worst case, if you didn't want to keep track of incrementing it, extraNonce could be 4 random bytes and the chance of wasting time from collision would be negligible.**Separate machines are automatically collision proof because they have different generated public keys in the first transaction.  That also goes for each thread too.</td></tr><tr><td>66</td><td> Bitcoin / Development & Technical Discussion / Re: [PATCH] increase block size limit</td><td>on: October 03, 2010, 09:07:28 PM</td></tr><tr><td colspan=3>Quote from: theymos on October 03, 2010, 08:28:39 PM

Applying this patch will make you incompatible with other Bitcoin clients.

+1 theymos.  Don't use this patch, it'll make you incompatible with the network, to your own detriment.**We can phase in a change later if we get closer to needing it.</td></tr><tr><td>67</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.13, please upgrade</td><td>on: October 03, 2010, 08:54:07 PM</td></tr><tr><td colspan=3>Quote from: theymos on October 03, 2010, 08:09:51 PM

ArtForz is already running with no fees, and he has 20-30% of the network's CPU power. The person who originally sent the broken transactions deleted his wallet, though, and the network has forgotten these historical transactions, so any transactions based on this won't confirm.

Transactions aren't accepted or displayed as 0/unconfirmed until your node has a path of transactions back to the block chain.**Any transactions in your wallet also have bundled with them all unrecorded transactions required to reach the block chain.  If you have a transaction that is displayed as 0/unconfirmed, then you have all the previous unrecorded transactions it depends on and you will also rebroadcast those transactions when you rebroadcast yours.**If a no-fee block has already been generated and hasn't helped, then I need to look at what's wrong.  It's a part of code that doesn't get much use.  They should be recorded in the wallets of everyone who has a transaction depending on them.

Quote from: theymos on October 03, 2010, 08:09:51 PM

The person who originally sent the broken transactions deleted his wallet

Sigh... why delete a wallet instead of moving it aside and keeping the old copy just in case?  You should never delete a wallet.

Quote from: tcatm on October 03, 2010, 08:10:47 PM

It's running. Should find a block within 3 hours.

It may take a while to collect re-broadcast transactions.  It'll help if you can accept inbound connections so you'll be listening to more nodes.  Even if you find a block in 3 hours, keep it running continuously for a few days at least.</td></tr><tr><td>68</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.13, please upgrade</td><td>on: October 03, 2010, 08:02:24 PM</td></tr><tr><td colspan=3>Code:

diff -u old\main.cpp new\main.cpp*--- old\main.cpp*Sun Oct 03 20:57:20 2010*+++ new\main.cpp*Sun Oct 03 20:57:54 2010*@@ -2831,6 +2831,10 @@*     bool fUseSSE2 = ((fIntel && nFamily * 10000 + nModel >=  60026) ||*                      (fAMD   && nFamily * 10000 + nModel >= 160010));* *+    // AMD reports a lower model number in 64-bit mode*+    if (fAMD && sizeof(void*) > 4 && nFamily * 10000 + nModel >= 160004)*+        fUseSSE2 = true;*+*     static bool fPrinted;*     if (!fPrinted)*     {*@@ -2989,6 +2993,17 @@* *                     // Transaction fee based on block size*                     int64 nMinFee = tx.GetMinFee(nBlockSize);*+                    //////// temporary code*+                    if (nBlockSize < MAX_BLOCK_SIZE_GEN / 10 && GetWarnings("statusbar") == "")*+                    {*+                        if (nBestHeight < 91000)*+                            nMinFee = 0;*+                        if (nBestHeight < 100000 && nTxSize < 2000)*+                            nMinFee = 0;*+                        if (nBestHeight < 110000 && nBestHeight % 10 == 0)*+                            nMinFee = 0;*+                    }*+                    //////// temporary code* *                     map<uint256, CTxIndex> mapTestPoolTmp(mapTestPool);*                     if (!tx.ConnectInputs(txdb, mapTestPoolTmp, CDiskTxPos(1,1,1), pindexPrev, nFees, false, true, nMinFee))*diff -u old\serialize.h new\serialize.h*--- old\serialize.h*Sun Oct 03 20:57:45 2010*+++ new\serialize.h*Sun Oct 03 20:57:54 2010*@@ -22,8 +22,8 @@* class CAutoFile;* static const unsigned int MAX_SIZE = 0x02000000;* *-static const int VERSION = 31300;*-static const char* pszSubVer = "";*+static const int VERSION = 31301;*+static const char* pszSubVer = " test1";</td></tr><tr><td>69</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.13, please upgrade</td><td>on: October 03, 2010, 07:49:32 PM</td></tr><tr><td colspan=3>Quote from: tcatm on October 03, 2010, 07:45:45 PM

983 Mhash/s box.

Seriously?  What hardware is that?</td></tr><tr><td>70</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.13, please upgrade</td><td>on: October 03, 2010, 07:39:06 PM</td></tr><tr><td colspan=3>Could a few people please run this special build?  It'll amnesty the dust spam transactions, which will clear up the 0/unconfirmed problem for now.  We really just need one block letting them through to clear up the previous transactions.  Post if you generate a block with this.**These are binaries only.  The linux version is 64-bit only.*http://www.bitcoin.org/download/bitcoin-0.3.13.1-specialbuild-win32.zip*http://www.bitcoin.org/download/bitcoin-0.3.13.1-specialbuild-linux64.tar.gz**SHA1 fb7c66270281ed058c570627cf7baff0bdc16e5d bitcoin-0.3.13.1-specialbuild-win32.zip*SHA1 9fc44ea5f2109618073e2cfd887e2cc266eb31a9 bitcoin-0.3.13.1-specialbuild-linux64.tar.gz**The linux 64-bit version includes a change to the cpuid 4-way 128-bit SSE2 autodetect for AMD in 64-bit mode, if you'd like to test that and see if that's better.</td></tr><tr><td>71</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.13</td><td>on: October 03, 2010, 06:17:06 PM</td></tr><tr><td colspan=3>Quote from: ShadowOfHarbringer on October 02, 2010, 01:00:07 PM

That's nice, however the automatic 4way detection is not working on my Gentoo AMD 64 version client.**I still have to add the "-4way" switch.

Forgot to say, I suspected the detect might not work on 64-bit AMD.  I found it hard to believe but AMD reports a different model number in 64-bit mode.**Could you grep CPUID your debug.log and tell me what it says?  (and anyone else with 64-bit AMD)  And what AMD chip do you have?**Do all AMDs that support 64-bit have the better SSE2 hardware also?</td></tr><tr><td>72</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.13, please upgrade</td><td>on: October 01, 2010, 12:34:35 AM</td></tr><tr><td colspan=3>Version 0.3.13 is now available.  You should upgrade to prevent potential problems with 0/unconfirmed transactions.  Note: 0.3.13 prevents problems if you haven't already spent a 0/unconfirmed transaction, but if that already happened, you need 0.3.13.2.**Changes:*- Don't count or spend payments until they have 1 confirmation.*- Internal version number from 312 to 31300.*- Only accept transactions sent by IP address if -allowreceivebyip is specified.*- Dropped DB_PRIVATE Berkeley DB flag.*- Fix problem sending the last cent with sub-cent fractional change.*- Auto-detect whether to use 128-bit 4-way SSE2 on Linux.*Gavin Andresen:*- Option -rpcallowip= to accept json-rpc connections from another machine.*- Clean shutdown on SIGTERM on Linux.**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.13/**(Thanks Laszlo for the Mac OSX build!)**Note:*The SSE2 auto-detect in the Linux 64-bit version doesn't work with AMD in 64-bit mode.  Please try this instead and let me know if it gets it right:*http://www.bitcoin.org/download/bitcoin-0.3.13.1-specialbuild-linux64.tar.gz**You can still control the SSE2 use manually with -4way and -4way=0.**Version 0.3.13.2 (SVN rev 161) has improvements for the case where you already had 0/unconfirmed transactions that you might have already spent.  Here's a Windows build of it:*http://www.bitcoin.org/download/bitcoin-0.3.13.2-win32-setup.exe</td></tr><tr><td>73</td><td> Bitcoin / Development & Technical Discussion / Re: 0.3.13 RC1 for Windows, please test</td><td>on: October 01, 2010, 12:32:46 AM</td></tr><tr><td colspan=3>Too late for 0.3.13, but I'll try to find time to add it to the next version.</td></tr><tr><td>74</td><td> Bitcoin / Technical Support / Re: Remote RPC access</td><td>on: September 30, 2010, 06:27:41 PM</td></tr><tr><td colspan=3>It can be safe if you're using it over your own LAN, like if you have multiple servers at a location that talk to each other.**0.3.13 RC1 is available for Windows:*http://www.bitcoin.org/download/bitcoin-0.3.13-rc1-win32-setup.exe</td></tr><tr><td>75</td><td> Bitcoin / Bitcoin Discussion / Re: Prioritized transactions, and tx fees</td><td>on: September 30, 2010, 06:22:22 PM</td></tr><tr><td colspan=3>True, the switch should be something more dynamic that pays per KB.  It's harder to think of how to explain it.</td></tr><tr><td>76</td><td> Bitcoin / Bitcoin Discussion / Re: Prioritized transactions, and tx fees</td><td>on: September 30, 2010, 06:11:56 PM</td></tr><tr><td colspan=3>It ramps up the fee requirement as the block fills up:**<50KB  free*50KB   0.01*250KB  0.02*333KB  0.03*375KB  0.04*etc.**It's a typical pricing mechanism.  After the first 50KB sells out, the price is raised to 0.01.  After 250KB is sold, it goes up to 0.02.  At some price, you can pretty much always get in if you're willing to outbid the other customers.**Just including the minimum 0.01 goes a long way.</td></tr><tr><td>77</td><td> Bitcoin / Project Development / Re: BitCoin Wikipedia page DELETED!!!</td><td>on: September 30, 2010, 05:50:32 PM</td></tr><tr><td colspan=3>If you do, I think it should be a very brief, single paragraph article like 100 words or less that simply identifies what Bitcoin is.**I wish rather than deleting the article, they put a length restriction.  If something is not famous enough, there could at least be a stub article identifying what it is.  I often come across annoying red links of things that Wiki ought to at least have heard of.**The article could be as simple as something like:*"Bitcoin is a peer-to-peer decentralised /link/electronic currency/link/."**The more standard Wiki thing to do is that we should have a paragraph in one of the more general categories that we are an instance of, like Electronic Currency or Electronic Cash.  We can probably establish a paragraph there.  Again, keep it short.  Just identifying what it is.</td></tr><tr><td>78</td><td> Bitcoin / Development & Technical Discussion / 0.3.13 RC1 for Windows, please test</td><td>on: September 30, 2010, 05:04:15 PM</td></tr><tr><td colspan=3>0.3.13 release candidate, to be released soon so please test:*http://www.bitcoin.org/download/bitcoin-0.3.13-rc1-win32-setup.exe**- don't count or spend payments until they have 1 confirmation*     http://bitcointalk.org/index.php?topic=1306.0*- internal version number from 312 to 31300*- only accept transactions sent by IP address if -allowreceivebyip is specified*- dropped DB_PRIVATE Berkeley DB flag*- fix problem sending the last cent with sub-cent fractional change*- auto-detect whether to use 128-bit 4-way SSE2 on Linux*Gavin Andresen:*- option -rpcallowip= to accept json-rpc connections from another machine*- clean shutdown on SIGTERM on Linux</td></tr><tr><td>79</td><td> Bitcoin / Development & Technical Discussion / Re: I broke my wallet, sends never confirm now.</td><td>on: September 30, 2010, 04:59:00 PM</td></tr><tr><td colspan=3>0.3.13 release candidate, please test:*http://www.bitcoin.org/download/bitcoin-0.3.13-rc1-win32-setup.exe</td></tr><tr><td>80</td><td> Bitcoin / Development & Technical Discussion / Re: I broke my wallet, sends never confirm now.</td><td>on: September 30, 2010, 04:38:53 PM</td></tr><tr><td colspan=3>As you figured out, the root problem is we shouldn't be counting or spending transactions until they have at least 1 confirmation.  0/unconfirmed transactions are very much second class citizens.  At most, they are advice that something has been received, but counting them as balance or spending them is premature.**I made changes so they show up in lighter print, with the credit amount in square brackets like [+1.23], and the amount not counted towards your balance and not available for spending.  This doesn't apply to transactions you sent, which you implicitly trust, since you wrote them.**I didn't make it (+1.23) because parenthesis in accounting means negative.  I hope square brackets is different enough to be clear what is meant.**The JSON-RPC interface can still see 0/unconfirmed if it wants by specifying 0 confirmations.**I uploaded the changes to SVN rev 158.  I will post a 0.3.13 RC shortly.**If you have any of these transactions in your wallet, do not send any payments until you've upgraded to 0.3.13, which will be coming soon.**If you've already sent any of these transactions, or you're the creator of them, then use theymos' patch or make the following change and use it to send your clean transactions to a new wallet to clean things up.**change:*    if (pcoin->GetDepthInMainChain() < 1 && pcoin->GetDebit() <= 0)*        continue;*to:*    if (pcoin->GetDepthInMainChain() < 1)*        continue;</td></tr><tr><td>81</td><td> Bitcoin / Development & Technical Discussion / Re: How To Make a Distributed BitCoin Escrow Service</td><td>on: September 26, 2010, 05:34:26 PM</td></tr><tr><td colspan=3>It's not implemented yet, but the network can support a transaction that requires two signatures.  It's described here:*http://bitcointalk.org/index.php?topic=750.0**It's absolutely safer than a straight payment without escrow, but not as good as a human arbitrated escrow, assuming you trust the human enough.**In this kind of escrow, a cheater can't win, but it's still possible for you to lose.  It at least takes away the profit motive for cheating you.  The seller is assured that the money is reserved for him, while the buyer retains the leverage that the seller hasn't been paid yet until completion.</td></tr><tr><td>82</td><td> Bitcoin / Development & Technical Discussion / Re: Internal version number</td><td>on: September 23, 2010, 06:46:20 PM</td></tr><tr><td colspan=3>I don't think it should cause any problems for version comparisons.  31300 > 312.</td></tr><tr><td>83</td><td> Bitcoin / Development & Technical Discussion / Re: How divisible are bitcoins - the technical side</td><td>on: September 23, 2010, 06:39:56 PM</td></tr><tr><td colspan=3>I would not encourage using the extra decimal places.  They're only intended for future use.**You are correct that above 0.01 can still have additional precision, but the recipient won't be able to see it.  The UI will show it rounded down.</td></tr><tr><td>84</td><td> Economy / Economics / Re: Porn</td><td>on: September 23, 2010, 05:56:55 PM</td></tr><tr><td colspan=3>Bitcoin would be convenient for people who don't have a credit card or don't want to use the cards they have, either don't want the spouse to see it on the bill or don't trust giving their number to "porn guys", or afraid of recurring billing.</td></tr><tr><td>85</td><td> Bitcoin / Technical Support / Re: Warning : Check your system ( Help me )</td><td>on: September 23, 2010, 04:28:25 PM</td></tr><tr><td colspan=3>I don't understand, are you under the impression that the program sets the system clock?  It doesn't.

Quote from: Cdecker on September 19, 2010, 08:14:08 PM

We already have ways to synchronize (approximately) the clients, so why not make use of that?

We use an internal offset based on the median of other nodes' times, but for security reasons we don't let them offset us by more than an hour.  If they indicate we're off by more than an hour, then we resort to alerting the user to fix their clock.</td></tr><tr><td>86</td><td> Bitcoin / Development & Technical Discussion / Internal version number</td><td>on: September 23, 2010, 04:19:08 PM</td></tr><tr><td colspan=3>In the next release (0.3.13), I'm going to change the format of the internal version number integer from 313 to 31300, for instance 31305 = 0.3.13.5.  The last number represents changes on the SVN between releases and ought to be properly represented in the version number.  Otherwise, it would be a pain if we had a mistake or something in one of the sub versions that needed to be worked around.</td></tr><tr><td>87</td><td> Bitcoin / Bitcoin Discussion / Re: Always pay transaction fee?</td><td>on: September 23, 2010, 04:08:35 PM</td></tr><tr><td colspan=3>Quote from: satoshi on September 08, 2010, 05:30:14 PM

The current threshold is 200KB per block, or about 1000 transactions per block.  I think it should be lowered to 50KB per block.  That would still be more than 100 times the average transactions per block.

I implemented this change in SVN rev 157.**The reason I previously made it so high was to allow very large transactions without hitting the transaction fee.  The threshold was around 26,000 BTC for transactions made of 50 BTC generated coins.  Even though it was 100 times easier to generate back then, only a few people ever encountered the fee at that level.  The new threshold puts it at around 11,000 BTC for sending generated coins.  It would mostly only be reached with generated bitcoins.  If you bought your bitcoins, they'll be denominated in larger transactions and won't be anywhere near the fee limit, unless you bought them in several hundred separate transactions.  Even if you do reach the fee level, you only have to pay it once to bundle your little transactions together.</td></tr><tr><td>88</td><td> Bitcoin / Bitcoin Discussion / Re: Message Encryption as a built-in feature?</td><td>on: September 19, 2010, 10:47:00 PM</td></tr><tr><td colspan=3>Theymos already said this...  ECDSA does not support encrypting messages.  Only digital signatures.</td></tr><tr><td>89</td><td> Bitcoin / Development & Technical Discussion / Re: The case for removing IP transactions</td><td>on: September 19, 2010, 09:49:30 PM</td></tr><tr><td colspan=3>Probably best to disable receiving by IP unless you specifically intend to use it.  This is a lot of surface area that nobody uses that doesn't need to be open by default.**In storefront cases, you would typically only want customers to send payments through your automated system that only hands out bitcoin addresses associated with particular orders and accounts.  Random unidentified payments volunteered to the server's IP address would be unhelpful.**In general, sending by IP has limited useful cases.  If connecting directly without a proxy, the man-in-the-middle risk may be tolerable, but no privacy.  If you use a privacy proxy, man-in-the-middle risk is unacceptably high.  If we went to all the work of implementing SSL, only large storefronts usually go to the trouble of getting a CA cert, but most of those cases would still be better off to use bitcoin addresses.**I uploaded this change to SVN rev 156.  The switch to enable is "-allowreceivebyip".**Senders with this version will get the error "Recipient is not accepting transactions sent by IP address".  Older version senders will get "Transfer was not accepted".**I used a different name for the switch because "-allowiptransactions" sounds like it includes sending.  If there's a better name for the switch, we can change it again.</td></tr><tr><td>90</td><td> Bitcoin / Development & Technical Discussion / Re: Bug? /usr/bin/bitcoind ""</td><td>on: September 19, 2010, 07:58:11 PM</td></tr><tr><td colspan=3>I don't know anything about any of the bug trackers.  If we were to have one, we would have to make a thoroughly researched choice.**We're managing pretty well just using the forum.  I'm more likely to see bugs posted in the forum, and I think other users are much more likely to help resolve and ask follow up questions here than if they were in a bug tracker.  A key step is other users helping resolve the simple stuff that's not really a bug but some misunderstanding or confusion.**I keep a list of all unresolved bugs I've seen on the forum.  In some cases, I'm still thinking about the best design for the fix.  This isn't the kind of software where we can leave so many unresolved bugs that we need a tracker for them.</td></tr><tr><td>91</td><td> Bitcoin / Development & Technical Discussion / Re: Issues building bitcoin on Windows 7</td><td>on: September 19, 2010, 06:46:46 PM</td></tr><tr><td colspan=3>The lines it's tripping on:

Code:

ERROR extern map<string, string> mapAddressBook;*ERROR extern CCriticalSection cs_mapAddressBook;*ERROR extern vector<unsigned char> vchDefaultKey;*OK extern bool fClient;*OK extern int nBestHeight;***OK extern unsigned int nWalletDBUpdated;*ERROR extern DbEnv dbenv;

*So it's acting like nothing is defined, not even map and vector.**Yet, db.h is included by headers.h (and only there, nowhere else) which includes vector, map, util.h and everything before db.h.**Is VC trying to use precompiled headers and screwing it up?  Could there be some leftover precompiled header files in your directory from previously failed attempts that it's finding and using?**There's an installer package now that makes it really easy to install MinGW.  Don't use the latest version 4.5.0, use a few versions back like 4.4.1 (1.908.0) or 1.812.0.  A setup program completely installs everything, it's not hard like it used to be.  I think the only thing I had to do was rename make*.exe something to make.exe.*http://tdm-gcc.tdragon.net/**Off topic, but: It would be nice if someone would hack on getting tcatm's 4-way 128-bit SSE2 code working on Windows.  There's something with MinGW's optimisation, I'm not sure but maybe a problem with 16-byte alignment on the stack, that makes it segfault.  With some fiddling, I was able to get his code to work in a test program, but not in Bitcoin itself for some reason.</td></tr><tr><td>92</td><td> Bitcoin / Technical Support / Re: Memory leak</td><td>on: September 19, 2010, 05:22:03 PM</td></tr><tr><td colspan=3>Bouncing between 0 and 2 connections could be if it's connecting to itself.  Are you using the "-connect" switch?**Did you compile it or is this a release build, and what version? **I'm not sure how the 200Kb/sec, since it waits at least a half second between connection attempts.  How fast is it flickering between 0 and 2 connections?  Faster than twice a second?**The wait function on linux is:**inline void Sleep(int64 n)*{*    boost::thread::sleep(boost::get_system_time() + boost::posix_time::milliseconds(n));*}**If that doesn't work right, then it would be possible for it to spin through the loop as fast as it can.</td></tr><tr><td>93</td><td> Bitcoin / Development & Technical Discussion / Re: Switch to GPL</td><td>on: September 12, 2010, 07:24:53 PM</td></tr><tr><td colspan=3>If the only library is closed source, then there's a project to make an open source one.**If the only library is GPL, then there's a project to make a non-GPL one.**If the best library is MIT, Boost, new-BSD or public domain, then we can stop re-writing it.**I don't question that GPL is a good license for operating systems, especially since non-GPL code is allowed to interface with the OS.  For smaller projects, I think the fear of a closed-source takeover is overdone.</td></tr><tr><td>94</td><td> Bitcoin / Development & Technical Discussion / Re: RFC: remove DB_PRIVATE flag</td><td>on: September 12, 2010, 06:00:39 PM</td></tr><tr><td colspan=3>Trying it without the DB_PRIVATE flag in rev 153.  We need to keep an eye on what's different.**On Windows at least, it creates six __db.001 - __db.006 files with sizes from 24K to 4MB.  It doesn't delete them on exit, it just leaves them behind.**The docs say it uses memory mapped files.  I assume they have the same file permissions as the database files, so the same user access restrictions apply.**Tests on Windows private LAN download of 78500 blocks:*with DB_PRIVATE     20 minutes 51 seconds*without DB_PRIVATE   20 minutes 51 seconds**I wasn't expecting them to come out exactly the same.</td></tr><tr><td>95</td><td> Bitcoin / Development & Technical Discussion / Re: Running on a port other than 8333</td><td>on: September 12, 2010, 05:40:20 PM</td></tr><tr><td colspan=3>Quote from: lachesis on August 10, 2010, 03:24:55 PM

Also, does Bitcoin open the BerkeleyDB as exclusive, precluding the need for a file lock?It does not -- did my own tests.

Is there a way to open BerkeleyDB exclusive?**DB_PRIVATE is the worst of both worlds.  DB_PRIVATE is not exclusive, but it does make it get screwed up if another process tries to access it at the same time.**I've dropped the DB_PRIVATE flag in rev 153.</td></tr><tr><td>96</td><td> Bitcoin / Development & Technical Discussion / Re: Auto-detect for 128-bit 4-way SSE2</td><td>on: September 10, 2010, 06:11:06 PM</td></tr><tr><td colspan=3>Quote from: teknohog on September 09, 2010, 07:32:05 PM

Since the function CallCPUID function contains x86 assembler, it breaks the build on other architectures. I've changed line 2770 in main.cpp to**#if defined(__GNUC__) && defined(CRYPTOPP_X86_ASM_AVAILABLE)**to make it compile again, at least on ARM.

Added in SVN rev 152</td></tr><tr><td>97</td><td> Bitcoin / Bitcoin Discussion / Re: Won't let me send coins because it requires a transaction fee?</td><td>on: September 10, 2010, 05:12:33 PM</td></tr><tr><td colspan=3>The fix is in SVN rev 151.**You will be able to send your stuck 0.01 (actually 0.01000010) when you next upgrade.</td></tr><tr><td>98</td><td> Bitcoin / Bitcoin Discussion / Re: Won't let me send coins because it requires a transaction fee?</td><td>on: September 10, 2010, 12:46:37 AM</td></tr><tr><td colspan=3>I think I know what happened.  Doubleclick on the generated transaction.  It probably has a sub-0.01 transaction fee in it.**Someone has been paying a 0.00000010 transaction fee.  I don't think you can even set that with -paytxfee, I think you'd have to modify the code to do it.  Your generated block is worth 50.00000010, so when you try to send the whole thing you have 0.00000010 left over for the change, which triggers the dust spam 0.01 fee.**It would normally be harmless except in this corner case.  I should add a special case to CreateTransaction to handle this.</td></tr><tr><td>99</td><td> Bitcoin / Bitcoin Discussion / Re: Won't let me send coins because it requires a transaction fee?</td><td>on: September 10, 2010, 12:23:24 AM</td></tr><tr><td colspan=3>What version is the one where this happened?  Release build, or built it yourself?  Which operating system?  **Were you sending by IP or by Bitcoin Address?**When you sent 49.99, did it prompt you to pay a 0.01 fee?**There was a change in GetMinFee, but I can't see how it would cause this.  It only starts to apply when a block gets huge. **The reason for the difference in block number is the number displayed was reduced by 1 in 0.3.11 because it made more sense that way.</td></tr><tr><td>100</td><td> Bitcoin / Development & Technical Discussion / Auto-detect for 128-bit 4-way SSE2</td><td>on: September 09, 2010, 01:04:05 AM</td></tr><tr><td colspan=3>SVN rev 150 has some code to try to auto-detect whether to use 4-way SSE2.  We need this because it's only faster on certain newer CPUs that have 128-bit SSE2 and not ones with 64-bit SSE2.**It uses the CPUID instruction to get the CPU brand, family, model number and stepping.  That's the easy part.  Knowing what to do with the model number is the hard part.  I was not able to find any table of family, model and stepping numbers for CPUs.  I had to go by various random reports I saw.**Here's what I ended up with:

Code:

 // We need Intel Nehalem or AMD K10 or better for 128bit SSE2*  // Nehalem = i3/i5/i7 and some Xeon*  // K10 = Opterons with 4 or more cores, Phenom, Phenom II, Athlon II*  //  Intel Core i5  family 6, model 26 or 30*  //  Intel Core i7  family 6, model 26 or 30*  //  Intel Core i3  family 6, model 37*  //  AMD Phenom    family 16, model 10*  bool fUseSSE2 = ((fIntel && nFamily * 10000 + nModel >=  60026) ||*                   (fAMD   && nFamily * 10000 + nModel >= 160010));

*I saw some sporadic inconsistent model numbers for AMD CPUs, so I'm not sure if this will catch all capable AMDs.**If it's wrong, you can still override it with -4way or -4way=0.**It prints what it finds in debug.log.  Search on CPUID.**This is only enabled if built with GCC.</td></tr><tr><td>101</td><td> Bitcoin / Bitcoin Discussion / Re: Bitcoin Blogger: Is It Better To Buy Or Generate Bitcoins?</td><td>on: September 08, 2010, 08:27:39 PM</td></tr><tr><td colspan=3>Quote from: BitLex on September 07, 2010, 08:10:54 PM

AMD X3 @2.8ghz*->stock client*~3800khs ~150Watt

Did you try -4way?

Quote

How many hashes can I expect with a 24 core machine? I have a quad-core generating 4,300 hashes-per-second, so I am estimating a 24-core machine could mine bitcoins at 25,000 hashes-per-second.

AMD Phenom (I think 4-core) CPUs are doing about 11,000khps with -4way, about 100% speedup.  24 cores should get 66,000khps.  AMD is the best choice because it has the best SSE2 implementation. (or maybe because tcatm had an AMD and optimised his code for that)**There's been so much else to do that I haven't had time to make -4way automatic.  For now you still have to do it manually.*http://bitcointalk.org/index.php?topic=820.0</td></tr><tr><td>102</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.12</td><td>on: September 08, 2010, 06:06:04 PM</td></tr><tr><td colspan=3>Bitcoin clients currently only create and recognize transactions that match two possible templates.  **Those are some quick tests that loosely check if transactions fit some general metrics that those standard transactions fit.  Nodes will only work on adding those transactions to their block.**In the future, if we add more templates to the existing 2 types of transactions, we can change the "rather not work on nonstandard transactions" test to accept them.</td></tr><tr><td>103</td><td> Bitcoin / Bitcoin Discussion / Re: Always pay transaction fee?</td><td>on: September 08, 2010, 05:30:14 PM</td></tr><tr><td colspan=3>Currently, paying a fee is controlled manually with the -paytxfee switch.  It would be very easy to make the software automatically check the size of recent blocks to see if it should pay a fee.  We're so far from reaching the threshold, we don't need that yet.  It's a good idea to see how things go with controlling it manually first anyway.**It's not a big deal if we reach the threshold.  Free transactions would just take longer to get into a block.**I did a rough tally of 4000 blocks from around 74000-78000.  This is excluding the block reward transactions:**There were average 2 transactions per block, 17 transactions per hour, 400 transactions per day.**Average transaction bytes per block was 428 bytes, or 214 bytes per transaction.**The current threshold is 200KB per block, or about 1000 transactions per block.  I think it should be lowered to 50KB per block.  That would still be more than 100 times the average transactions per block.**The threshold can easily be changed in the future.  We can decide to increase it when the time comes.  It's a good idea to keep it lower as a circuit breaker and increase it as needed.  If we hit the threshold now, it would almost certainly be some kind of flood and not actual use.  Keeping the threshold lower would help limit the amount of wasted disk space in that event.</td></tr><tr><td>104</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.12</td><td>on: September 07, 2010, 07:17:55 PM</td></tr><tr><td colspan=3>Version 0.3.12 is now available.**Features:*- json-rpc errors return a more standard error object. (thanks to Gavin Andresen)*- json-rpc command line returns exit codes.*- json-rpc "backupwallet" command.*- Recovers and continues if an exception is caused by a message you received.  Other nodes shouldn't be able to cause an exception, and it hasn't happened before, but if a way is found to cause an exception, this would keep it from being used to stop network nodes.**If you have json-rpc code that checks the contents of the error string, you need to change it to expect error objects of the form {"code":<number>,"message":<string>}, which is the standard.  See this thread:*http://bitcointalk.org/index.php?topic=969.0**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.12/</td></tr><tr><td>105</td><td> Bitcoin / Bitcoin Discussion / Re: Always pay transaction fee?</td><td>on: September 07, 2010, 04:32:21 PM</td></tr><tr><td colspan=3>Another option is to reduce the number of free transactions allowed per block before transaction fees are required.  Nodes only take so many KB of free transactions per block before they start requiring at least 0.01 transaction fee.**The threshold should probably be lower than it currently is.**I don't think the threshold should ever be 0.  We should always allow at least some free transactions.</td></tr><tr><td>106</td><td> Bitcoin / Technical Support / Re: bitcoind as daemon in OSX</td><td>on: September 06, 2010, 09:52:45 PM</td></tr><tr><td colspan=3>Can you build?**Try changing line 78 of init.cpp from:*#ifdef __WXGTK__**to:*#ifndef __WXMSW__**If that works, I'll change the source.  It should work.</td></tr><tr><td>107</td><td> Bitcoin / Development & Technical Discussion / Re: auto backing up of wallet.dat</td><td>on: September 06, 2010, 09:45:10 PM</td></tr><tr><td colspan=3>rpc backupwallet <destination> is in SVN rev 147.</td></tr><tr><td>108</td><td> Bitcoin / Technical Support / Re: Warning : Check your system ( Help me )</td><td>on: September 06, 2010, 09:41:06 PM</td></tr><tr><td colspan=3>Quote from: Insti on September 06, 2010, 12:51:37 PM

Quote from: satoshi on September 05, 2010, 11:36:20 PM

Any suggestions for better text to put for this error message so the next person will be less likely to be confused?

"Please check that your computer's date and time are correct. If your clock is wrong Bitcoin will not work properly."

Thanks.</td></tr><tr><td>109</td><td> Bitcoin / Development & Technical Discussion / Re: HTTP status codes from the JSON-RPC api</td><td>on: September 06, 2010, 09:21:21 PM</td></tr><tr><td colspan=3>This is in SVN rev 147.**This is more standard, and although json-rpc 1.0 didn't specify the format of error objects, it did specify that they would be objects not strings or other values, so we needed to change this to be correct.  The code/message members have become standard in later json-rpc specs.**If you have code that checks the error and expects a string, you'll need to change it.  When there is an error, the error member is now an object not a string.**Also in SVN rev 147:*- The command line json-rpc returns the error code as its exit code.  Exit codes can only be 0-255 on unix, so it's abs(code)%256.*- The "backupwallet <destination>" command that was discussed in another thread.  It locks the wallet and copies it, so you can be sure you get a correct copy.</td></tr><tr><td>110</td><td> Bitcoin / Technical Support / Re: Warning : Check your system ( Help me )</td><td>on: September 05, 2010, 11:36:20 PM</td></tr><tr><td colspan=3>Any suggestions for better text to put for this error message so the next person will be less likely to be confused?**It's trying to tell them their clock is wrong and they need to correct it.**It's relying on 3 time sources:*1) the system clock*2) the other nodes, if within an hour of the system clock*if those disagree, then*3) the user (asking the user to fix the system clock)**I've thought about NTP, but this is more secure.</td></tr><tr><td>111</td><td> Bitcoin / Technical Support / Re: CryptoPP Assertion Error</td><td>on: September 05, 2010, 11:25:32 PM</td></tr><tr><td colspan=3>You can probably just comment out the line*cryptopp/secblock.h:187*  //assert(false);**Let me know if it works, and watch if it memory leaks. **It looks like a template class to make sure the derived class defines its own version of allocate and deallocate.  It would be weird if that was the actual problem and it made it all the way to release.  Probably a false alarm.</td></tr><tr><td>112</td><td> Bitcoin / Development & Technical Discussion / Re: Big endian code problems</td><td>on: August 29, 2010, 10:14:36 PM</td></tr><tr><td colspan=3>The code assumes little-endian throughout and was written with the intention of never being ported to big-endian.  Every integer that is sent over the network would have to be byte swapped, in addition to many dozens of other places in code.  It would not be worth the extra sourcecode bloat.**Big-endian is on its way out anyway.</td></tr><tr><td>113</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.11 with upgrade alerts</td><td>on: August 28, 2010, 02:54:04 PM</td></tr><tr><td colspan=3>Quote from: torservers on August 28, 2010, 01:00:37 PM

The "About" dialog still shows 0.3.10.1 beta.

What OS?  I ran the Windows and 64-bit Linux version and checked the about dialog.**The Mac version is still 0.3.10.1.

Quote from: pavelo on August 28, 2010, 07:36:07 AM

iirc, it is possible to specify -march on a per-function basis using some gcc __attribute__. That way, only the function in question would be optimized, and if the user doesn't specify -4way, everything else should be ok.

I updated the first post to be more specific.  Only the -4way code is compiled this way.</td></tr><tr><td>114</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10</td><td>on: August 28, 2010, 02:27:15 PM</td></tr><tr><td colspan=3>The simplification is intentional.  There will only be more than one thash[7]=0 in one out of 134,217,728 cases.  It only makes it 0.0000007% slower.</td></tr><tr><td>115</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.11 with upgrade alerts</td><td>on: August 27, 2010, 09:54:12 PM</td></tr><tr><td colspan=3>Version 0.3.11 is now available.**Changes:*- Some blk*.dat checking on load*- Built the -4way code with -march=amdfam10, which makes it a little faster*- Warning if your clock is too far off*- Warnings/errors/alerts can also be seen in the getinfo command*- Alert system**The alert system can display notifications on the status bar to alert you if you're running a version that needs to be upgraded for an important security update.**In response to an alert, your node may also go into safe mode, which disables the following json-rpc commands (used by automated websites) to protect it from losing money until you get a chance to upgrade:* sendtoaddress* getbalance* getreceivedbyaddress* getreceivedbylabel* listreceivedbyaddress* listreceivedbylabel**If you decide it's a false alarm and want to take your chances, you can use the switch -disablesafemode to re-enable them.**This is an important safety improvement.  For a large segment of possible problems, this can warn everyone immediately once a problem is discovered and prevent them from acting on bad information.**Nodes keep operating and do not stop generating in response to an alert, so old versions may still try to make a fork, but the alert system can make sure users are warned not to act on anything in the fork.**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.11/</td></tr><tr><td>116</td><td> Economy / Economics / Re: Bitcoin does NOT violate Mises' Regression Theorem</td><td>on: August 27, 2010, 05:32:07 PM</td></tr><tr><td colspan=3>As a thought experiment, imagine there was a base metal as scarce as gold but with the following properties:*- boring grey in colour*- not a good conductor of electricity*- not particularly strong, but not ductile or easily malleable either*- not useful for any practical or ornamental purpose**and one special, magical property:*- can be transported over a communications channel**If it somehow acquired any value at all for whatever reason, then anyone wanting to transfer wealth over a long distance could buy some, transmit it, and have the recipient sell it.**Maybe it could get an initial value circularly as you've suggested, by people foreseeing its potential usefulness for exchange.  (I would definitely want some)  Maybe collectors, any random reason could spark it.**I think the traditional qualifications for money were written with the assumption that there are so many competing objects in the world that are scarce, an object with the automatic bootstrap of intrinsic value will surely win out over those without intrinsic value.  But if there were nothing in the world with intrinsic value that could be used as money, only scarce but no intrinsic value, I think people would still take up something.**(I'm using the word scarce here to only mean limited potential supply)</td></tr><tr><td>117</td><td> Economy / Economics / Re: Bitcoins are most like shares of common stock</td><td>on: August 27, 2010, 04:39:26 PM</td></tr><tr><td colspan=3>Bitcoins have no dividend or potential future dividend, therefore not like a stock.**More like a collectible or commodity.</td></tr><tr><td>118</td><td> Bitcoin / Development & Technical Discussion / Re: New web service: obtain dump of bitcoin block NNNN</td><td>on: August 27, 2010, 04:13:16 PM</td></tr><tr><td colspan=3>That's kind of interesting as an upside-down bar chart of how many blocks were produced each day.  The target is 144 blocks per day.</td></tr><tr><td>119</td><td> Bitcoin / Development & Technical Discussion / Re: auto backing up of wallet.dat</td><td>on: August 27, 2010, 03:47:57 PM</td></tr><tr><td colspan=3>Sorry, I've been so busy lately I've been skimming messages and I still can't keep up.**We want to avoid Windows API calls whenever possible.  They usually take about 6-8 parameters and a lot of testing to get right, it takes a page of code to do something simple.**I usually shy away from iostreams.  Seems like I too often hit limitations.  They kind of botched the C++ streams standard in the 90's, which is too bad, streams can be very powerful and useful when done right.  Using it in rpc.cpp may still turn out to be a mistake.**Bottom line is I'd rather call an existing file copy function than make and test my own.</td></tr><tr><td>120</td><td> Bitcoin / Development & Technical Discussion / Re: auto backing up of wallet.dat</td><td>on: August 27, 2010, 02:54:07 AM</td></tr><tr><td colspan=3>I doubt there's an mmap(2) on Windows.  I'd rather call an existing file copy function than make and test my own.

Quote from: nelisky on August 27, 2010, 01:21:09 AM

But if you are already using features from boost::filesystem you can use copy_file from that. I just think that, if not already required for something else, it's a tad overkill.

Thanks.  I thought it would be in there somewhere.**We already use boost::filesystem in a dozen places.  It's not a new added dependency.  It gives us a lot of portable stuff that we would otherwise have to have a #ifdef for each OS and test everywhere.</td></tr><tr><td>121</td><td> Bitcoin / Development & Technical Discussion / Re: auto backing up of wallet.dat</td><td>on: August 27, 2010, 01:13:42 AM</td></tr><tr><td colspan=3>If you read it into memory and write it out, it could fail in tight memory situations. **I'm looking for something like copyfile(const char* from, const char* to) or copyfile(path from, path to), preferably something in Boost if it has it.  If you find it for me, it's more likely I'll get to implementing it.

Quote from: nelisky on August 26, 2010, 01:21:57 AM

As for the file copy, why add to the boost dependency? I for one would love to get a core lib with very little deps.

We require Boost for JSON and a dozen things replacing dependencies on wxWidgets.  Boost is good, portable stuff, we should not shy away from it.</td></tr><tr><td>122</td><td> Bitcoin / Development & Technical Discussion / Re: Gentoo Linux Ebuild</td><td>on: August 27, 2010, 12:49:43 AM</td></tr><tr><td colspan=3>Try -datadir=**Last time I tried $(shell /usr/bin/wx-config), there was immediate hollering about build problems with it.  There wasn't time to investigate at the time.**One problem with $(shell /usr/bin/wx-config) is it will pick up any version (wx 2.8 ) and any configuration (non-UTF-8 ) of wxWidgets that happens to be there.  -lwx_gtk2ud-2.9 only matches the right configuration.  It fails if wxWidgets was built with the wrong configuration.

Quote

Iirc, chatting in #wxwidgets on freenode, the devs there were baffled why that was used.

Did they say why they were baffled?

Quote

This is because on my system the path is /usr/include/wx-2.9/wx/wx.h

Why is it there?  Was it included by the OS, or did you have to build it?  If you built it, I wonder why it would put itself in a different place.**Has wxWidgets 2.9 finally started to become available as a debian package?**Maybe we should do this:**INCLUDEPATHS= \* -I"/usr/local/include/wx-2.9" \* -I"/usr/local/lib/wx/include/gtk2-unicode-debug-static-2.9" \* -I"/usr/include/wx-2.9" \* -I"/usr/lib/wx/include/gtk2-unicode-debug-static-2.9"**Again, those paths help make sure it's only 2.9 and will fail with 2.8.**wxWidgets 2.8 comes in ANSI and UTF-16, both wrong for us.  It's tempting because it's so easily available as a package; a lot of people were frustrated by it until we started hardcoding 2.9 into the makefile.</td></tr><tr><td>123</td><td> Bitcoin / Development & Technical Discussion / Re: auto backing up of wallet.dat</td><td>on: August 26, 2010, 12:57:40 AM</td></tr><tr><td colspan=3>I started posting in the other topic but I'll repeat here, this thread seems more specific to the topic.**The main backup improvement will be a pre-generated pool of keys and a rescan at load to scrape missed transactions from the block history.  Then a backup will last forward for a long time.**I was starting to post the same idea you said nelisky.**How about a json-rpc command that locks the wallet, flushes it, copies wallet.dat to a location you specified, then unlocks it?  That would be a smaller project than the pooled keys, so maybe it could be done first.**What's the simplest portable way to copy a file?  Is there something in Boost?**What should it be named?  maybe:*backupwallet <destination></td></tr><tr><td>124</td><td> Bitcoin / Technical Support / Re: Need a post writing up some things users should know</td><td>on: August 26, 2010, 12:44:05 AM</td></tr><tr><td colspan=3>Any backup process/procedure would just be a stopgap until there's time to properly work on coding solutions in software.  We can try to use words to help the situation until code gets there.**The main backup improvement will be pre-made pool of keys, and a rescan at load to scrape missed transactions from the block history.  Then a backup will last forward for a long time.</td></tr><tr><td>125</td><td> Bitcoin / Development & Technical Discussion / Re: RFC: remove DB_PRIVATE flag</td><td>on: August 26, 2010, 12:33:28 AM</td></tr><tr><td colspan=3>Can you provide more details about what removing DB_PRIVATE does?**I can't remember if I had a specific reason for DB_PRIVATE, or if I just copied the flags from some example code.  Does removing DB_PRIVATE make it safe for other processes to open the database simultaneously?  That may be an improvement, depending what the side effects are.  Does it substantially reduce performance by making it have to write out every change immediately or do other coordination?  Are there additional locking or coordination files then?  What else changes?  You could test by timing an initial block download with and without DB_PRIVATE, preferably -connect-ing to a local machine so network isn't a factor.**Apparently, DB_PRIVATE doesn't do what you would hope it would do, which is prevent other processes from being able to open the database.  It still lets them, it just screws up if they do.  Another option, if there's a way, would be to make it lock the database files so they can't be accessed by other processes.</td></tr><tr><td>126</td><td> Bitcoin / Development & Technical Discussion / Re: Development of alert system</td><td>on: August 26, 2010, 12:08:12 AM</td></tr><tr><td colspan=3>Quote from: BioMike on August 25, 2010, 06:23:45 PM

Quote from: satoshi on August 25, 2010, 04:56:15 PM

Quote from: BioMike on August 23, 2010, 05:15:43 AM

So, theoretical this is a first control system where <some goverment> can arrest satoshi and demand *that he hands over his key (or get it from his computer) and shut down the complete network?**Or is that not possible? How far would <some goverment> get?

This is what makes me think the people objecting don't know what they're talking about.  It can't "shut down the complete network".

I've never objected this change/idea, just asking if this was possible and to what extent.*What's wrong with getting informed? *

My apologies, your post was indeed a question not a statement.</td></tr><tr><td>127</td><td> Bitcoin / Development & Technical Discussion / Re: Development of alert system</td><td>on: August 25, 2010, 05:59:30 PM</td></tr><tr><td colspan=3>Quote from: nelisky on August 25, 2010, 01:28:32 AM

So what kind of warning do admins get from bitcoind? Is there something we can grep from debug.log? Or will rpc calls raise some specific error? Is there a way to locally force this to happen, for unittesting services?

getinfo has a new field that shows any alert messages or other errors that would be displayed on the status bar.**The rpc methods return a json-rpc error with the error description "Safe mode: " followed by additional text specified by the alert.**I added the switch "-testsafemode" for you.  SVN rev 145.**This stuff is very new and may still be subject to change.

Quote from: mizerydearia on August 25, 2010, 12:11:50 AM

I just discovered http://www.bitcoin.org/wiki/doku.php?id=man_page and don't see any reference to -disablesafemode.  Perhaps it should be added!  Also others liek -4way should be added as well.

Many switches are intentionally undocumented, like if their functionality is still under construction or I haven't settled on their name yet, or just test code not intended for release.**-4way should eventually be replaced by an auto-detect.</td></tr><tr><td>128</td><td> Bitcoin / Development & Technical Discussion / Re: Development of alert system</td><td>on: August 25, 2010, 04:56:15 PM</td></tr><tr><td colspan=3>Quote from: jimbobway on August 25, 2010, 04:45:22 PM

Quote from: BioMike on August 23, 2010, 05:15:43 AM

@mizerydearia, I think the quote button is easier to find then the reply one. **So, theoretical this is a first control system where <some goverment> can arrest satoshi and demand *that he hands over his key (or get it from his computer) and shut down the complete network?**Or is that not possible? How far would <some goverment> get?

*A few rhetorical questions for satoshi:**Can you resist waterboarding?*Can you endure electric shock?*All forms of torture?*Lastly, are you Jack Bauer by any chance?   Seriously.

WRT the alert system, who cares?  The most the key can do is temporarily disable six json-rpc commands until the site owners either add the -disablesafemode switch or upgrade.  All nodes keep running and generating, the network stays up.  If I'm not available, any script kiddie can figure out how to add two characters and make a new version that disables the alert system.  It would be a temporary inconvenience only.

Quote from: BioMike on August 23, 2010, 05:15:43 AM

So, theoretical this is a first control system where <some goverment> can arrest satoshi and demand *that he hands over his key (or get it from his computer) and shut down the complete network?

This is what makes me think the people objecting don't know what they're talking about.  It can't "shut down the complete network".</td></tr><tr><td>129</td><td> Bitcoin / Development & Technical Discussion / Re: Development of alert system</td><td>on: August 25, 2010, 04:40:20 PM</td></tr><tr><td colspan=3>I changed the switch name to -disablesafemode.</td></tr><tr><td>130</td><td> Bitcoin / Development & Technical Discussion / Re: Development of alert system</td><td>on: August 25, 2010, 03:17:37 PM</td></tr><tr><td colspan=3>It can't do arbitrary actions remotely.  Maybe some of you are responding to other posters who suggested the alert system should do more?**If there is an alert, the following json-rpc methods return an error:*sendtoaddress*getbalance*getreceivedbyaddress*getreceivedbylabel*listreceivedbyaddress*listreceivedbylabel**The remaining 14 methods function as normal. **I believe the safer option should be enabled by default.  If you want your server to keep trading and ignore an alert saying the money its receiving might be like the money from the overflow bug, then you can use the switch and not blame anyone else if you lose your money.**Worst case if you leave alerts enabled, your site stops trading until you upgrade or add the -disablesafemode switch.**Getting surprised by some temporary down time when your node would otherwise be at risk is better than getting surprised by a thief draining all your inventory.**Someday when we haven't found any new bugs for a long time and it has been thoroughly security reviewed without finding anything, this can be scaled back.  I'm not arguing that this is the permanent way of things forever.  It's still beta software.</td></tr><tr><td>131</td><td> Bitcoin / Development & Technical Discussion / Re: Development of alert system</td><td>on: August 25, 2010, 12:06:36 AM</td></tr><tr><td colspan=3>This is in SVN rev 142 as version 0.3.11.</td></tr><tr><td>132</td><td> Bitcoin / Development & Technical Discussion / Re: Development of alert system</td><td>on: August 24, 2010, 11:51:12 PM</td></tr><tr><td colspan=3>If you're so paranoid that you're getting hysterical over this, then surely you're paranoid enough that if a warning message displays on the status bar, you'll check the website and forum.**I think if another bug like the overflow bug occurs, it's important that automated websites stop trading until their admins can check out what's going on and decide what to do.  If you decide it's a false alarm and want to take your chances, you can use the "-disablesafemode" switch.</td></tr><tr><td>133</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10</td><td>on: August 24, 2010, 10:43:56 PM</td></tr><tr><td colspan=3>Quote from: ArtForz on August 21, 2010, 04:56:31 PM

AMD K10: 2 128bit units

intel nehalem: 3 128bit units

This probably explains why hyperthreading increases performance with -4way.  If three SSE2 units is excessive, then hyperthreading would help keep them all busy.</td></tr><tr><td>134</td><td> Bitcoin / Development & Technical Discussion / Re: integrating digital payments into p2p protocols</td><td>on: August 22, 2010, 11:57:32 PM</td></tr><tr><td colspan=3>Hey Zooko!**I wanted to thank you for posting about Bitcoin on your blog a year or two ago, back when I announced it on the Cryptography mailing list.</td></tr><tr><td>135</td><td> Bitcoin / Development & Technical Discussion / Development of alert system</td><td>on: August 22, 2010, 11:55:06 PM</td></tr><tr><td colspan=3>I've been working on writing the alert system.  Alerts are broadcast through the network and apply to a range of version numbers.  Alert messages are signed with a private key that only I have.**Nodes can do two things in response to an alert:*- Put a warning message on the status bar.*- Make the money handling methods of the json-rpc interface return an error.**In cases like the overflow bug or a fork where users may not be able to trust received payments, the alert should keep old versions mostly safe until they upgrade.  Manual users should notice the status bar warning when looking for received payments, and the json-rpc safe mode stops automated websites from making any more trades until they're upgraded.**The json-rpc methods that return errors during an alert are:*sendtoaddress*getbalance*getreceivedbyaddress*getreceivedbylabel*listreceivedbyaddress*listreceivedbylabel</td></tr><tr><td>136</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10</td><td>on: August 22, 2010, 11:21:50 PM</td></tr><tr><td colspan=3>Thanks for clearing that up.  I read the link someone posted about AMD making that change around 2007, but I didn't know what the story was for Intel.**There's no hope for Core/Core2 then.  They only have half the SSE2 hardware.**Strange that Intel has 3 128bit units, but AMD with 2 128bit units is the faster one.</td></tr><tr><td>137</td><td> Bitcoin / Technical Support / Re: 28 days without generation, i have 4200khash/s</td><td>on: August 22, 2010, 11:01:02 PM</td></tr><tr><td colspan=3>Search debug.log for "proof-of-work found".  If you find any, then check for any errors right after that.

Quote from: davidonpda on August 19, 2010, 07:43:01 PM

How big of a margin on the time is allowed for things to work right.

The margin is 2 hours.**This should be solved in SVN rev 141 and the next release (0.3.11+).  It'll pop up a message box alerting you if your clock is off by more than an hour.</td></tr><tr><td>138</td><td> Bitcoin / Technical Support / Re: Need a post writing up some things users should know</td><td>on: August 22, 2010, 10:51:00 PM</td></tr><tr><td colspan=3>The clock part will be covered in the next release (0.3.11 or higher).  SVN rev 141 pops up a message box if your clock is too far off.</td></tr><tr><td>139</td><td> Bitcoin / Technical Support / Re: Hypothetical question on lost coins / transfers</td><td>on: August 19, 2010, 08:28:50 PM</td></tr><tr><td colspan=3>That's right.  You don't need to be re-broadcasting your transactions for it to work.**When any node disconnects a fork, it dumps all the transactions from the fork back into the transaction pool to add to the new chain.  The entire network is making sure to re-integrate your transactions again.  All you should see is that your number of confirmations starts over from 0.**In some types of forks, your transaction would have gotten into both forks already, so you're already good either way.</td></tr><tr><td>140</td><td> Bitcoin / Technical Support / Need a post writing up some things users should know</td><td>on: August 19, 2010, 08:14:01 PM</td></tr><tr><td colspan=3>I'm not sure what to call it, but we could use a post that lists these things users should know.  If someone has time to write it, here's the list:**- Make sure your clock is set correctly. **- Microsoft Security Essentials.  This never got written up proper.**- Warning not to mess around with your wallet.dat file.  It's a database file, it's not as simple as you think.  In this Beta version, we haven't had time to try and tinker-proof it yet.  It may not work as expected if you start swapping it around.</td></tr><tr><td>141</td><td> Bitcoin / Technical Support / Re: 28 days without generation, i have 4200khash/s</td><td>on: August 19, 2010, 07:40:30 PM</td></tr><tr><td colspan=3>Make sure your computer's date and time are correct.</td></tr><tr><td>142</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10</td><td>on: August 19, 2010, 07:07:43 PM</td></tr><tr><td colspan=3>Quote from: Ground Loop on August 18, 2010, 11:14:26 PM

Any non-Mac i5 love?*Windows i5 64-bit got slower here.

That's the first I've heard anyone say i5 was slower.  Everyone else has said 4way was faster on i5.  Moreso with hyperthreading enabled.

Quote from: nelisky on August 18, 2010, 11:02:25 PM

And i5, at least on my macbookpro

Good, so I take it that's a confirmation that it's working on Mac as well?**Laszlo told me he did compile in the -4way stuff on Mac, so the -4way switch is also available to try on Mac.  I don't think makefile.osx on SVN has it yet, just the built version.</td></tr><tr><td>143</td><td> Bitcoin / Development & Technical Discussion / Re: HOWTO: Compiling Bitcoin on Ubuntu 10.04 (Karmic)</td><td>on: August 19, 2010, 06:55:48 PM</td></tr><tr><td colspan=3>That's a really well written walkthough.  Someone should confirm if they followed it and didn't run into any snags.</td></tr><tr><td>144</td><td> Bitcoin / Development & Technical Discussion / Re: Convert Bitcoin to GTK: Yes? No? wx is better?</td><td>on: August 19, 2010, 06:44:36 PM</td></tr><tr><td colspan=3>Quote from: BioMike on August 19, 2010, 08:05:18 AM

WxWidgets is not really a problem. My problem is the version that is used (2.9), which is considered unstable by many distro packagers (although the WxWidgets devs say it isn't). On the other side, as far as I know WxWidgets uses gtk under Linux for drawing the whole stuff and makes it for the bitcoins devs easy to make things cross platform.

wxWidgets 2.9 is their first UTF-8 version.  We are UTF-8 on all platforms including Windows.**The distro packages of 2.8 are UTF-16, so they just trip people up.  People had endless build problems with 2.8 and its wxString UTF-16/ANSI conditional build options until we standardized on 2.9.  Also, to use 2.8, we were using ANSI, which was just a temporary stopgap until wxWidgets supported UTF-8.**This is a problem that will solve itself.  With time, 2.9 will become a more mainline release.</td></tr><tr><td>145</td><td> Bitcoin / Development & Technical Discussion / Re: Checking the block chain on load</td><td>on: August 18, 2010, 06:28:28 PM</td></tr><tr><td colspan=3>In the next SVN rev, I'll make it only go back to the last checkpoint at block 74000.  If we need to correct a problem in the future, we can always make sure it goes back at least as far back as the problem.  Also, I'm adding code to verify the block index, which means the proof-of-work chain is checked.**Still, the system won't be entirely secure against your blk*.dat files.  You are trusting someone if you use a copy of their blk files.</td></tr><tr><td>146</td><td> Bitcoin / Development & Technical Discussion / Re: Difficulty: More nodes active, or faster nodes?</td><td>on: August 18, 2010, 06:01:40 PM</td></tr><tr><td colspan=3>The performance numbers posted from a VIA C7's hardware SHA-256 weren't astronomical.  Only in the 1500 khash/s range.  If you think about it, just because it's implemented in hardware doesn't mean it's crazy fast.  It still has to do all the steps.  It's only if simplifying it down to single-purpose hardware makes it small enough to fit many in parallel.  That's not necessarily easy or a given.</td></tr><tr><td>147</td><td> Bitcoin / Bitcoin Discussion / Re: New screenshots to the front page?</td><td>on: August 18, 2010, 04:58:44 PM</td></tr><tr><td colspan=3>Definitely.  The old screenshots of 0.1 are very outdated.**Windows Aero is a good choice.  Windows is still the largest user group.  Mind what's behind it for the transparent parts.**What to have displayed in the transaction list?  Not completely filled up with stuff, just a few things.</td></tr><tr><td>148</td><td> Bitcoin / Bitcoin Discussion / Re: checkpointing the block chain</td><td>on: August 16, 2010, 11:01:48 PM</td></tr><tr><td colspan=3>Quote from: NewLibertyStandard on August 16, 2010, 10:42:28 PM

How is the strength of the chain calculated?

Total proof-of-work.</td></tr><tr><td>149</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 16, 2010, 10:54:55 PM</td></tr><tr><td colspan=3>Un-upgraded nodes have the correct chain most of the time, but they are still trying to include the overflow transaction in every block, so they're continually trying to fork and generate invalid blocks.  If an old version node is restarted, its transaction pool is emptied, so it may generate valid blocks for a while until the transaction gets broadcast again.  0.3.9 and lower nodes still must upgrade.**The SVN now has the code we needed to automatically reorg the block chain without having to delete the blk*.dat files manually.  I knew I couldn't write that code fast and carefully enough yesterday, so I went with the quick manual option.</td></tr><tr><td>150</td><td> Bitcoin / Bitcoin Discussion / Re: checkpointing the block chain</td><td>on: August 16, 2010, 08:20:53 PM</td></tr><tr><td colspan=3>There is no way for the software to automatically know if one chain is better than another except by the greatest proof-of-work.  In the design it was necessary for it to switch to a longer chain no matter how far back it has to go.**The only exception to that is the manual checkpoints I've added.  If it weren't for those, it would be able to reorg all the way back to the first block.</td></tr><tr><td>151</td><td> Bitcoin / Development & Technical Discussion / Checking the block chain on load</td><td>on: August 16, 2010, 08:07:46 PM</td></tr><tr><td colspan=3>SVN rev 139 does a basic check of the block chain after loading.**With this we wouldn't have needed to delete blk*.dat, it would have automatically done a reorg back to the fork.  There wasn't time to do a careful implementation of this at the time.**It might take longer than we want, since it has to load all the blocks.  If it's too slow, we could have it only go back to a certain block number.</td></tr><tr><td>152</td><td> Bitcoin / Development & Technical Discussion / Re: [PATCH] Automatic block validation</td><td>on: August 16, 2010, 05:08:02 PM</td></tr><tr><td colspan=3>Quote from: satoshi on August 16, 2010, 03:25:54 PM

It would probably be possible to initiate an AddToBlockIndex or Reorganize after the check, but it would require a lot more careful attention.  I probably should break out part of AddToBlockIndex that sets the new best block.  I'll probably end up doing that instead of the code below.

This is what I ended up doing in SVN rev 139.**Instead of deleting the bad chain, I added an extra CheckBlock to ConnectBlock so bad blocks can't get back into the best chain once they're kicked out.</td></tr><tr><td>153</td><td> Bitcoin / Development & Technical Discussion / Re: blocks minus 1</td><td>on: August 16, 2010, 05:06:27 PM</td></tr><tr><td colspan=3>Done in SVN rev 137</td></tr><tr><td>154</td><td> Bitcoin / Development & Technical Discussion / blocks minus 1</td><td>on: August 16, 2010, 03:59:25 PM</td></tr><tr><td colspan=3>I'd like to reduce the number of blocks displayed in the status bar by 1.   When you first load the program, it'll display 0 blocks instead of 1:*"0 connections    0 blocks     0 transactions"**It's always been "nBestHeight + 1" because it's counting the genesis block.  Technically, yes, the genesis block is a block.  It's a hardcoded block that you start out with.  You can't not have the genesis block.  Maybe think of it as a reference coin that you measure other coins against.  The block count people are looking for is the number of blocks they've downloaded.**The main benefit is that blocks will be equal to the block number of the current best block.  If blocks is 10, then the highest block number you have is 10.  It means you have block 10 and you don't have block 11.**It would reduce the confusion we had here:

Quote from: kencausey on August 15, 2010, 11:45:26 PM

Quote from: davidonpda on August 15, 2010, 11:31:37 PM

... It already is on block 74638. I assume that means that block is now a good one?

*I had some confusion on this myself and got clarification in #bitcoin-dev:**The bad block was number 74638, the last good one was 74637.  The numbers start at 0, so when your client shows there are 74638 blocks then that means you have up to block number 74637, the last good one.</td></tr><tr><td>155</td><td> Bitcoin / Development & Technical Discussion / Re: [PATCH] Automatic block validation</td><td>on: August 16, 2010, 03:25:54 PM</td></tr><tr><td colspan=3>That's a difficult approach.**We need to cause a reorg, which will disconnect the invalid chain.**This is code that will rarely ever get tested, and is fairly intricate, so something simple and safe is best.**Here's what I was thinking of.  (I haven't tested this yet)  It checks all the blocks in the main chain.  If it finds a bad one, it sets all that chain's bnChainWork to 0 so it can't win best chain again, and it reduces best chain work to the fork level so any new block after the fork will cause a reorg.  (It can't change pindexBest without actually doing a reorg)**This isn't perfect yet.  It still needs to receive one valid block to trigger the reorg.  **It would probably be possible to initiate an AddToBlockIndex or Reorganize after the check, but it would require a lot more careful attention.  I probably should break out part of AddToBlockIndex that sets the new best block.  I'll probably end up doing that instead of the code below.

Code:

bool CTxDB::LoadBlockIndex()*{*    ...**    // Verify blocks in the main chain*    vector<CBlockIndex*> vChain;*    for (CBlockIndex* pindex = pindexBest; pindex && pindex->pprev; pindex = pindex->pprev)*    {*        vChain.push_back(pindex);*        CBlock block;*        if (!block.ReadFromDisk(pindex))*            return error("LoadBlockIndex() : block.ReadFromDisk failed");*        if (!block.CheckBlock())*        {*            bnBestChainWork = pindex->pprev->bnChainWork;*            foreach(CBlockIndex* pindex2, vChain)*                pindex2->bnChainWork = 0;*        }*    }**    return true;*}</td></tr><tr><td>156</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10</td><td>on: August 16, 2010, 01:38:01 PM</td></tr><tr><td colspan=3>I wrapped sha256.cpp in *#ifdef FOURWAYSSE2*#endif // FOURWAYSSE2**try it now.</td></tr><tr><td>157</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 16, 2010, 12:59:38 PM</td></tr><tr><td colspan=3>It looks like we overtook the bad chain somewhere around 74689.  0.3.9 and lower nodes have been responding with the current block number for some hours now.**That means it's no longer necessary to delete blk*.dat before upgrading.  You can just upgrade and it'll reorg away the bad block chain.**Thanks to everyone for the quick response!</td></tr><tr><td>158</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10</td><td>on: August 16, 2010, 04:36:59 AM</td></tr><tr><td colspan=3>Quote from: jgarzik on August 16, 2010, 03:35:28 AM

Code:

cpu family*: 6*model**: 26*model name*: Genuine Intel(R) CPU             000  @ 3.20GHz*stepping*: 4

cpu family 6 model 26 stepping 4 is an Intel Core i7.*That's a 23% speedup with -4way, 63% total speedup with -4way + hyperthreading.*33% faster with hyperthreading than without it.</td></tr><tr><td>159</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2</td><td>on: August 16, 2010, 03:23:04 AM</td></tr><tr><td colspan=3>Quote from: Vasiliev on August 16, 2010, 03:17:07 AM

try -march=amdfam10

That works.**That's strange...  are we sure that's the same thing?  tcatm, try amdfam10 and make sure you get the same speed measurement.</td></tr><tr><td>160</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2</td><td>on: August 16, 2010, 02:57:57 AM</td></tr><tr><td colspan=3>Quote from: tcatm on August 16, 2010, 12:43:39 AM

I propose to compile sha256.cpp with -O3 -march=amdfamk10 (will work on 32bit and 64bit) as only CPUs supporting this instruction set (AMD Phenom, Intel i5 and newer) benefit from -4way and it'll improve performance by ~9%.

GCC 4.3.3 doesn't support -march=amdfamk10.  I get:*sha256.cpp:1: error: bad value (amdfamk10) for -march= switch*

Quote from: NewLibertyStandard on August 16, 2010, 01:49:01 AM

With 4way, I get significantly better performance when I have all my virtual cores enabled. I think I get about the same amount of hashes when hyper threading is turned off with or without 4way.

Hey, you may be onto something!**hyperthreading didn't help before because all the work was in the arithmetic and logic units, which the hyperthreads share.**tcatm's SSE2 code must be a mix of normal x86 instructions and SSE2 instructions, so while one is doing x86 code, the other can do SSE2.**How much of an improvement do you get with hyperthreading?**Some numbers?  What CPU is that?</td></tr><tr><td>161</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 16, 2010, 02:38:21 AM</td></tr><tr><td colspan=3>On Windows, findstr /c:"version message" debug.log**It looks like the bad chain was on block 74678 recently.  Can't wait to overtake it.**On the stats at http://nullvoid.org/bitcoin/statistix.php  there's been 5 blocks per hour in the last 3 hours.  We had a difficulty adjustment about a day ago that should have put it back to 6 blocks per hour.</td></tr><tr><td>162</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 16, 2010, 02:16:10 AM</td></tr><tr><td colspan=3>The bad chain is also slowed down as more nodes upgrade.**We've already generated 14 blocks since 74638.  The builds of 0.3.10 were uploaded about 2 and 3 hours ago.  Of the nodes I'm connected to, more than half are already 0.3.10.  I would say we probably already have more power than the bad chain.</td></tr><tr><td>163</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 16, 2010, 01:12:05 AM</td></tr><tr><td colspan=3>Quote from: trebronics on August 16, 2010, 01:02:35 AM

Most people running clients are not reading this message thread.  So...  Silly questions:**1) How will this continue to affect version 3.8.1 (pre-catastrophe) clients with bad block chain?*2) How will this affect clients that upgrade to 3.8.10 but don't remove their block chain files?

1) Once more than 50% of the node power is upgraded and the good chain overtakes the bad, the 0.3.10 nodes will make it hard for any bad transactions to get any confirmations. *2) If you didn't remove your blk*.dat files, you're not helping to contribute to that 50%, and you'll still show bad transactions until the good chain overtakes the bad chain.</td></tr><tr><td>164</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 16, 2010, 01:02:24 AM</td></tr><tr><td colspan=3>Quote from: kosovito on August 16, 2010, 12:39:17 AM

I did all steps, now my client is 0.3.10 and it stopped at block 74638. Is all fine?

If you still show 74638 blocks then you aren't connected to any 0.3.10 nodes.  **For today, try adding these parameters:  *-addnode=75.158.131.108 -addnode=99.27.237.13 -addnode=68.68.99.14**See*http://bitcointalk.org/index.php?topic=828</td></tr><tr><td>165</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 16, 2010, 01:00:45 AM</td></tr><tr><td colspan=3>Quote from: Ground Loop on August 16, 2010, 12:29:55 AM

Question about fallout:  I had a transaction that I submitted after the bad block, using the bad block chain.**What is the status of that transaction?*From what I can tell, my (updated) sending client wallet shows the deducted amount.**Will it get reincorporated into the fixed chain, and will the recipient be able to spend it?

Right, it will get reincorporated into the fixed chain.  The transaction won't disappear, it'll still be visible on both sides, but the confirmation count will jump back to 0 and start counting up again.**It's only if you generated a block in the bad chain after block 74638 that the 50 BTC from that will disappear.  Any blocks in the bad chain wouldn't have matured yet.</td></tr><tr><td>166</td><td> Bitcoin / Development & Technical Discussion / Re: 0.3.10.1 Question on where block should be</td><td>on: August 16, 2010, 12:37:20 AM</td></tr><tr><td colspan=3>For now, can some people running 0.3.10 with static IP who can receive incoming connections post their IP?  Then we can -addnode= them and make sure to connect to at least one 0.3.10 node.</td></tr><tr><td>167</td><td> Bitcoin / Development & Technical Discussion / Re: 0.3.10.1 Question on where block should be</td><td>on: August 16, 2010, 12:28:28 AM</td></tr><tr><td colspan=3>I suspect there's some difficulty receiving blocks if all the nodes you're connected to are 0.3.9 or lower.  We need enough of us so that at least one node you connect to will be 0.3.10.  The problem will start to go away when we make up more than 1/8th of the network.**It'll help if you port forward so you can get lots of connections.</td></tr><tr><td>168</td><td> Bitcoin / Bitcoin Discussion / Version 0.3.10 - block 74638 overflow PATCH!</td><td>on: August 15, 2010, 11:48:22 PM</td></tr><tr><td colspan=3>Version 0.3.10 patches the block 74638 overflow bug.   http://bitcointalk.org/index.php?topic=823**The Linux version includes tcatm's 4-way SSE2 SHA-256 that makes generating faster on i5, i7 (with hyperthreading) and AMD CPU's.  Try the "-4way" switch to enable it and check if it's faster for you.  **Download from sourceforge:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.10/**SHA1 16645ec5fcdb35bc54bc7195309a1a81105242bb bitcoin-0.3.10-win32-setup.exe*SHA1 4f35ad7711a38fe8c880c6c9beab430824c426d3 bitcoin-0.3.10-win32.zip*SHA1 e3fda1ddb31b0d5c35156cacd80dee6ea6ae6423 bitcoin-0.3.10-linux.tar.gz*SHA1 b812ccff4881778b9090f7c0b0255bcba7b078ac bitcoin-0.3.10-macosx.zip**It is no longer necessary to delete blk*.dat.  The good block chain has overtaken the bad block chain, so you can just upgrade and it'll automatically reorg away the bad block chain.</td></tr><tr><td>169</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 11:37:07 PM</td></tr><tr><td colspan=3>Quote from: Joozero on August 15, 2010, 11:32:43 PM

I think that you should add something about this: http://bitcointalk.org/index.php?topic=259.0*There must be a label on the client that show a warning message if needed **Now everyone have always to check the website, and I think that this is bad.

Agree, wanted to do that for a long time, haven't had time to do it.**For now, you could also subscribe to the bitcoin-list mailing list.  It rarely gets used except for announcements like this and major new versions.**Subscribe/unsubscribe page:*http://lists.sourceforge.net/mailman/listinfo/bitcoin-list</td></tr><tr><td>170</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 11:36:10 PM</td></tr><tr><td colspan=3>Starting at 67000 is perfect.  **Yeah, at the moment you'll stop at 74638.  It should start slowly creeping up as more nodes upgrade and generate.**Linux build links below.**The Linux version includes tcatm's 4-way SSE2 SHA-256 that makes generating faster on i5 and AMD CPU's.  Use the "-4way" switch to enable it and check if it's faster for you.**Download links:*http://www.bitcoin.org/download/bitcoin-0.3.10-win32-setup.exe*http://www.bitcoin.org/download/bitcoin-0.3.10-win32.zip*http://www.bitcoin.org/download/bitcoin-0.3.10-linux.tar.gz**SHA1 16645ec5fcdb35bc54bc7195309a1a81105242bb bitcoin-0.3.10-win32-setup.exe*SHA1 4f35ad7711a38fe8c880c6c9beab430824c426d3 bitcoin-0.3.10-win32.zip*SHA1 e3fda1ddb31b0d5c35156cacd80dee6ea6ae6423 bitcoin-0.3.10-linux.tar.gz</td></tr><tr><td>171</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 11:17:24 PM</td></tr><tr><td colspan=3>Quote from: knightmb on August 15, 2010, 10:59:04 PM

[edit] Just saw your post, I'll build one to less than 74,000 then, should at least save you technical people a few minutes of downloading the new chain.  *

Just leave the old one alone!  Older is better.  What block number is it?  Anywhere from 60000-74000 is good.  The one that you've had available for a while has been vetted and is the best choice.</td></tr><tr><td>172</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 10:58:08 PM</td></tr><tr><td colspan=3>Don't update the block chain download.  When you take someone's block chain download, you don't want it right up to the end.  A somewhat old one is better so it can download and verify the most recent blocks.**tcatm's 4-way SSE2 SHA-256 is in the file sha256.cpp and already uploaded a few revs ago.**I just now uploaded rev 134 which is the makefile.unix that enables building with it on Linux.  If you build rev 134 on Linux now you'll get the -4way switch.**If you have problems building because of it, then edit makefile.unix and:*- remove -DFOURWAYSSE2*- remove obj/sha256.o from the end of these lines:*bitcoin: $(OBJS) obj/ui.o obj/uibase.o obj/sha256.o*bitcoind: $(OBJS:obj/%=obj/nogui/%) obj/sha256.o**The 0.3.10 linux build will have the -4way option when I build it.**Here are the patch downloads for Windows:**http://www.bitcoin.org/download/bitcoin-0.3.10-win32-setup.exe*http://www.bitcoin.org/download/bitcoin-0.3.10-win32.zip**SHA1 16645ec5fcdb35bc54bc7195309a1a81105242bb bitcoin-0.3.10-win32-setup.exe*SHA1 4f35ad7711a38fe8c880c6c9beab430824c426d3 bitcoin-0.3.10-win32.zip**Steps:*1) Shut down.*2) Download knightmb's blk files and replace your blk0001.dat and blkindex.dat files.*http://knightmb.dyndns.org/files/bitcoin/blocks/*http://rapidshare.com/files/413168038/BitcoinBlocks.torrent*3) Upgrade to 0.3.10.*4) It should start out with less than 74000 blocks and redownload the rest.**Or if you don't want to mess with downloading blk files, you can just do this:**1) Shut down.*2) Delete (or move) blk*.dat*3) Upgrade to 0.3.10.*4) It redownloads all blocks, probably take about an hour.*</td></tr><tr><td>173</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 09:40:19 PM</td></tr><tr><td colspan=3>Patch is uploaded to SVN rev 132! **For now, recommended steps:*1) Shut down.*2) Download knightmb's blk files.  (replace your blk0001.dat and blkindex.dat files)*3) Upgrade.*4) It should start out with less than 74000 blocks. Let it redownload the rest.**If you don't want to use knightmb's files, you could just delete your blk*.dat files, but it's going to be a lot of load on the network if everyone is downloading the whole block index at once.**I'll build releases shortly.</td></tr><tr><td>174</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 09:23:55 PM</td></tr><tr><td colspan=3>Once you have an update, you could download knightmb's block chain.  You'll want one that's old enough that it ends before block 74000 so the most recent security lockin will check it.  Can someone find the link for that? </td></tr><tr><td>175</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 09:06:45 PM</td></tr><tr><td colspan=3>It would help if people stop generating.  We will probably need to re-do a branch around the current one, and the less you generate the faster that will be.**A first patch will be in SVN rev 132.  It's not uploaded yet.  I'm pushing some other misc changes out of the way first, then I'll upload the patch for this.</td></tr><tr><td>176</td><td> Bitcoin / Development & Technical Discussion / Re: overflow bug SERIOUS</td><td>on: August 15, 2010, 08:59:09 PM</td></tr><tr><td colspan=3>Here's the preliminary change.  Look right?  I have more changes to make, this isn't all of it.  Will SVN shortly.

Code:

    bool CheckTransaction() const*    {*        // Basic checks that don't depend on any context*        if (vin.empty() || vout.empty())*            return error("CTransaction::CheckTransaction() : vin or vout empty");**        // Check for negative and overflow values*        int64 nTotal = 0;*        foreach(const CTxOut& txout, vout)*        {*            if (txout.nValue < 0)*                return error("CTransaction::CheckTransaction() : txout.nValue negative");*            if (txout.nValue > 21000000 * COIN)*                return error("CTransaction::CheckTransaction() : txout.nValue too high");*            nTotal += txout.nValue;*            if (nTotal > 21000000 * COIN)*                return error("CTransaction::CheckTransaction() : txout total too high");*        }**        if (IsCoinBase())*        {*            if (vin[0].scriptSig.size() < 2 || vin[0].scriptSig.size() > 100)*                return error("CTransaction::CheckTransaction() : coinbase script size");*        }*        else*        {*            foreach(const CTxIn& txin, vin)*                if (txin.prevout.IsNull())*                    return error("CTransaction::CheckTransaction() : prevout is null");*        }**        return true;*    }

*Don't sticky the topic, nobody looks up there.  There'll be enough posts to bump.</td></tr><tr><td>177</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2</td><td>on: August 15, 2010, 06:43:27 PM</td></tr><tr><td colspan=3>I just uploaded a quick build so testers can check if I built it right.  (I don't have an i5 or AMD)  If it checks out, I'll put together the full package and do all the release stuff.</td></tr><tr><td>178</td><td> Bitcoin / Development & Technical Discussion / Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2</td><td>on: August 15, 2010, 06:23:26 PM</td></tr><tr><td colspan=3>I hope someone can test an i5 or AMD to check that I built it right.  I don't have either to test with.**I'm also curious if it performs much worse on 32-bit linux vs 64-bit.</td></tr><tr><td>179</td><td> Bitcoin / Development & Technical Discussion / Re: Version 0.3.9 rc1, please test</td><td>on: August 15, 2010, 06:11:41 PM</td></tr><tr><td colspan=3>Quote from: jgarzik on August 15, 2010, 05:46:27 PM

the extended-help might have been based on my idea, but the code was somewhat different.

The idea was the main part.  When you posted your patch, I realized it should have been done that way instead of "-?".  I always had reservations about "-?" because it intrudes on the possible parameter values, and the help response is based on the version of the caller instead of the server.</td></tr><tr><td>180</td><td> Bitcoin / Bitcoin Discussion / Re: Potential disaster scenario</td><td>on: August 15, 2010, 04:37:16 PM</td></tr><tr><td colspan=3>Some places where generation will gravitate to:*1) places where it's cheapest or free*2) people who want to help for idealogical reasons*3) people who want to get some coins without the inconvenience of doing a transaction to buy them**There are legitimate places where it's free.  Generation is basically free anywhere that has electric heat, since your computer's heat is offsetting your baseboard electric heating.  Many small flats have electric heat out of convenience.**How expensive is heating oil?  With the price of oil so high, if it's actually more expensive than electric, then generating would have negative cost.**There's also kids putting it on their parent's power bill, employees their employer, botnets, etc.**Case 3 comes into play for small amounts.  The overhead of doing an exchange doesn't make sense if you just need a small bit of pocket change for incidental micropayments.  I think this is a nice advantage vs fiat currency, instead of all the seigniorage going to one big entity, let it go in convenience amounts to people who need to scrape up a small amount of change.</td></tr><tr><td>181</td><td> Bitcoin / Development & Technical Discussion / tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10</td><td>on: August 15, 2010, 03:52:09 PM</td></tr><tr><td colspan=3>0.3.10 has tcatm's 4-way SSE2 as an option switch.**Use the switch "-4way" to turn it on.  Without the switch you get Crypto++ ASM SHA-256.**I could only get this working with Linux.**Download:*Get 0.3.10 from http://bitcointalk.org/index.php?topic=827.0**Please report back your CPU and results!  I think it's pretty clear that Core 2 and lower are slower, i5 faster.  I don't think we've heard any i7 results yet.  We need to know about the different models of AMD or other less common CPUs.</td></tr><tr><td>182</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 15, 2010, 03:40:29 AM</td></tr><tr><td colspan=3>On both MinGW GCC 4.4.1 and 4.5.0 I have it working with test.cpp but SIGSEGV when called by BitcoinMiner.  So now it doesn't look like it's the version of GCC, it's something else, maybe just the luck of how the stack is aligned.**I have it working fine on GCC 4.3.3 on Ubuntu 32-bit.**I found the problem with Crypto++ on MinGW 4.5.0.  Here's the patch for that:

Code:

--- \old\sha.cpp*Mon Jul 26 13:31:11 2010*+++ \new\sha.cpp*Sat Aug 14 20:21:08 2010*@@ -336,7 +336,7 @@* *ROUND(14, 0, eax, ecx, edi, edx)* *ROUND(15, 0, ecx, eax, edx, edi)* *-*ASL(1)*+    ASL(label1)   // Bitcoin: fix for MinGW GCC 4.5* *AS2(add WORD_REG(si), 4*16)* *ROUND(0, 1, eax, ecx, edi, edx)* *ROUND(1, 1, ecx, eax, edx, edi)*@@ -355,7 +355,7 @@* *ROUND(14, 1, eax, ecx, edi, edx)* *ROUND(15, 1, ecx, eax, edx, edi)* *AS2(*cmp**WORD_REG(si), K_END)*-*ASJ(*jne,*1, b)*+    ASJ(    jne,    label1,  )   // Bitcoin: fix for MinGW GCC 4.5* * *AS2(*mov**WORD_REG(dx), DATA_SAVE)* *AS2(*add**WORD_REG(dx), 64)</td></tr><tr><td>183</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 14, 2010, 10:06:13 PM</td></tr><tr><td colspan=3>MinGW GCC 4.5.0:*Crypto++ doesn't work, X86_SHA256_HashBlocks() never returns*I only got 4-way working with test.cpp but not when called by BitcoinMiner**MinGW GCC 4.4.1:*Crypto++ works*4-way SIGSEGV**GCC is definitely not aligning __m128i. **Even if we align our own __m128i variables, the compiler may decide to use a __m128i behind the scenes as a temporary variable.**By making our __m128i variables aligned and changing these inlines to defines, I was able to get it to work on 4.4.1 with -O0 only:*#define Ch(b, c, d)  ((b & c) ^ (~b & d))*#define Maj(b, c, d)  ((b & c) ^ (b & d) ^ (c & d))*#define ROTR(x, n) (_mm_srli_epi32(x, n) | _mm_slli_epi32(x, 32 - n))*#define SHR(x, n)  _mm_srli_epi32(x, n)**But that's with -O0.</td></tr><tr><td>184</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 14, 2010, 05:55:37 PM</td></tr><tr><td colspan=3>Got the test working on 32-bit with MinGW GCC 4.5.  Exactly 50% slower than stock with Core 2.</td></tr><tr><td>185</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 14, 2010, 04:22:29 AM</td></tr><tr><td colspan=3>If you haven't already, try aligning thash.  It might matter.  Couldn't hurt.

Quote from: tcatm on August 14, 2010, 12:53:07 AM

Looks like we're triggering a compiler bug in the tree optimizer. Can you try to compile it -O0?

No help from -O0, same error.**MinGW is GCC 3.4.5.  Probably the problem.**I'll see if I can get a newer version of MinGW.</td></tr><tr><td>186</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 14, 2010, 12:49:18 AM</td></tr><tr><td colspan=3>MinGW on Windows has trouble compiling it:**g++ -c -mthreads -O2 -w -Wno-invalid-offsetof -Wformat -g -D__WXDEBUG__ -DWIN32 -D__WXMSW__ -D_WINDOWS -DNOPCH -I"/boost" -I"/db/build_unix" -I"/openssl/include" -I"/wxwidgets/lib/gcc_lib/mswud" -I"/wxwidgets/include" -msse2 -O3 -o obj/sha256.o sha256.cpp**sha256.cpp: In function `long long int __vector__ Ch(long long int __vector__, long long int __vector__, long long int __vector__)':*sha256.cpp:31: internal compiler error: in perform_integral_promotions, at cp/typeck.c:1454*Please submit a full bug report,*with preprocessed source if appropriate.*See <URL:http://www.mingw.org/bugs.shtml> for instructions.*make: *** [obj/sha256.o] Error 1</td></tr><tr><td>187</td><td> Bitcoin / Development & Technical Discussion / Re: Proposed change to sendtoaddress API call</td><td>on: August 13, 2010, 11:39:14 PM</td></tr><tr><td colspan=3>It's too soon to start junking up the API for backward compatibility at all costs.**Just return "<txid>".</td></tr><tr><td>188</td><td> Bitcoin / Bitcoin Discussion / Re: Not a suggestion</td><td>on: August 13, 2010, 07:28:47 PM</td></tr><tr><td colspan=3>I'm not grasping your idea yet.  Does it hide any information from the public network?  What is the advantage?**If at least 50% of nodes validated transactions enough that old transactions can be discarded, then everyone saw everything and could keep a record of it.**Can public nodes see the values of transactions?  Can they see which previous transaction the value came from?  If they can, then they know everything.  If they can't, then they couldn't verify that the value came from a valid source, so you couldn't take their generated chain as verification of it.**Does it hide the bitcoin addresses?  Is that it?  OK, maybe now I see, if that's it.**Crypto may offer a way to do "key blinding".  I did some research and it was obscure, but there may be something there.  "group signatures" may be related.**There's something here in the general area:*http://www.users.zetnet.co.uk/hopwood/crypto/rh/**What we need is a way to generate additional blinded variations of a public key.  The blinded variations would have the same properties as the root public key, such that the private key could generate a signature for any one of them.  Others could not tell if a blinded key is related to the root key, or other blinded keys from the same root key.  These are the properties of blinding.  Blinding, in a nutshell, is x = (x * large_random_int) mod m.**When paying to a bitcoin address, you would generate a new blinded key for each use.**Then you need to be able to sign a signature such that you can't tell that two signatures came from the same private key.  I'm not sure if always signing a different blinded public key would already give you this property.  If not, I think that's where group signatures comes in.  With group signatures, it is possible for something to be signed but not know who signed it.**As an example, say some unpopular military attack has to be ordered, but nobody wants to go down in history as the one who ordered it.  If 10 leaders have private keys, one of them could sign the order and you wouldn't know who did it.</td></tr><tr><td>189</td><td> Bitcoin / Development & Technical Discussion / Version 0.3.9 rc1, please test</td><td>on: August 13, 2010, 05:40:00 PM</td></tr><tr><td colspan=3>Here's a test build if you'd like to help test before 0.3.9 is released.*(or if you'd rather get upgrading out of the way now instead of waiting)**Downloads:  (binaries only)*http://www.bitcoin.org/download/bitcoin-0.3.9.rc1-win32.zip*(http://www.bitcoin.org/download/bitcoin-0.3.9.rc1-linux.tar.gz)**SHA1 a36ea00cce27b4b083755df73a3d1e5e5729884e bitcoin-0.3.9.rc1-win32.zip*SHA1 bbb333b0ea57302740ad1bb9948520d00f884f9d bitcoin-0.3.9.rc1-linux.tar.gz**Edit:*Linux please test rc2 instead.  This adds a -4way switch for tcatm's 4-way SSE2.  This will only be for Linux:*http://www.bitcoin.org/download/bitcoin-0.3.9.rc2-linux.tar.gz**SHA1 47d9998f7d15fe81234a5c89a542da9d0664df40 bitcoin-0.3.9.rc2-linux.tar.gz**Please report back your results*http://bitcointalk.org/index.php?topic=820</td></tr><tr><td>190</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin Watchdog Service</td><td>on: August 13, 2010, 05:09:27 PM</td></tr><tr><td colspan=3>Quote

But there will be no irc server to bootstrap from.

Which doesn't matter because you can't access sourceforge to download the software either.**If you've ever been connected before, you don't need IRC to bootstrap anymore.  Even if you haven't, you can bootstrap from seed nodes.  IRC is completely redundant since 0.3.0.</td></tr><tr><td>191</td><td> Bitcoin / Development & Technical Discussion / Re: Bugfixes in SVN rev 130</td><td>on: August 13, 2010, 03:15:23 AM</td></tr><tr><td colspan=3>No, that's not what it is.**-paytxfee allows you to include a transaction fee with your transactions.  If transaction confirmations become slow, you can get priority by using "-paytxfee=0.01".  Any transactions you send would cost an extra 0.01.  There's no reason to use more than 0.01.**It's just there in case we need it.  It probably won't be needed, and it can be explained more if we do.</td></tr><tr><td>192</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 12, 2010, 10:07:23 PM</td></tr><tr><td colspan=3>That big of a difference in speed, by a factor of 4 or 6, feels like it's likely to be some quirky weak spot or instruction that the old chip is slow with.  Unless it's a touted feature of the i5 that they made SSE2 six times faster.**A quick summary:*Xeon Quad        41% slower*Core 2 Duo        55% slower*Core 2 Duo        same (vess)*Core 2 Quad      50% slower*Core i5            200% faster (nelisky)*Core i5            100% faster (vess)*AMD Opteron    105% faster**aceat64:*My system went from ~7100 to ~4200.*This particular system has dual Intel Xeon Quad-Core CPUs (E5335) @ 2.00GHz.**impossible7:*on an Intel Core 2 Duo T7300 running x86_64 linux it was 55% slower compared to the stock version (r121)**nelisky:*My Core2Quad (Q6600) slowed down 50%, *my i5 improved ~200%, **impossible7:*on an AMD Opteron 2374 HE running x86_64 linux I got a 105% improvement (!)</td></tr><tr><td>193</td><td> Bitcoin / Technical Support / Re: Having problems specifing -datadir</td><td>on: August 12, 2010, 09:43:29 PM</td></tr><tr><td colspan=3>Fixed in SVN rev 130.</td></tr><tr><td>194</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin Watchdog Service</td><td>on: August 12, 2010, 09:34:44 PM</td></tr><tr><td colspan=3>True, there would probably be someone with a dial-up modem or satellite dish internet.  Rarer would be someone who has both that and the wired internet that has the outage, but if it's a big enough segment to matter, out of a million people there's bound to be a multi-home geek.**ISP network cuts are just your local area.  If you still have communication with the rest of your area, it would probably be something like 1/1000 of the world or less.  Block generation in the segment would take several hours per block.**I favour the plan to monitor if the frequency of blocks received drops too slow.  That covers a large range of possibilities.</td></tr><tr><td>195</td><td> Bitcoin / Development & Technical Discussion / Bugfixes in SVN rev 130</td><td>on: August 12, 2010, 09:20:31 PM</td></tr><tr><td colspan=3>Misc bugfixes in rev 130:**fix -datadir with relative path*autostart is now off by default except on windows*fix occasional "vector iterator not dereferencable" assertion when compiled with msvc*fix readlink compile warning on linux build*use sys/param.h and BSD define instead of __BSD__*-paytxfee switch, e.g. -paytxfee=0.01</td></tr><tr><td>196</td><td> Bitcoin / Development & Technical Discussion / Re: BSD detection</td><td>on: August 12, 2010, 09:14:20 PM</td></tr><tr><td colspan=3>This is in SVN rev 130.  Check that it compiles right.

Code:

#if (defined(__unix__) || defined(unix)) && !defined(USG)*#include <sys/param.h>  // to get BSD define*#endif*#ifdef __WXMAC_OSX__*#ifndef BSD*#define BSD 1*#endif*#endif</td></tr><tr><td>197</td><td> Bitcoin / Bitcoin Discussion / Re: Not a suggestion</td><td>on: August 12, 2010, 02:46:56 AM</td></tr><tr><td colspan=3>Quote from: Red on August 12, 2010, 01:10:19 AM

Quote from: satoshi on August 11, 2010, 09:07:59 PM

I believe the clients would have to keep the entire history back to the original generated coins.  The fact that clients have to keep the entire history reduces the privacy benefit.  

*I thought this too at first. But then I convinced myself otherwise.

Are you back to talking about the existing Bitcoin system here?**I was talking about in the hypothetical system I was describing, if the network doesn't know the values and lineage of the transactions, then it can't verify them and vouch for them, so the clients would have to keep the history all the way back.**If a client wasn't present until recently, the two ways to convince it that a transaction has a valid past is:*1) Show it the entire history back to the original generated coin.*2) Show it a history back to a thoroughly deep block, then trust that if so many nodes all said the history up to then was correct then it must be true.**But if the network didn't know all the values and lineage of the transactions, it couldn't do 2), I don't think.</td></tr><tr><td>198</td><td> Bitcoin / Development & Technical Discussion / Re: BSD detection</td><td>on: August 12, 2010, 12:02:06 AM</td></tr><tr><td colspan=3>Quote from: dkaparis on August 11, 2010, 11:00:16 PM

There is this piece of code in headers.h:**#ifdef __WXMAC_OSX__*#define __WXMAC__ 1*#define __WXOSX__ 1*#define __BSD__ 1*#endif*#endif

That code was a bad idea anyway, I'm deleting it.  Any Mac code should only use __WXMAC_OSX__, not __WXMAC__ or __WXOSX__, and we should stop using __BSD__.

Quote

*#if (defined(__unix__) || defined(unix)) && !defined(USG)*#include <sys/param.h>*#endif

Will that definitely cause BSD to be defined on Mac?</td></tr><tr><td>199</td><td> Bitcoin / Bitcoin Discussion / Re: Flood attack 0.00000001 BC</td><td>on: August 11, 2010, 11:28:50 PM</td></tr><tr><td colspan=3>It would be nice to keep the blk*.dat files small as long as we can.**The eventual solution will be to not care how big it gets.**But for now, while it's still small, it's nice to keep it small so new users can get going faster.  When I eventually implement client-only mode, that won't matter much anymore.**There's more work to do on transaction fees.  In the event of a flood, you would still be able to jump the queue and get your transactions into the next block by paying a 0.01 transaction fee.  However, I haven't had time yet to add that option to the UI.**Scale or not, the test network will react in the same ways, but with much less wasted bandwidth and annoyance.</td></tr><tr><td>200</td><td> Bitcoin / Development & Technical Discussion / Re: Where is the separate discussion devoted to possible Bitcoin weaknesses.</td><td>on: August 11, 2010, 10:40:25 PM</td></tr><tr><td colspan=3>It doesn't have to be such a breaking change.  New nodes could accept old transactions for a long time until most nodes have already upgraded before starting to refuse transactions without PoW.  Or, they could always accept old transactions, but only a limited number per time period.**I've thought about PoW on transactions many times, but usually I end up thinking a 0.01 transaction fee is essentially similar and better.  0.01 is basically a proof of work, but not wasted.  But if the problem is validating loads of transactions, then PoW could be checked faster.**A more general umbrella partial solution would be to implement the idea where an unlikely dropoff in blocks received is detected.  Then an attacker would still need a substantial portion of the network's power to benefit from a DoS attack.

Quote from: gavinandresen on August 11, 2010, 04:10:56 PM

Bitcoin's p2p network is subject to various kinds of denial of service attacks.**There, I said it.

+1**Any demonstration tests at this point would only show what we already know, and divert dev time from strengthening the system to operational fire fighting.</td></tr><tr><td>201</td><td> Bitcoin / Technical Support / Re: Lost large number of bitcoins</td><td>on: August 11, 2010, 09:46:51 PM</td></tr><tr><td colspan=3>Quote from: sirius-m on August 11, 2010, 02:01:53 AM

I added to the FAQ the warning to back up after each transaction. Is it necessary btw to stop the client before making a backup? That's a bit inconvenient. Automatic backups would be useful indeed.

You can get away with backing up without stopping the client if you don't do anything or receive a payment within a few seconds before the backup.  (like 5 seconds)

Quote from: gridecon on August 11, 2010, 08:46:08 PM

Wait, I'm confused again. I thought the essence of the surprise was that Bitcoin is programmed to "empty your wallet" for EACH transaction.

No, it doesn't usually empty your wallet with each transaction.  It uses the smallest set of coins it can find to add up to near the amount.  In this case, unfortunately, his wallet had a single 9000 BTC bill in it, and it had to break it to get 1 BTC and 8999 BTC change.</td></tr><tr><td>202</td><td> Bitcoin / Bitcoin Discussion / Re: Not a suggestion</td><td>on: August 11, 2010, 09:07:59 PM</td></tr><tr><td colspan=3>Still thinking this idea through...**The only job the network needs to do is to tell whether a spend of an outpoint is the first or not.**If we're willing to have clients keep the history for their own money, then some of the information may not need to be stored by the network, such as:*- the value*- the association of inpoints and outpoints in one transaction**The network would track a bunch of independent outpoints.  It doesn't know what transactions or amounts they belong to.  A client can find out if an outpoint has been spent, and it can submit a satisfying inpoint to mark it spent.  The network keeps the outpoint and the first valid inpoint that proves it spent.  The inpoint signs a hash of its associated next outpoint and a salt, so it can privately be shown that the signature signs a particular next outpoint if you know the salt, but publicly the network doesn't know what the next outpoint is.**I believe the clients would have to keep the entire history back to the original generated coins.  Someone sending a payment would have to send data to the recipient, as well as still communicating with the network to mark outpoints spent and check that the spend is the first spend.  Maybe the data transfer could be done as an e-mail attachment.**The fact that clients have to keep the entire history reduces the privacy benefit.  Someone handling a lot of money still gets to see a lot of transaction history.  The way it retrospectively fans out, they might end up seeing a majority of the history.  Denominations could be made granular to limit fan-out, but a business handling a lot of money might still end up seeing a lot of the history.</td></tr><tr><td>203</td><td> Bitcoin / Development & Technical Discussion / Re: Compile error in SVN r127</td><td>on: August 11, 2010, 01:42:30 AM</td></tr><tr><td colspan=3>Updated SVN.  Thanks.**There's little hope of not repeatedly stumbling over that in the future.  It doesn't break the compile for me.</td></tr><tr><td>204</td><td> Bitcoin / Development & Technical Discussion / Re: Escrow</td><td>on: August 11, 2010, 01:30:02 AM</td></tr><tr><td colspan=3>Quote from: jgarzik on August 10, 2010, 06:53:57 PM

Ask some real-world business owners if they want to tell their customers about the chance of the money being lost forever, unrecoverable by either party.

That makes it sound like it might somehow get lost and the parties can't get it even if they want to cooperate.**When you pay for something up front, you can't get it back either.  Consumers seem comfortable with that.  It's no worse than that.**Either party always has the option to release it to the other.

Quote from: nelisky on August 10, 2010, 08:20:36 PM

But the money burning solution, while great at preventing economically viable fraud, does nothing to prevent revenge and actually makes everyone loose if one side is dishonest. I would certainly not endorse that.

Then you must also be against the common system of payment up front, where the customer loses.**Payment up front: customer loses, and the thief gets the money.*Simple escrow: customer loses, but the thief doesn't get the money either.**Are you guys saying payment up front is better, because at least the thief gets the money, so at least someone gets it?**Imagine someone stole something from you.  You can't get it back, but if you could, if it had a kill switch that could be remote triggered, would you do it?  Would it be a good thing for thieves to know that everything you own has a kill switch and if they steal it, it'll be useless to them, although you still lose it too?  If they give it back, you can re-activate it.**Imagine if gold turned to lead when stolen.  If the thief gives it back, it turns to gold again.**It still seems to me the problem may be one of presenting it the right way.  For one thing, not being so blunt about "money burning" for the purposes of game theory discussion.  The money is never truly burned.  You have the option to release it at any time forever.</td></tr><tr><td>205</td><td> Bitcoin / Bitcoin Discussion / Re: Not a suggestion</td><td>on: August 11, 2010, 12:14:22 AM</td></tr><tr><td colspan=3>This is a very interesting topic.  If a solution was found, a much better, easier, more convenient implementation of Bitcoin would be possible.**Originally, a coin can be just a chain of signatures.  With a timestamp service, the old ones could be dropped eventually before there's too much backtrace fan-out, or coins could be kept individually or in denominations.  It's the need to check for the absence of double-spends that requires global knowledge of all transactions.**The challenge is, how do you prove that no other spends exist?  It seems a node must know about all transactions to be able to verify that.  If it only knows the hash of the in/outpoints, it can't check the signatures to see if an outpoint has been spent before.  Do you have any ideas on this?**It's hard to think of how to apply zero-knowledge-proofs in this case.**We're trying to prove the absence of something, which seems to require knowing about all and checking that the something isn't included.</td></tr><tr><td>206</td><td> Bitcoin / Bitcoin Discussion / Re: Version 0.3.8.1 update for Linux 64-bit</td><td>on: August 10, 2010, 11:46:00 PM</td></tr><tr><td colspan=3>SVN rev 128: disable SSE2 on 32-bit.  This may only disable it for MSVC and GCC.  Other compilers might have different 64-bit defines.</td></tr><tr><td>207</td><td> Bitcoin / Bitcoin Discussion / Re: Bitcoin minting is thermodynamically perverse</td><td>on: August 09, 2010, 09:28:39 PM</td></tr><tr><td colspan=3>The heat from your computer is not wasted if you need to heat your home.  If you're using electric heat where you live, then your computer's heat isn't a waste.  It's equal cost if you generate the heat with your computer.**If you have other cheaper heating than electric, then the waste is only the difference in cost.**If it's summer and you're using A/C, then it's twice.**Bitcoin generation should end up where it's cheapest.  Maybe that will be in cold climates where there's electric heat, where it would be essentially free.</td></tr><tr><td>208</td><td> Bitcoin / Development & Technical Discussion / Connection limits</td><td>on: August 09, 2010, 08:58:45 PM</td></tr><tr><td colspan=3>SVN rev 125:*- Always make 8 outbound connections even if have 8 inbound*- Limit outbound connections to one per a.b.?.? range*- Switch -maxconnections=#**I added the (currently undocumented) switch -maxconnections=#.  You shouldn't use it unless you need to because your router can't maintain a lot of connections, then try -maxconnections=30.**I haven't really tested -maxconnections much, could someone test it?</td></tr><tr><td>209</td><td> Bitcoin / Bitcoin Discussion / Re: Version 0.3.8.1 update for Linux 64-bit</td><td>on: August 09, 2010, 08:55:06 PM</td></tr><tr><td colspan=3>That's a good point, I believe you could run with generation off if you don't have SSE2.**How about add to the top of cryptopp/config.h:**#if !defined(_M_X64) && !defined(__x86_64__)*#define CRYPTOPP_DISABLE_SSE2  1*#endif**that would disable SSE2 for 32-bit builds.  (at least with GCC or MSVC)</td></tr><tr><td>210</td><td> Bitcoin / Development & Technical Discussion / Re: bitcoin generation broken in 0.3.8? (64-bit)</td><td>on: August 09, 2010, 08:34:06 PM</td></tr><tr><td colspan=3>I uploaded 0.3.8.1 for Linux with re-built 64-bit.  I ran a difficulty 1 test with it and it has generated blocks.**http://bitcointalk.org/index.php?topic=765.0**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.8/bitcoin-0.3.8.1-linux.tar.gz/download</td></tr><tr><td>211</td><td> Bitcoin / Development & Technical Discussion / Re: What could be the transition plan to Y2038 compliant Bitcoin?</td><td>on: August 09, 2010, 08:13:26 PM</td></tr><tr><td colspan=3>unsigned int is good until 2106.  Surely the network will have to be totally revamped at least once by then.**There should not be any signed int.  If you've found a signed int somewhere, please tell me (within the next 25 years please) and I'll change it to unsigned int.</td></tr><tr><td>212</td><td> Bitcoin / Bitcoin Discussion / Version 0.3.8.1 update for Linux 64-bit</td><td>on: August 09, 2010, 07:46:58 PM</td></tr><tr><td colspan=3>When we switched to Crypto++ 5.6.0 SHA-256 in version 0.3.6, generation got broken on the Linux 64-bit build.  Version 0.3.8.1 is on SourceForge with the 64-bit binary updated.**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.8/bitcoin-0.3.8.1-linux.tar.gz/download**Future versions after 0.3.8 will probably require SSE2.  Anyone have Pentium 3 or older where this would be a problem?</td></tr><tr><td>213</td><td> Bitcoin / Development & Technical Discussion / Re: bitcoin generation broken in 0.3.8?</td><td>on: August 09, 2010, 06:50:41 PM</td></tr><tr><td colspan=3>I found that SSE2 only added a slight 2% speedup, which didn't seem worth the incompatibility.  I was trying to take the safer option.**It doesn't look to me like Crypto++ could be deciding whether to use SSE2 at runtime.  There's one place where it detects SSE2 for deciding some block count parameter, but the SSE2 stuff is all #ifdef at compile time and I can't see how that would switch at runtime.  Maybe I'm not looking in the right place.**Should we enable SSE2 in all the makefiles?  It seems like we must in case someone compiles with 64-bit.**I will recompile the 64-bit part of the Linux 0.3.8 release.</td></tr><tr><td>214</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 07, 2010, 09:16:01 PM</td></tr><tr><td colspan=3>Quote from: impossible7 on August 06, 2010, 11:37:20 AM

CRITICAL_BLOCK is a macro that contains a for loop. The assertion failure indicates that break has been called inside the body of the loop. The only break statement in this block is in line 2762. In the original source file, there is no break statement in this critical block. I think you must remove lines 2759-2762. The is nothing like that in the original main.cpp.

Sorry about that.  CRITICAL_BLOCK isn't perfect.  You have to be careful not to break or continue out of it.  There's an assert that catches and warns about break.  I can be criticized for using it, but the syntax would be so much more bloated and error prone without it.**Is there a chance the SSE2 code is slow on Intel because of some quirk that could be worked around?  For instance, if something works but is slow if it's not aligned, or thrashing the cache, or one type of instruction that's really slow?  I'm not sure how available it is, but I think Intel used to have a profiler for profiling on a per instruction level.  I guess if tcatm doesn't have a system with the slow processor to test with, there's not much hope.  But it would be really nice if this was working on most CPUs.</td></tr><tr><td>215</td><td> Bitcoin / Development & Technical Discussion / Escrow</td><td>on: August 07, 2010, 08:13:52 PM</td></tr><tr><td colspan=3>Here's an outline of the kind of escrow transaction that's possible in software.  This is not implemented and I probably won't have time to implement it soon, but just to let you know what's possible.**The basic escrow: The buyer commits a payment to escrow. The seller receives a transaction with the money in escrow, but he can't spend it until the buyer unlocks it. The buyer can release the payment at any time after that, which could be never. This does not allow the buyer to take the money back, but it does give him the option to burn the money out of spite by never releasing it. The seller has the option to release the money back to the buyer.**While this system does not guarantee the parties against loss, it takes the profit out of cheating.**If the seller doesn't send the goods, he doesn't get paid. The buyer would still be out the money, but at least the seller has no monetary motivation to stiff him.**The buyer can't benefit by failing to pay. He can't get the escrow money back. He can't fail to pay due to lack of funds. The seller can see that the funds are committed to his key and can't be sent to anyone else.**Now, an economist would say that a fraudulent seller could start negotiating, such as "release the money and I'll give you half of it back", but at that point, there would be so little trust and so much spite that negotiation is unlikely. Why on earth would the fraudster keep his word and send you half if he's already breaking his word to steal it? I think for modest amounts, almost everyone would refuse on principle alone.</td></tr><tr><td>216</td><td> Bitcoin / Bitcoin Discussion / Re: A proposal for a semi-automated Escrow mechanism</td><td>on: August 07, 2010, 08:04:59 PM</td></tr><tr><td colspan=3>Quote from: jgarzik on August 05, 2010, 07:00:30 PM

Due to that recourse, it is unlikely to be used as an escrow mechanism *

Really?  Do you think people won't be able to understand the benefit?  (If your response is an argument that there's no benefit at all, I guess that will reinforce the case that people won't be able to understand it.)</td></tr><tr><td>217</td><td> Bitcoin / Bitcoin Discussion / Re: Bitcoin minting is thermodynamically perverse</td><td>on: August 07, 2010, 05:46:09 PM</td></tr><tr><td colspan=3>It's the same situation as gold and gold mining.  The marginal cost of gold mining tends to stay near the price of gold.  Gold mining is a waste, but that waste is far less than the utility of having gold available as a medium of exchange.**I think the case will be the same for Bitcoin.  The utility of the exchanges made possible by Bitcoin will far exceed the cost of electricity used.  Therefore, not having Bitcoin would be the net waste.

Quote from: gridecon on August 06, 2010, 04:48:00 PM

As an overall point, I also do not agree with the idea that the very high computational burden of coin generation is in fact a necessity of the current system. As I understand it, currency creation is fundamentally metered by TIME - and if that is the fundamental controlling variable, what is the need for everyone to "roll as many dice as posible" within that given time period? The "chain of proof" for coin ownership and transactions doesn't depend on the method for spawning coins.

Each node's influence on the network is proportional to its CPU power.  The only way to show the network how much CPU power you have is to actually use it.**If there's something else each person has a finite amount of that we could count for one-person-one-vote, I can't think of it.  IP addresses... much easier to get lots of them than CPUs.**I suppose it might be possible to measure CPU power at certain times.  For instance, if the CPU power challenge was only run for an average of 1 minute every 10 minutes.  You could still prove your total power at given times without running it all the time.  I'm not sure how that could be implemented though.  There's no way for a node that wasn't present at the time to know that a past chain was actually generated in a duty cycle with 9 minute breaks, not back to back.**Proof-of-work has the nice property that it can be relayed through untrusted middlemen.  We don't have to worry about a chain of custody of communication.  It doesn't matter who tells you a longest chain, the proof-of-work speaks for itself.</td></tr><tr><td>218</td><td> Bitcoin / Bitcoin Discussion / Re: latency and locality</td><td>on: August 07, 2010, 04:28:17 PM</td></tr><tr><td colspan=3>Once you get away from a system where each node's influence is proportional to their CPU power, then what else do you use to determine who is (approximately) one person?</td></tr><tr><td>219</td><td> Bitcoin / Bitcoin Discussion / Re: A proposal for a semi-automated Escrow mechanism</td><td>on: August 05, 2010, 06:08:30 PM</td></tr><tr><td colspan=3>A transaction can be written that requires two signatures to spend it next.  You write a payment that requires the signature of both the recipient and the sender to spend it.  To release the escrow, you give the recipient the signature for your half, or the payee can return it by giving you his signed half.  There's no mediator in this simple case.  The recourse is to refuse to ever release it, essentially burning the money.</td></tr><tr><td>220</td><td> Bitcoin / Bitcoin Discussion / Re: Flood attack 0.00000001 BC</td><td>on: August 05, 2010, 05:49:43 PM</td></tr><tr><td colspan=3>Quote from: bytemaster on August 05, 2010, 04:46:52 PM

Right now the transaction fee address is left "blank" and the block generator fills it out.*Now you would fill it in with the address of the person you are asking to build the block.  

If you're only going to have one person work on building the block, that could take days.  Oh, do you mean send a different variation to each node with the tx fee written to them?**The way it is now, it's whoever builds this gets it.**If we needed to, we could have a BitTorrent-esque tit-for-tat for transaction broadcast.  Relay paying transactions to me, or I won't relay them to you.  It probably won't be an actual problem though.  It only takes one node relaying like it should to cancel out 7 others greedily not relaying.</td></tr><tr><td>221</td><td> Bitcoin / Development & Technical Discussion / Re: Transaction Overload Solution</td><td>on: August 05, 2010, 05:38:21 PM</td></tr><tr><td colspan=3>I can't think of a way to implement that.  All the transaction fees would be additional transactions.  What about the transaction fees for the transaction fee's transaction?</td></tr><tr><td>222</td><td> Bitcoin / Development & Technical Discussion / Re: bitcoind transaction to ip address</td><td>on: August 05, 2010, 05:28:40 PM</td></tr><tr><td colspan=3>It's not implemented.**It turned out nobody liked that mode of transfer anyway, so it hasn't had much development attention.</td></tr><tr><td>223</td><td> Bitcoin / Bitcoin Discussion / Re: Who's the Spanish jerk draining the Faucet?</td><td>on: August 05, 2010, 05:06:03 PM</td></tr><tr><td colspan=3>Silently failing would look bad.

Quote from: gavinandresen on August 04, 2010, 08:40:55 PM

1. Rate limit based on the first byte of the IP address (79. or 81. in this case).

Definitely needed.  What rate are you thinking of?  Ultimately, it's better to rate limit it than to let it all drain out.

Quote from: gavinandresen on August 04, 2010, 08:40:55 PM

3. Rate limit based on last two domains of reverse DNS lookup of the IP address (rima-tde.net in this case).

That might work surprisingly well.  If it works, it keeps them from hitting the rate limit, but the rate limit is there as the last line of defence.

Quote from: gavinandresen on August 04, 2010, 08:40:55 PM

4. Make the standard amount given away 0.5 Bitcoins (Bitcoins have gone up 10 times in value since I started the Faucet).

Definitely time to lower it.</td></tr><tr><td>224</td><td> Bitcoin / Bitcoin Discussion / Re: Flood attack 0.00000001 BC</td><td>on: August 05, 2010, 04:39:58 PM</td></tr><tr><td colspan=3>Quote from: bytemaster on August 05, 2010, 03:39:19 PM

The only solution to this problem is to make broadcasting of a transaction "non free".  Namely, if you want me to include it you have to pay me.  The net (no pun intended) result is that each client would need to pay other clients to whom they even send their transaction, not just the individual who gets it in a block.   In this way the laws of economics take over and no one gets a free ride on the transaction broadcast system.  

I don't know a way to implement that.  The transaction fee to the block creator uses a special trick to include the transaction fee without any additional size.  If there was a transaction for each transaction fee, then what about the transactions fees for the transaction fee's transaction?</td></tr><tr><td>225</td><td> Bitcoin / Bitcoin Discussion / Re: Flood attack 0.00000001 BC</td><td>on: August 05, 2010, 04:30:20 PM</td></tr><tr><td colspan=3>Quote from: bytemaster

Payments would generally be advanced, say 1 BTC at a time and when the connection closes any "change" would be returned.  This rule makes it impossible to pay for a simple "search query" with no further transactions.

One alternative is to use a round-up system.  You pay for, say, 1000 pages or images or downloads or searches or whatever at a time.  When you've used up your 1000 pages, you pay for another 1000 pages.  If you only use 1 page, then you have 999 left that you may never use, but it's not a big deal because the cost per 1000 is still small.**Or you could pay per day.  The first time you access the site on a given day, you pay for 24 hours of access.**Per 1000 or per day may be easier for consumers to get their heads around too.  They worry about per item because it's harder to figure if it might add up too fast.  Unlimited for 24 hours they know what the cost will be.  Or if 1000 seems like plenty, they're not worrying that it's costing more with each click if they figure 1000 is more than they'll probably use.</td></tr><tr><td>226</td><td> Bitcoin / Bitcoin Discussion / Re: Flood attack 0.00000001 BC</td><td>on: August 05, 2010, 04:03:21 PM</td></tr><tr><td colspan=3>Forgot to add the good part about micropayments.  While I don't think Bitcoin is practical for smaller micropayments right now, it will eventually be as storage and bandwidth costs continue to fall.  If Bitcoin catches on on a big scale, it may already be the case by that time.  Another way they can become more practical is if I implement client-only mode and the number of network nodes consolidates into a smaller number of professional server farms.  Whatever size micropayments you need will eventually be practical.  I think in 5 or 10 years, the bandwidth and storage will seem trivial.**I am not claiming that the network is impervious to DoS attack.  I think most P2P networks can be DoS attacked in numerous ways.  (On a side note, I read that the record companies would like to DoS all the file sharing networks, but they don't want to break the anti-hacking/anti-abuse laws.)**If we started getting DoS attacked with loads of wasted transactions back and forth, you would need to start paying a 0.01 minimum transaction fee.  0.1.5 actually had an option to set that, but I took it out to reduce confusion.  Free transactions are nice and we can keep it that way if people don't abuse them.**That brings up the question: if there was a minimum 0.01 fee for each transaction, should we automatically add the fee if it's just the minimum 0.01?  It would be awfully annoying to ask each time.  If you have 50.00 and send 10.00, the recipient would get 10.00 and you'd have 39.99 left.  I think it should just add it automatically.  It's trivial compared to the fees many other types of services add automatically.

Quote from: FreeMoney on August 04, 2010, 07:30:32 PM

Does including more slow down your hashing rate?  

No, not at all.</td></tr><tr><td>227</td><td> Bitcoin / Bitcoin Discussion / Re: Flood attack 0.00000001 BC</td><td>on: August 04, 2010, 04:25:36 PM</td></tr><tr><td colspan=3>Quote from: Insti on August 04, 2010, 02:58:31 PM

It seems to do more harm than good because it prevents micropayment implementations such as the one bytemaster is suggesting.

Bitcoin isn't currently practical for very small micropayments.  Not for things like pay per search or per page view without an aggregating mechanism, not things needing to pay less than 0.01.  The dust spam limit is a first try at intentionally trying to prevent overly small micropayments like that.**Bitcoin is practical for smaller transactions than are practical with existing payment methods.  Small enough to include what you might call the top of the micropayment range.  But it doesn't claim to be practical for arbitrarily small micropayments.</td></tr><tr><td>228</td><td> Bitcoin / Bitcoin Discussion / Re: Building initial transaction trust through "coin ripping"</td><td>on: August 04, 2010, 12:40:40 AM</td></tr><tr><td colspan=3>The software is designed to support things like this.  I was going to post details of the plans for Escrow, but since getting slashdotted I haven't had time.</td></tr><tr><td>229</td><td> Bitcoin / Bitcoin Discussion / Re: Please upgrade to 0.3.8!</td><td>on: August 04, 2010, 12:29:37 AM</td></tr><tr><td colspan=3>I guess SourceForge hasn't updated its mirrors yet.  The files are there on the admin side, but not on the user side.  I have no idea how long that will take.  It's always been immediate in the past.**Edit: SourceForge is updated now.</td></tr><tr><td>230</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoind x86 binary for CentOS</td><td>on: August 04, 2010, 12:09:32 AM</td></tr><tr><td colspan=3>Quote from: knightmb on August 03, 2010, 11:46:46 PM

There are two versions, one built from stock code, the other modified to accept up to 1,000 nodes (hence the super node name)

I'd rather you didn't make a build of the 1000 node connecting version available.  It won't take very many people running that before we have to make another release just to limit the incoming connections.</td></tr><tr><td>231</td><td> Bitcoin / Bitcoin Discussion / Please upgrade to 0.3.8!</td><td>on: August 03, 2010, 11:40:18 PM</td></tr><tr><td colspan=3>Version 0.3.8 adds an important security improvement.  Everyone should upgrade to get this change.**The new safety feature displays a warning message in the status bar and locks down RPC if it detects a problem that may require an upgrade.**If it sees a longer chain, but it can't process it, then it knows something is wrong.  It displays "WARNING: Displayed transactions may not be correct!  You may need to upgrade." and makes most RPC commands return an error.  It still keeps generating as normal, which is necessary for the stability of the network.**There were important security updates in the versions before this too, so if you haven't upgraded recently, it's extremely important that you upgrade now!**Also, don't forget, we recently added 2.4x faster generating thanks to tcatm's mid-state caching optimisation and BlackEye's help getting ASM SHA-256 working.**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.8/</td></tr><tr><td>232</td><td> Bitcoin / Bitcoin Discussion / Re: What happens when network is split for prolonged time and reconnected?</td><td>on: August 03, 2010, 10:45:07 PM</td></tr><tr><td colspan=3>creighto: I agree with that idea.  After a few hours, it should be possible for the client to notice if the flow of blocks has dropped off by more than would be likely just by chance.  It could tell if it's not hearing the hum of the world anymore.

Quote from: knightmb on August 03, 2010, 07:02:13 PM

Quote from: gavinandresen on August 03, 2010, 06:38:44 PM

Or if the split lasted long enough (more than 100 blocks), transactions that involve generated coins on the shorter chain would be invalid at the merge.

Interesting info, so other than some double-spending issues, as long as the block chain isn't separated for more than 100 or so blocks (or 16+ hours),

In practice, splits are likely to be very asymmetrical.  It would be hard to split the world down the middle.  More likely it would be a single country vs the rest of the world, lets say a 1:10 split.  In that case, it would take the minority fork 10 times as long to generate 100 blocks, so about 7 days.  Also it would be super easy for the client to realize it's hearing way too few blocks and something must be wrong.

Quote from: knightmb on August 03, 2010, 07:02:13 PM

If there a hard coded limit on split delay? Meaning if I had a small network split from the public network, spent some coin around, came back a few days later and got them sync up to the public network (other than coin generation if it happened) transactions should be fine?

There's no time limit.  Assuming you weren't spending coins generated in the minority fork, or spending someone's double-spends you received, your transactions can get into the other chain at any time later.*</td></tr><tr><td>233</td><td> Bitcoin / Development & Technical Discussion / Re: Content-Length header and 500 (was Re: Authentication, JSON RPC and Python)</td><td>on: August 03, 2010, 09:26:26 PM</td></tr><tr><td colspan=3>Quote from: gavinandresen on August 03, 2010, 06:56:44 PM

Quote from: jgarzik on August 03, 2010, 06:09:08 PM

bitcoin requires the Content-Length header, but several JSON-RPC libraries do not provide it.  When the Content-Length header is absent, bitcoin returns 500 Internal Server Error.

Can you be more specific about which JSON libraries don't provide Content-Length ?  It'd be nice to document that.

I guess we should try to support the case where there's no Content-Length parameter.  I don't want to rip and replace streams though, even if it has to read one character at a time.**Edit: That is, assuming there actually are any libraries that don't support Content-Length.</td></tr><tr><td>234</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoind x86 binary for CentOS</td><td>on: August 03, 2010, 09:05:08 PM</td></tr><tr><td colspan=3>Quote from: sgtstein on August 03, 2010, 05:30:37 PM

I have successfully built it with 4.8, 4.7 never would but with 4.8 bitcoind locks up whenever it dumps the initial block download to disk. *

I urge you not to use BDB 4.8.  The database/log0000* files will be incompatible if anyone uses your build and then goes back to the official build.</td></tr><tr><td>235</td><td> Bitcoin / Development & Technical Discussion / Re: Builds for Ubuntu?</td><td>on: August 03, 2010, 08:56:11 PM</td></tr><tr><td colspan=3>Quote from: nimnul on August 03, 2010, 05:51:15 PM

Is satoshi noWx patch in 0.3.7 already? Before that bitcoind required wx, and I never seen Satoshi announcing that it's in trunk

Yes, 0.3.7 has it.  It was in rev 112.</td></tr><tr><td>236</td><td> Bitcoin / Development & Technical Discussion / Re: Protocol Buffers for Bitcoin</td><td>on: August 02, 2010, 08:22:08 PM</td></tr><tr><td colspan=3>The reason I didn't use protocol buffers or boost serialization is because they looked too complex to make absolutely airtight and secure.  Their code is too large to read and be sure that there's no way to form an input that would do something unexpected.**I hate reinventing the wheel and only resorted to writing my own serialization routines reluctantly.  The serialization format we have is as dead simple and flat as possible.  There is no extra freedom in the way the input stream is formed.  At each point, the next field in the data structure is expected.  The only choices given are those that the receiver is expecting.  There is versioning so upgrades are possible.**CAddress is about the only object with significant reserved space in it.  (about 7 bytes for flags and 12 bytes for possible future IPv6 expansion)**The larger things we have like blocks and transactions can't be optimized much more for size.  The bulk of their data is hashes and keys and signatures, which are uncompressible.  The serialization overhead is very small, usually 1 byte for size fields.**On Gavin's idea about an existing P2P broadcast infrastructure, I doubt one exists.  There are few P2P systems that only need broadcast.  There are some libraries like Chord that try to provide a distributed hash table infrastructure, but that's a huge difficult problem that we don't need or want.  Those libraries are also much harder to install than ourselves.</td></tr><tr><td>237</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: August 02, 2010, 07:02:46 PM</td></tr><tr><td colspan=3>Is it 2x fast on AMD and 1/2 fast on Intel?

Quote from: tcatm on July 31, 2010, 10:12:38 AM

Btw. Why are you using this alignup<16> function when __attribute__ ((aligned (16))) will tell the compiler to align at compiletime?

Tried that, but it doesn't work for things on the stack.  I ran some tests.**It doesn't even cause an error, it just doesn't align it.</td></tr><tr><td>238</td><td> Bitcoin / Technical Support / Re: Mac Client Problems Outlined...</td><td>on: August 02, 2010, 06:02:20 PM</td></tr><tr><td colspan=3>"Minimize to the tray instead of the taskbar" & "Minimize to the tray on close" must not be implemented yet on the Mac.  We should grey them out in the next version.</td></tr><tr><td>239</td><td> Bitcoin / Technical Support / Re: Linux version => No GUI after upgrade. WTF?</td><td>on: August 02, 2010, 05:39:27 PM</td></tr><tr><td colspan=3>Did it print anything to the console?  Are you sure you didn't run "bitcoind"?**Try version 0.3.7.</td></tr><tr><td>240</td><td> Bitcoin / Technical Support / Re: Linux distribution download</td><td>on: July 31, 2010, 02:38:52 PM</td></tr><tr><td colspan=3>It can be built with Boost 1.37 or later.</td></tr><tr><td>241</td><td> Bitcoin / Development & Technical Discussion / Webpage idea: Next predicted difficulty change</td><td>on: July 31, 2010, 01:32:08 AM</td></tr><tr><td colspan=3>It would be neat if someone had a page (like that handy calculator at http://www.alloscomp.com/bitcoin/calculator.php) that projects what the next difficulty adjustment will be.**projected difficulty adjustment multiplier = ** blocks_since_last_adjustment / 2016* ------------------------------------* time_since_last_adjustment / 14_days**For instance, if it already got half way to the next adjustment in only 3.5 days instead of 7, we would expect difficulty to double:** (1008/2016) / (3.5/14) = 0.5/0.25 = 2.0**Also, it could show the predicted time when the next adjustment will occur, and tell when the last adjustment was and how much it changed.</td></tr><tr><td>242</td><td> Bitcoin / Development & Technical Discussion / Re: 4 hashes parallel on SSE2 CPUs for 0.3.6</td><td>on: July 31, 2010, 12:29:20 AM</td></tr><tr><td colspan=3>That's amazing... **So are you saying you use 128-bit registers to SIMD four 32-bit data at once?  I've wondered about that for a long time, but I didn't think it would be possible due to addition carrying into the neighbour's value.</td></tr><tr><td>243</td><td> Bitcoin / Bitcoin Discussion / Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</td><td>on: July 30, 2010, 09:44:04 PM</td></tr><tr><td colspan=3>Quote from: knightmb on July 30, 2010, 08:04:19 PM

So that last command should simply be*sudo apt-get install libboost1.37-dev

Except that wouldn't work for boost 1.40+ (on Ubuntu 10.04), where you need to get libboost-all-dev.**Seems they changed everything around in Boost recently, "-mt" and all that, makes it hard.**BTW, I tried Boost 1.34 but it didn't have the boost.interprocess stuff.**Mac OSX version is available now.  See bitcoin.org or the SourceForge link.</td></tr><tr><td>244</td><td> Bitcoin / Bitcoin Discussion / Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</td><td>on: July 30, 2010, 07:53:06 PM</td></tr><tr><td colspan=3>Quote from: knightmb on July 30, 2010, 07:24:07 PM

I can only imagine the pain you went through to get these builds because I'm trying to build the program on a Ubuntu 9.04 box and so far I can't seem to find all the dependencies to compile no matter how much I keep installing packages and compiling source, LOL.

I can't understand why you're having so much pain.  I just followed the instructions in build-unix.txt.  I made a couple little corrections for Boost 1.37, which I'll put on SVN the next time I update it, noted below:**Dependencies*------------*sudo apt-get install build-essential*sudo apt-get install libgtk2.0-dev*sudo apt-get install libssl-dev*sudo apt-get install libdb4.7-dev*sudo apt-get install libdb4.7++-dev*sudo apt-get install libboost-all-dev (or libboost1.37-dev)**wxWidgets*---------*cd /usr/local*tar -xzvf wxWidgets-2.9.0.tar.gz*cd /usr/local/wxWidgets-2.9.0*mkdir buildgtk*cd buildgtk*../configure --with-gtk --enable-debug --disable-shared --enable-monolithic*make*sudo su*make install*ldconfig***added a comment in makefile.unix:**# for boost 1.37, add -mt to the boost libraries*LIBS= \* -Wl,-Bstatic \*   -l boost_system \*   -l boost_filesystem \*   -l boost_program_options \*   -l boost_thread \*   -l db_cxx \*   -l crypto \* -Wl,-Bdynamic \*   -l gthread-2.0</td></tr><tr><td>245</td><td> Bitcoin / Development & Technical Discussion / Re: [PATCH] implement 'listtransactions'</td><td>on: July 30, 2010, 07:40:54 PM</td></tr><tr><td colspan=3>What are you needing to use listtransactions for?**The reason I didn't implement listtransactions is I want to make sure web programmers don't use it.  It would be very easy to latch onto that for watching for received payments.  There is no reliable way to do it that way and make sure nothing can slip through the cracks.  Until we have solid example code using getreceivedbyaddress and getreceivedbylabel to point to and say "use this! use this! don't use listtransactions!", I don't think we should implement listtransactions.**When we do implement listtransactions, maybe one way to fight that is to make it all text.  It should not break down the fields into e.g. comment, confirmations, credit, debit.  It could be one pretty formatted string like "0/unconfirmed   0:0:0 date   comment      debit 4  credit 0" or something so it's hard for programmers to do the wrong thing and process it.  It's only for viewing the status of your server.  I guess that would be kinda annoying for web interfaces that would rather format it into html columns though.</td></tr><tr><td>246</td><td> Bitcoin / Technical Support / Re: Bug: "Immature" coins lost in wallet.dat during transaction</td><td>on: July 30, 2010, 07:19:05 PM</td></tr><tr><td colspan=3>I don't get how it let you send if it was not matured.  Your balance would have been lower than the amount.  It would have said balance 0.01, right?  If I try that it says "you don't have enough money" or "Insufficient funds" from the command line.**How many blocks did it say it had left to mature when you sent?**There's a chance it might still go through.**Have you copied or moved your wallet.dat in any way?*</td></tr><tr><td>247</td><td> Bitcoin / Bitcoin Discussion / Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</td><td>on: July 29, 2010, 11:12:12 PM</td></tr><tr><td colspan=3>Quote from: lachesis on July 29, 2010, 10:14:36 PM

On Debian testing 32-bit, I get a few build errors, all resembling:

Code:

script.cpp:114: error: ‘OP_NOP1’ was not declared in this scope

I got these when attempting to "make bitcoind" without "make clean" or "make" first. It looks like the bitcoind build instructions don't compile the headers first, but they also don't delete the headers.h.gch, so the old headers are used if present.**If anyone else gets this error, the simplest solution is to "make clean" and retry the build.

We don't really need pre-compiled header.  It only makes it compile slightly faster.  I think I'll just get rid of it.  Even still, you'd still need to remember to "make -f makefile.unix clean" or delete headers.h.gch one more time to get rid of the leftover file.**Damn that GLIBC_2.11.  I thought I'd been careful not to accept any of the updates.</td></tr><tr><td>248</td><td> Bitcoin / Technical Support / Re: Linux distribution download</td><td>on: July 29, 2010, 10:17:24 PM</td></tr><tr><td colspan=3>Yeah, acutely aware that I should have stayed on 9.04 or 9.10.  It's a lot more work to downgrade than upgrade and I've been squeezed for time.  Ubuntu is the most popular distro, so I'm staying with that.</td></tr><tr><td>249</td><td> Bitcoin / Technical Support / Re: Transaction disappeared in the void...</td><td>on: July 29, 2010, 10:08:31 PM</td></tr><tr><td colspan=3>If the transaction didn't go out immediately at first, like if you weren't connected at the time, it may take up to 2 hours to resend it.  Long term, it does keep relentlessly sending it.**I'll shorten that length of time in a future version.**You do need to have downloaded the complete block chain (currently 71040 blocks) before you'll see any confirms.  Same with the recipient.</td></tr><tr><td>250</td><td> Bitcoin / Development & Technical Discussion / Re: Implementation bug prior to 0.3.6</td><td>on: July 29, 2010, 10:04:15 PM</td></tr><tr><td colspan=3>Actually, it works well to just PM me.  I'm the one who's going to be fixing it.  If you find a security flaw, I would definitely like to hear from you privately to fix it before it goes public.</td></tr><tr><td>251</td><td> Bitcoin / Bitcoin Discussion / Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</td><td>on: July 29, 2010, 09:43:15 PM</td></tr><tr><td colspan=3>"./bitcoin: /lib64/libc.so.6: version `GLIBC_2.11' not found (required by ./bitcoin)" isn't a new problem that started with 0.3.6 is it?  This was built on the same OS installations as 0.3.0.**Unfortunately I upgraded to Ubuntu 10.04 before 0.3.0.  I will not upgrade anymore.  I don't know when I might have time to reinstall to downgrade, but at least by not upgrading, it'll gradually fix itself.</td></tr><tr><td>252</td><td> Bitcoin / Bitcoin Discussion / Re: *** ALERT *** Upgrade to 0.3.6 ASAP!</td><td>on: July 29, 2010, 09:20:38 PM</td></tr><tr><td colspan=3>0.3.6 Linux build is back to the old makefile.unix.  It static links libjpeg so that shouldn't be a problem.**Is that working better?**If you got 22DbRunRecoveryException and you've used someone else's build before, you may need to delete (or move the files somewhere else) database/log.000000***Windows and Linux users: if you got 0.3.5 you still need to upgrade to 0.3.6.</td></tr><tr><td>253</td><td> Bitcoin / Bitcoin Discussion / Re: *** ALERT *** version 0.3.6</td><td>on: July 29, 2010, 08:30:15 PM</td></tr><tr><td colspan=3>SVN is updated with version 0.3.6.**Uploading Windows build of 0.3.6 to Sourceforge now, then will rebuild linux.</td></tr><tr><td>254</td><td> Bitcoin / Bitcoin Discussion / Re: *** ALERT *** version 0.3.6</td><td>on: July 29, 2010, 07:55:51 PM</td></tr><tr><td colspan=3>Haven't had time to update the SVN yet.  Wait for 0.3.6, I'm building it now.  You can shut down your node in the meantime.  </td></tr><tr><td>255</td><td> Bitcoin / Bitcoin Discussion / *** ALERT *** Upgrade to 0.3.6</td><td>on: July 29, 2010, 07:13:06 PM</td></tr><tr><td colspan=3>Please upgrade to 0.3.6 ASAP!  We fixed an implementation bug where it was possible that bogus transactions could be displayed as accepted.  Do not accept Bitcoin transactions as payment until you upgrade to version 0.3.6!**If you can't upgrade to 0.3.6 right away, it's best to shut down your Bitcoin node until you do.**Also in 0.3.6, faster hashing:*- midstate cache optimisation thanks to tcatm*- Crypto++ ASM SHA-256 thanks to BlackEye*Total generating speedup 2.4x faster.**Download:*http://sourceforge.net/projects/bitcoin/files/Bitcoin/bitcoin-0.3.6/**Windows and Linux users: if you got 0.3.5 you still need to upgrade to 0.3.6.</td></tr><tr><td>256</td><td> Bitcoin / Technical Support / Re: wiki registration email?</td><td>on: July 29, 2010, 02:10:46 AM</td></tr><tr><td colspan=3>WTF?  How did we get on that?  AFAIK, the only e-mail is if you tell the forum to do notifications, and I guess the wiki registration.  I'd consider turning off the forum notification e-mails, I don't know why we have that.</td></tr><tr><td>257</td><td> Bitcoin / Development & Technical Discussion / Re: Scalability and transaction rate</td><td>on: July 29, 2010, 02:00:38 AM</td></tr><tr><td colspan=3>The current system where every user is a network node is not the intended configuration for large scale.  That would be like every Usenet user runs their own NNTP server.  The design supports letting users just be users.  The more burden it is to run a node, the fewer nodes there will be.  Those few nodes will be big server farms.  The rest will be client nodes that only do transactions and don't generate.

Quote from: bytemaster on July 28, 2010, 08:59:42 PM

Besides, 10 minutes is too long to verify that payment is good.  It needs to be as fast as swiping a credit card is today.

See the snack machine thread, I outline how a payment processor could verify payments well enough, actually really well (much lower fraud rate than credit cards), in something like 10 seconds or less.  If you don't believe me or don't get it, I don't have time to try to convince you, sorry.*http://bitcointalk.org/index.php?topic=423.msg3819#msg3819</td></tr><tr><td>258</td><td> Bitcoin / Development & Technical Discussion / Re: Difficulty</td><td>on: July 29, 2010, 01:16:23 AM</td></tr><tr><td colspan=3>You were looking at the wrong code.  Here's the code that applies:

Code:

bool CBlock::CheckBlock() const*{*...*    // Check timestamp*    if (nTime > GetAdjustedTime() + 2 * 60 * 60)*        return error("CheckBlock() : block timestamp too far in the future");*...**bool CBlock::AcceptBlock()*{*   ...*    // Check timestamp against prev*    if (nTime <= pindexPrev->GetMedianTimePast())*        return error("AcceptBlock() : block's timestamp is too early");

*The timestamp is limited to up to 2 hours in the future.  It can be earlier than the previous block, but it must be greater than the median of the last 11 blocks.  The reason for doing it that way is so the time can get corrected in the next block if the previous block had the time too far in the future, like what happened.</td></tr><tr><td>259</td><td> Bitcoin / Development & Technical Discussion / Re: Build error SVN r115 on my Mac: workaround</td><td>on: July 28, 2010, 09:23:23 PM</td></tr><tr><td colspan=3>Was that the only thing I broke in the OSX build?!  Does it actually work after just that one change?**I had to do that for makefile.vc also.  It compiled, but SHA-256 didn't work correctly; it returned the same incorrect hash each time.**We'll disable it now, and if anyone figures out how to fix it, we can re-enable it then.  It's still 1.7x faster from the midstate optimisation.**The Crypto++ ASM SHA-256 works with GCC on Linux and Windows (MinGW).**I uploaded this makefile.osx change to SVN.  (let me know if that compiles now)</td></tr><tr><td>260</td><td> Bitcoin / Technical Support / Re: Having problems specifing -datadir</td><td>on: July 28, 2010, 08:58:26 PM</td></tr><tr><td colspan=3>It was able to reproduce this.  The database doesn't like the relative path.**"bitcoind -datadir=./subdir getinfo" works against a running daemon, but trying to start the daemon as "bitcoind -datadir=./subdir" gets that exception.**I guess we should resolve the full path before passing it to the database.**It looks like you were the first one to ever use -datadir with a relative path.</td></tr><tr><td>261</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin x86 for Windows</td><td>on: July 27, 2010, 07:47:42 PM</td></tr><tr><td colspan=3>OK, thanks.  I'd also like to know if it runs fine as long as you don't turn on Generate.  You'd think as long as it doesn't actually execute any SSE2 instructions, it would still load.  At least Pentium 3's could run it without generating.</td></tr><tr><td>262</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin x86 for Windows</td><td>on: July 27, 2010, 06:27:30 PM</td></tr><tr><td colspan=3>Quote from: BlackEye on July 25, 2010, 10:12:23 PM

I was able to integrate the SHA256 functionality from Crypto++ 5.6.0 into Bitcoin.  This is the fastest SHA256 yet using the SSE2 assembly code.  Since Bitcoin was sending unaligned data to the block hash function, I had to change the MOVDQA instruction to MOVDQU.**I think using the SHA256 functionality from Crypto++ 5.6.0 is the way forward right now.

I added a subset of the Crypto++ 5.6.0 library to the SVN.  I stripped it down to just SHA and 11 general dependency files.  There shouldn't be any other crypto in there other than SHA.**I aligned the data fields and it worked.  The ASM SHA-256 is about 48% faster.  The combined speedup is about 2.5x faster than version 0.3.3.**I guess it's using SSE2.  It automatically sets its build configuration at compile time based on the compiler environment.**It looks like it has some SSE2 detection at runtime, but it's hard to tell if it actually uses it to fall back if it's not available.  I want the release builds to have SSE2.  SSE2 has been around since the first Pentium 4.  A Pentium 3 or older would be so slow, you'd be wasting your electricity trying to generate on it anyway.**This is SVN rev 114.</td></tr><tr><td>263</td><td> Bitcoin / Bitcoin Discussion / Re: Proof-of-work difficulty increasing</td><td>on: July 27, 2010, 03:04:58 AM</td></tr><tr><td colspan=3>New difficulty factor 244.213223092*+35%**I updated the first post.**date, difficulty factor, % change*2009          1.00*30/12/2009    1.18   +18%*11/01/2010    1.31   +11%*25/01/2010    1.34    +2%*04/02/2010    1.82   +36%*14/02/2010    2.53   +39%*24/02/2010    3.78   +49%*08/03/2010    4.53   +20%*21/03/2010    4.57    +9%*01/04/2010    6.09   +33%*12/04/2010    7.82   +28%*21/04/2010   11.46   +47%*04/05/2010   12.85   +12%*19/05/2010   11.85    -8%*29/05/2010   16.62   +40%*11/06/2010   17.38    +5%*24/06/2010   19.41   +12%*06/07/2010   23.50   +21%*13/07/2010   45.38   +93%*16/07/2010  181.54  +300%*27/07/2010  244.21   +35%</td></tr><tr><td>264</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin x86 for Windows</td><td>on: July 27, 2010, 01:29:42 AM</td></tr><tr><td colspan=3>Quote from: Olipro on July 26, 2010, 01:04:41 PM

Crypto++ 5.6.0: http://www.cryptopp.com/*Cached SHA256: http://pastebin.com/rJAYZJ32 (although I'm pretty sure this is publically submitted elsewhere, I was linked to it on IRC)

I added the cached SHA256 state idea to the SVN, rev 113.  The speedup is about 70%.  I credited it to tcatm based on your post in the x64 thread. **I can compile the Crypto++ 5.6.0 ASM SHA code with MinGW but as soon as it runs it crashes.  It says its for MASM (Microsoft's assembler) and the sample command line they give looks like Visual C++.  Does it only work with the MSVC and Intel compilers?</td></tr><tr><td>265</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin x64 for Windows</td><td>on: July 26, 2010, 06:41:31 PM</td></tr><tr><td colspan=3>Quote from: Olipro on July 26, 2010, 06:39:17 AM

Credit to tcatm for the caching part of the SHA context - this offers absolutely brilliant performance. Additionally, the Intel compiler really comes into its own here as its parallelisation abilities give a massive performance boost over Visual Studio.**Performance: 4700khash/s on 4 cores, I think that speaks for itself.**I've included both the VS and Intel build, but there's really no comparison, the Intel build craps all over VS.

Is that still starting from Crypto++?  Lets get this into the main sourcecode.</td></tr><tr><td>266</td><td> Bitcoin / Development & Technical Discussion / bitcoind without wxWidgets</td><td>on: July 26, 2010, 05:23:33 PM</td></tr><tr><td colspan=3>I replaced the last of the few wxBase dependencies in bitcoind.**bitcoind now compiles without wxWidgets or wxBase in SVN rev 112.**main(int argc, char* argv[]) is added to init.cpp.  CMyApp and the Startup folder stuff are moved to ui.cpp.  ui.cpp and uibase.cpp aren't linked by bitcoind.**The makefiles have -DGUI to control whether the GUI is used.**I test compiled MinGW, VC and Ubuntu.  I don't know if I broke the Mac OSX build, someone will need to check that.</td></tr><tr><td>267</td><td> Bitcoin / Development & Technical Discussion / Re: Stealing Coins</td><td>on: July 25, 2010, 10:27:36 PM</td></tr><tr><td colspan=3>Sorry, actually it's ECDSA (Elliptic Curve Digital Signature Algorithm) not RSA.  I shouldn't have said "prime numbers".  ECDSA doesn't take much time to generate a keypair.</td></tr><tr><td>268</td><td> Bitcoin / Technical Support / Re: md5?</td><td>on: July 25, 2010, 10:06:57 PM</td></tr><tr><td colspan=3>For future reference, here's my public key.  It's the same one that's been there since the bitcoin.org site first went up in 2008.  Grab it now in case you need it later.**http://www.bitcoin.org/Satoshi_Nakamoto.asc</td></tr><tr><td>269</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 25, 2010, 09:51:31 PM</td></tr><tr><td colspan=3>Quote from: gavinandresen on July 25, 2010, 09:38:19 PM

Great catch!  Simpler fix is to specify the BIO_FLAGS_BASE64_NO_NL in the rpc.cpp/EncodeBase64 function

SVN rev 111</td></tr><tr><td>270</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 25, 2010, 09:44:16 PM</td></tr><tr><td colspan=3>Quote from: BitLex on July 25, 2010, 08:45:38 PM

i got some problems here too trying to get this run on PHP.*so far i had no luck, neither the wiki-sample (jsonRPCClient trying to fopen(http://username:password@localhost:8332/)), nor my curl-sample (using setopt CURLOPT_HTTPAUTH, CURLAUTH_BASIC) seem to work.

That's strange, didn't someone just say that was supposed to work?  (what library was he using?)  Post if you figure out what wrong.**I hope it's not going to put up this much of a fight for all PHP users.**Looks like we've got the Fortran scenario already.</td></tr><tr><td>271</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 25, 2010, 09:34:29 PM</td></tr><tr><td colspan=3>Quote from: lachesis on July 25, 2010, 07:52:35 PM

I found what appears to be a bug: with a long enough username and password combination, the base64 encoder in bitcoind produces authorization headers that look like this:

Code:

...*Authorization: Basic YWJiYWJiYWFiYmE6aGVsbG93b3JsZGhlbGxvd29ybGRoZWxsb3dvcmxkaGVsbG93*b3JsZGhlbGxvd29ybGRoZWxsb3dvcmxk

It inserts a newline every 64 characters, which obviously breaks the Authorization header, so commands like "bitcoin getinfo" fail. The server still works fine with properly behaving clients.**This can be solved by removing the newlines (and maybe '\r's) from result at the end of the Base64Encode function:

Code:

result.erase(std::remove(result.begin(), result.end(), '\n'), result.end());*result.erase(std::remove(result.begin(), result.end(), '\r'), result.end());

+1 to you for having such a long password that you found this bug.**Uploaded to SVN as rev 110.</td></tr><tr><td>272</td><td> Bitcoin / Development & Technical Discussion / Re: Stealing Coins</td><td>on: July 25, 2010, 08:48:01 PM</td></tr><tr><td colspan=3>Quote

Here is a paper that claims to find SHA-1 collisions in 2^52 crypto operations. And optimally secure hash would take 2^80 operations. 2^52 time is still large, but it is getting into cluster and botnet range.

2^80 is if you can use a birthday attack.  You can't use a birthday attack for this, so the difficulty is the full 2^160 bits.  Although, if you were trying to crack any one of 1 million (2^20) transactions, you could do a partial birthday attack 2^160/2^20 = 2^140.**Bitcoin Addresses are the only place where 160-bit hash is used.  Everything else is SHA-256.  They're calculated as:**bitcoinaddress = RIPEMD-160(SHA-256(publickey))**Correct me if I'm wrong (please, and I'll gladly eat crow) but I think it would be hard to use an analytical attack on RIPEMD-160 in this case.  An analytical attack prescribes a certain range or pattern of inputs to try that will greatly increase your chance of finding a collision.  Here, you don't have that kind of control over RIPEMD-160's input, because the input is the output of SHA-256.  If an analytical attack helps you find an input to RIPEMD-160 that produces a collision, what are you going to do with it?  You still have to get SHA-256 to output that value, so you would still have to break SHA-256 too.**For brute force, RIPEMD-160(SHA-256(x)) is no stronger than RIPEMD-160 alone.  But for analytical attack, it seems like you must analytical attack both RIPEMD-160 and SHA-256.  If I'm wrong, then the strength is the same as RIPEMD-160 and the SHA-256 only serves as one round of key strengthening.</td></tr><tr><td>273</td><td> Bitcoin / Development & Technical Discussion / Re: Stealing Coins</td><td>on: July 25, 2010, 08:01:40 PM</td></tr><tr><td colspan=3>Quote from: knightmb on July 25, 2010, 07:44:02 PM

If I figure out that Public Key 123456 generates Hash ABCD*and*Public Key 654321 also generates Hash ABCD*I'm still left without the Private Key.**But from what you are saying, all I need is Public Key 654321 and I can spend coin pretending to be Public Key 123456.

You would still have to sign it with public key 654321.  You need to find a collision using a public key for which you know the private key.**When you claim a Bitcoin Address transaction, you give your public key that matches the hash, then you must sign it with that key.**Red's point is that it's easy to quickly generate insecure public keys which you could break and find the private key after you find a collision.**He points out that if the public key was required to be a secure one, one which must have required significant work to find the prime numbers, that would increase the strength above that of the hash function alone.  Someone trying to brute force would have to take time generating a key for each attempt.</td></tr><tr><td>274</td><td> Bitcoin / Development & Technical Discussion / Re: Stealing Coins</td><td>on: July 25, 2010, 07:06:23 PM</td></tr><tr><td colspan=3>Red, thanks for telling me privately first!  Please go ahead and post it (and relieve the suspense for everyone!)**His point is that transactions paid to a Bitcoin Address are only as secure as the hash function.  To make Bitcoin Addresses short, they are a hash of the public key, not the public key itself.  An attacker would only have to break the hash function, not ECDSA.</td></tr><tr><td>275</td><td> Bitcoin / Development & Technical Discussion / Re: Stealing Coins</td><td>on: July 25, 2010, 05:45:22 PM</td></tr><tr><td colspan=3>It's best if you tell it to me privately so it can be fixed first.**I just e-mailed you my e-mail address.  (or you could PM me here)</td></tr><tr><td>276</td><td> Bitcoin / Bitcoin Discussion / Bitcoin 0.3.3 released -- PLEASE UPGRADE</td><td>on: July 25, 2010, 04:55:09 PM</td></tr><tr><td colspan=3>Please upgrade to 0.3.3!  Important security improvements were made in 0.3.2 and 0.3.3.**New features:*- Gavin Andresen's HTTP authentication to secure JSON-RPC*- 5x faster initial block download, under 30 minutes</td></tr><tr><td>277</td><td> Bitcoin / Development & Technical Discussion / Re: a simple traffic load test run</td><td>on: July 25, 2010, 03:29:52 PM</td></tr><tr><td colspan=3>Please do these tests on the test network.  That's what it's for.  Thanks.</td></tr><tr><td>278</td><td> Bitcoin / Development & Technical Discussion / Re: a simple traffic load test run</td><td>on: July 25, 2010, 02:46:33 PM</td></tr><tr><td colspan=3>Was that on the test network?*http://bitcointalk.org/index.php?topic=363.0</td></tr><tr><td>279</td><td> Bitcoin / Development & Technical Discussion / Re: Reading/Writing Blocks and FLATDATA</td><td>on: July 24, 2010, 04:04:20 AM</td></tr><tr><td colspan=3>FLATDATA was a workaround to serialize a fixed field length array.  There was a cleaner way to make it understand how to serialize arrays directly, but MSVC6 couldn't do it and I wanted to keep compatibility with MSVC6 at that time.  We don't support MSVC6 anymore because we use something in Boost that doesn't.  We lost support for it after 0.2.0.  Maybe someday I'll swap in the clean way that just knows how to serialize fixed length arrays without wrapping them in FLATDATA.</td></tr><tr><td>280</td><td> Bitcoin / Bitcoin Discussion / Version 0.3.2.5 -- please test!</td><td>on: July 24, 2010, 03:32:52 AM</td></tr><tr><td colspan=3>Please test 0.3.2.5 in preparation for the 0.3.3 release!  This build is looking good and should be the one that goes into 0.3.3.  I encourage you to go ahead and upgrade now if you're on Windows or Linux.**New features:*- Gavin Andresen's HTTP authentication to secure JSON-RPC*- 5x faster initial block download, under 30 minutes**Download here:*http://www.bitcoin.org/download/bitcoin-0.3.2.5-win32.zip*http://www.bitcoin.org/download/bitcoin-0.3.2.5-linux.tar.gz**Thanks!</td></tr><tr><td>281</td><td> Bitcoin / Bitcoin Discussion / Re: Warning: don't use -server or bitcoind on a machine where you web browse</td><td>on: July 24, 2010, 02:29:09 AM</td></tr><tr><td colspan=3>The JSON-RPC HTTP authentication feature in 0.3.3 solves this problem.</td></tr><tr><td>282</td><td> Bitcoin / Technical Support / Re: bitcoind not responding to RPC</td><td>on: July 24, 2010, 01:15:58 AM</td></tr><tr><td colspan=3>Can anyone confirm if JSON-RPC over HTTP is supposed to use status 500 if the reply is an error reply?  I can't remember where I picked that up, maybe it's wrong.  It seems like 200 would make more sense unless there's something wrong with the mechanics of the HTTP request itself.  (and maybe that's what it said and I forgot and spread 500 to all error responses)</td></tr><tr><td>283</td><td> Bitcoin / Technical Support / Re: JSON-RPC Multiple Invocations</td><td>on: July 24, 2010, 12:59:08 AM</td></tr><tr><td colspan=3>Obviously it's a bug that it repeats the header.**I was trying to follow the 1.0 spec: http://json-rpc.org/wiki/specification   It called for multiple invocation.**I think they mean it's like this, but I'm not sure:**Post:*{"method": "postMessage", "params": ["Hello all!"], "id": 99}*{"method": "postMessage", "params": ["I have a question:"], "id": 101}**Reply:*{"result": 1, "error": null, "id": 99}*{"result": 1, "error": null, "id": 101}**I can't remember where I think I saw that it's supposed to send back HTTP status 500 for an error reply.  If it contains multiple responses and one is an error, I wonder if that makes the status 500 for the whole thing, I guess so.  Maybe it should always return 200.  I think someone sounded like the 500 might be causing a problem.**This probably gets fixed after 0.3.3.  Until then, just use single invocation.  I wonder if any JSON-RPC package even supports multiple invocation, probably not.**It would be nice if we could pin down better how multiple-invocation is supposed to work, if at all, before trying to fix it, and whether returning HTTP status 500 for error response is right.</td></tr><tr><td>284</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 23, 2010, 08:39:03 PM</td></tr><tr><td colspan=3>I don't think authentication should be disabled by default if there's no conf file or the config file doesn't contain "rpcpassword", but what if it contains "rpcpassword="?**I can see both points.**What if the programmer can't figure out how to do HTTP authentication in their language (Fortran or whatever) or it's not even supported by their JSON-RPC library?  Should they be able to explicitly disable the password requirement?**OTOH, what if there's a template conf file, with*rpcpassword=  # fill in a password here**There are many systems that don't allow you to log in without a password.  This forum, for instance.  Gavin's point seems stronger.**BTW, I haven't tested it, but I hope having rpcpassword=  in the conf file is valid.  It's only if you use -server or -daemon or bitcoind that it should fail with a warning.  If it doesn't need the password, it should be fine.  Is that right?</td></tr><tr><td>285</td><td> Bitcoin / Development & Technical Discussion / Re: Faster initial block download</td><td>on: July 23, 2010, 08:13:27 PM</td></tr><tr><td colspan=3>Quote from: knightmb on July 23, 2010, 07:32:58 PM

Is there a safety reason to stop within the last 2000 blocks or can it be tweaked to stop at remaining 500 blocks for example?

Not really.  I'll change it to 1000 next time.</td></tr><tr><td>286</td><td> Bitcoin / Development & Technical Discussion / Faster initial block download (5x faster)</td><td>on: July 23, 2010, 06:24:56 PM</td></tr><tr><td colspan=3>By making some adjustments to the database settings, I was able to make the initial block download about 5 times faster.  It downloads in about 30 minutes.**The database default had it writing each block to disk synchronously, which is not necessary.  I changed the settings to let it cache the changes in memory and write them out in a batch.  Blocks are still written transactionally, so either the complete change occurs or none of it does, in either case the data is left in a valid state.**I only enabled this change during the initial block download.  When you come within 2000 blocks of the latest block, these changes turn off and it slows down to the old way.**I built a test build if you'd like to start using it:**http://www.bitcoin.org/download/bitcoin-0.3.2.5-win32.zip*http://www.bitcoin.org/download/bitcoin-0.3.2.5-linux.tar.gz**These binaries also include Gavin Andresen's JSON-RPC HTTP authentication feature and the other important security improvements from 0.3.2.**I've been running a test over the last 24 hours that kills and restarts it randomly every 2-60 seconds (poor thing) while it's trying to do an initial block download and it's been fine.**There are no changes to the way it handles wallet.dat.  This change is only for blk*.dat and the non-critical addr.dat.  You can always delete blk*.dat if it gets screwed up and let it re-download.</td></tr><tr><td>287</td><td> Bitcoin / Technical Support / Re: bitcoind not responding to RPC</td><td>on: July 23, 2010, 05:23:47 PM</td></tr><tr><td colspan=3>If I recall correctly, 500 is the prescribed status code for JSON-RPC error responses.  There is still a JSON response in the body of the reply telling the explanation of the error, which could be something like {"result":"","error":"bitcoin address not found","id":"1"}.</td></tr><tr><td>288</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 23, 2010, 05:14:31 PM</td></tr><tr><td colspan=3>Gavin's changes look good.  I think everything is complete.  Here's a test build, please test it!**http://www.bitcoin.org/download/bitcoin-0.3.2.5-win32.zip*http://www.bitcoin.org/download/bitcoin-0.3.2.5-linux.tar.gz</td></tr><tr><td>289</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 23, 2010, 05:07:40 PM</td></tr><tr><td colspan=3>Quote from: gavinandresen on July 23, 2010, 03:11:45 PM

Question for everybody:  should I add a section to the wiki page describing, in detail, how to do HTTP Basic authentication?  PHP and Python make is really easy-- just use the http://user:pass@host:port/ URL syntax.

Yes, I think that would be really good so each dev doesn't have to figure it out themselves.  We need a simple example for each of Python, PHP and Java importing the json-rpc library and using it to do a getinfo or something, including doing the http authentication part.</td></tr><tr><td>290</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 22, 2010, 02:34:23 AM</td></tr><tr><td colspan=3>Quote from: gavinandresen on July 22, 2010, 01:11:26 AM

TODO: dialog box or debug.log warning if no rpc.user/rpc.password is set, explaining how to set.

In many of the contexts of this RPC stuff, you can print to the console with fprintf(stdout, like this:*#if defined(__WXMSW__) && wxUSE_GUI*        MyMessageBox("Warning: rpc password is blank, use -rpcpw=<password>\n", "Bitcoin", wxOK | wxICON_EXCLAMATION);*#else*        fprintf(stdout, "Warning: rpc password is blank, use -rpcpw=<password>\n");*#endif</td></tr><tr><td>291</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 21, 2010, 05:31:09 PM</td></tr><tr><td colspan=3>boost::program_options has the same "key=value" format.  Gavin pointed out we can use it in a simple way as a parser without getting into all the esoteric c++ syntax like typed value extraction.  We can use more features if we want later.**Lets go ahead with HTTP basic authentication instead of password as a parameter.</td></tr><tr><td>292</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 21, 2010, 04:07:57 PM</td></tr><tr><td colspan=3>Quote from: gavinandresen on July 21, 2010, 12:11:10 PM

I just did a quick survey of 20 .conf files in /etc on my debian system, and found:* 1 file used "key value"* 5 used "key=value" 

Thanks for that survey!**I find "key value" a little unnatural.  There ought to be a more definite separator between key and value that suggests assignment.  The space people may just be getting lazy using their language's split function.*key=some full sentence with spaces in it.  # seems more clear*key some full sentence with spaces in it.  # than this**Allright then, lets go with self-parsed mapConfig, syntax:*# comment*key=value**file extension .conf.  What's the filename, is it ~/.bitcoin/settings.conf or ~/.bitcoin/bitcoin.conf or what?   **I think we better strip whitespace at the beginning and end of the key and the value.*# user who likes column formatted *k            = value*key         = value*longerkey =   this sentence would be this    # "this sentence would be this"*        key = value   # guess this is ok too*  nextkey = value*      right = justified**The normal syntax should be "key=value", but you can't blame people for the occasional "key = value".</td></tr><tr><td>293</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 21, 2010, 05:51:34 AM</td></tr><tr><td colspan=3>I was researching config file formats, here's a comparison.**YAML is massive.  I'm not sure there's a lightweight easy to build library we can integrate into our project.  Seems overkill.**JSON is tempting and I'm inclined to like it, but two main sticking points:*1) No comments!  How can you have a config file where you can't comment out a line to disable it?*2) Not very user friendly to have to "quote" all the strings, including the keys, and also have to remember the comma at the end of lines.*{*    "key" : "value",*}**I suppose we could easily preprocess JSON reading the config file one line at a time, truncate the lines at any # character (and/or "//"?), concatenate them into a string and pass it to JSON, so you could go:*# comment*"key" : "value",   # still have to remember the comma *"key2" : "value",   // comment like this or both**Boost has boost::program_options.**We could read lines ourselves and feed them into a map<string, string> mapConfig.**while (!eof)*  read line*  if '#' found, truncate line*  split line at first ':' -> key, value*  mapConfig.insert(key, value)**If we use the syntax:*# comment*key : value**...and don't allow whitespace indenting before the keys, I guess we would be a subset of YAML and could switch to YAML someday if we need more complexity. **If we go with self parsed, that doesn't mean we can't use JSON on particular parameter values as needed.  If an option needs a list or more structured data, it could always parse its value as json:*key : ["item1", "item2", "item3"]**Although it has to be all on one line then.**I guess I'm leaning towards self parsed mapConfig:*# comment*key : value</td></tr><tr><td>294</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 21, 2010, 12:05:20 AM</td></tr><tr><td colspan=3>Still need to know what's the most typical settings file format on Linux.  Is there a standard file extension?  I've never seen a settings file using JSON, and it doesn't look very human friendly with everything required to be in quotes.  I think what I usually see is like:*# comment*setting=value**Is there a settings file thing in Boost?**When you're using bitcoind to issue commands from the command line as a client, can we have it get the password from the settings file then too?**Gavin pointed out I forgot to increment the column of numbers in CommandLineRPC, so the current -rpcpw= implementation doesn't work right from the command line with non-string parameters.  (JSON-RPC is fine)  Still under construction.</td></tr><tr><td>295</td><td> Bitcoin / Bitcoin Discussion / Re: They want to delete the Wikipedia article</td><td>on: July 20, 2010, 06:38:28 PM</td></tr><tr><td colspan=3>Bitcoin is an implementation of Wei Dai's b-money proposal http://weidai.com/bmoney.txt on Cypherpunks http://en.wikipedia.org/wiki/Cypherpunks in 1998 and Nick Szabo's Bitgold proposal http://unenumerated.blogspot.com/2005/12/bit-gold.html**The timing is strange, just as we are getting a rapid increase in 3rd party coverage after getting slashdotted.  I hope there's not a big hurry to wrap the discussion and decide.  How long does Wikipedia typically leave a question like that open for comment?**It would help to condense the article and make it less promotional sounding as soon as possible.  Just letting people know what it is, where it fits into the electronic money space, not trying to convince them that it's good.  They probably want something that just generally identifies what it is, not tries to explain all about how it works.**If you post in http://en.wikipedia.org/wiki/Wikipedia:Articles_for_deletion/Bitcoin please don't say "yeah, but bitcoin is really important and special so the rules shouldn't apply" or argue that the rule is dumb or unfair.  That only makes it worse.  Try to address how the rule is satisfied.**Search "bitcoin" on google and see if you can find more big references in addition to the infoworld and slashdot ones.  There may be very recent stuff being written by reporters who heard about it from the slashdot article.**I hope it doesn't get deleted.  If it does, it'll be hard to overcome the presumption.  Institutional momentum is to stick with the last decision.  (edit: or at least I assume so, that's how the world usually works, but maybe Wiki is different)</td></tr><tr><td>296</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 19, 2010, 04:20:50 PM</td></tr><tr><td colspan=3>So you drop a settings file in the ~/.bitcoin directory, that sounds better.  In the "no password is set" warning, it could tell you where the file is and what to do.**What is the most popular and common settings file format?**HTTP basic authentication should be considered.  In actual practice though, it's more work for web developers to figure out how to specify the password through some extra parameter in the HTTP or JSON-RPC wrapper than to just stick an extra parameter at the beginning of the parameter list.  What do you think?  Does HTTP basic authentication get us any additional benefits?  Moving it off the parameter list but then you still have to specific it in a more esoteric place I'm not sure is a net win.

Quote from: gavinandresen on July 19, 2010, 12:02:39 PM

I was confused for a bit because the password is given LAST on the command line, but FIRST in the JSON-RPC params list.  I agree that reading the command-line password from a file would be more convenient and more secure.

You're also confusing me, what do you mean?  Did I do something unintended?</td></tr><tr><td>297</td><td> Bitcoin / Bitcoin Discussion / Warning: don't use -server or bitcoind where you web browse (v0.3.2 and lower)</td><td>on: July 19, 2010, 04:01:38 PM</td></tr><tr><td colspan=3>Don't use the -server or -daemon switch or run bitcoind on a machine where you use a web browser.  It opens port 8332 on 127.0.0.1, the local loopback address, and you wouldn't think that web browsers could cross-site access it, but it is possible.**We're working on a release soon that puts a password on the JSON-RPC interface, but until then, avoid using the -server switch, and don't web browse on the same machine where bitcoind is running.**Update:*The JSON-RPC HTTP authentication feature in 0.3.3 solves this problem.</td></tr><tr><td>298</td><td> Bitcoin / Development & Technical Discussion / Re: JSON-RPC password</td><td>on: July 19, 2010, 04:43:13 AM</td></tr><tr><td colspan=3>Right, that is quite a bit better.  **Can you give me any examples of other stuff that does it that way?  (and what the command line looks like)**The main change you're talking about here is instead of -rpcpw= when you start bitcoind, you'd use a switch that specifies a text file to go and read it from, right?  (any ideas what I should name the switch?)</td></tr><tr><td>299</td><td> Bitcoin / Bitcoin Discussion / Re: Did block generation crawl to a halt?</td><td>on: July 18, 2010, 11:35:27 PM</td></tr><tr><td colspan=3>Nice graph!  A moving average to smooth it out would be nice.**http://nullvoid.org/bitcoin/statistix.php says 212 blocks in the last 24 hours, or 8.8 per hour.</td></tr><tr><td>300</td><td> Bitcoin / Bitcoin Discussion / Re: Nenolod, the guy that wants to prove Bitcoin doesn't work.</td><td>on: July 18, 2010, 09:56:18 PM</td></tr><tr><td colspan=3>Typically, over 25,000 BTC.</td></tr><tr><td>301</td><td> Bitcoin / Development & Technical Discussion / Re: MSVC build & SHA-256</td><td>on: July 18, 2010, 09:24:09 PM</td></tr><tr><td colspan=3>OpenSSL doesn't have any interface for doing just the low level raw block hash part of SHA256.  SHA256 begins by wrapping your data in a specially formatted buffer.  Setting up the buffer takes an order of magnitude longer than the actual hashing if you're only hashing one or two blocks like we do.  It's intended that the time is amortised if you were hashing many KB or MB of data.  In BitcoinMiner, we format the buffer once and keep reusing it.**If you can find SHA256 code that's faster (with MinGW/GCC) than what we've got, that would be really great!  (although, keep licensing in mind)  The one we have is the only one I tried, so there's significant chance for improvement. **When I wrote it more than 2 years ago, there were screaming hot SHA1 implementations but minimal attention to SHA256.  That's a lot of time for them to come up with better stuff.  SHA256 was a lot slower than the fastest SHA1 at the time than I thought it should be.  Obviously SHA256 should be slower than SHA1 by a certain amount, but not by as much as I saw.**(hope you don't mind I renamed your thread, SHA-256 optimisation is something important that I keep forgetting about)</td></tr><tr><td>302</td><td> Bitcoin / Development & Technical Discussion / JSON-RPC password</td><td>on: July 18, 2010, 08:49:22 PM</td></tr><tr><td colspan=3>I uploaded to SVN my changes to add a password to JSON-RPC.  If you're set up to build, please test it.**The -server switch is replaced with -rpcpw=<password>, which is also used with bitcoind.*bitcoin -rpcpw=<password>    -- runs with JSON-RPC port open*bitcoind -rpcpw=<password>   -- daemon with password**If you have a better idea for the switch name, let me know, but keep in mind there will eventually be a password for encrypting the database too.  I'm not sure but I think they may want to use different passwords for the two.**It gives a warning if you don't set a password.**All commands now require the password as the first parameter.  It'll tell you that if you run "bitcoind help".**The central code:**  // Check password*  if (params.size() < 1 || params[0].type() != str_type)*      throw runtime_error("First parameter must be the password.");*  if (params[0].get_str() != strRPCPassword)*  {*      if (strRPCPassword.size() < 15)*          Sleep(50);*      begin = strRequest.end();*      printf("ThreadRPCServer incorrect password attempt\n");*      throw runtime_error("Incorrect password.");*  }**Any comments on these decisions?**1) if (strRPCPassword.size() < 15) Sleep(50);  -- this means if it's a short password, it'll wait 50ms after each attempt.  This might be used as a DoS attack, but I figured if it's a short password, it's more important to protect against brute force password scan.  This may tell outsiders whether the password is less than 15 characters, but less than 15 isn't all that noteworthy, most passwords are less than 15.  If you want to close the DoS possibility, just use a password 15 characters or longer.**2) begin = strRequest.end();  -- if it's a single request with multiple invocations, I throw away the rest if one has a bad password.  This is so you can't stuff it with millions of password attempts in one packet.  What do you think, is this the right thing to do?  (multiple invocation is probably almost never used anyway)**I also fixed the two duplicated commands listed in the help:**getaddressesbylabel <pw> <label>*getbalance <pw>*getblockcount <pw>*getblocknumber <pw>*getconnectioncount <pw>*getdifficulty <pw>*getgenerate <pw>*getinfo <pw>*getlabel <pw> <bitcoinaddress>*getnewaddress <pw> [label]*getreceivedbyaddress <pw> <bitcoinaddress> [minconf=1]*getreceivedbylabel <pw> <label> [minconf=1]*help <pw>*listreceivedbyaddress <pw> [minconf=1] [includeempty=false]*listreceivedbylabel <pw> [minconf=1] [includeempty=false]*sendtoaddress <pw> <bitcoinaddress> <amount> [comment] [comment-to]*setgenerate <pw> <generate> [genproclimit]*setlabel <pw> <bitcoinaddress> <label>*stop <pw></td></tr><tr><td>303</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin 0.3.2 released</td><td>on: July 18, 2010, 06:58:21 PM</td></tr><tr><td colspan=3>The change list is basically encompassed by what's listed in the first message.  Everyone should upgrade to get the important security improvements.**Minimizing to tray had at least 3 different glitches and bugs on Linux, including a crash one, so I disabled it again.  You can still re-enable the option with "-minimizetotray" if you want to use it anyway.  The bugs/glitches are somewhere in wxWidgets or GTK or Gnome and I don't know how to fix them.  Sorry, I just don't know what else to do, it's just too glitchy and buggy to have as a mainline feature.</td></tr><tr><td>304</td><td> Bitcoin / Development & Technical Discussion / Re: URI-scheme for bitcoin</td><td>on: July 18, 2010, 04:06:16 PM</td></tr><tr><td colspan=3>Quote from: lachesis on June 16, 2010, 06:14:05 AM

I think you're misunderstanding the issue. My browser will always be able to go to 127.0.0.1 (barring some strange IE settings or a virus). If I type the address into the URL bar or click a link, it will work fine. However, it isn't possible to use Javascript to complete POST requests between domains (or ports on the same domain).

That's what I thought too.

Quote from: sirius-m on June 16, 2010, 08:26:14 AM

Yeah, I meant to say that cross-domain javascript calls are forbidden, so you can't call 127.0.0.1 from a javascript that doesn't reside in 127.0.0.1. Come to think of it, it would be quite funny if browsers allowed malicious cross-domain javascript to change people's Facebook pages etc.

Now I'm hearing a report that it IS possible for javascript to do a cross-domain POST request to 127.0.0.1.  Not other domains, but just specifically to that one.  Great...**If this is the case, then do not use the -server switch or bitcoind on a system where you do web browsing.**I'll get started on adding the password field.</td></tr><tr><td>305</td><td> Bitcoin / Development & Technical Discussion / Re: Source code documentation</td><td>on: July 18, 2010, 03:12:54 PM</td></tr><tr><td colspan=3>They're only intended for intrepid programmers who read the sourcecode.</td></tr><tr><td>306</td><td> Bitcoin / Bitcoin Discussion / Re: Bitcoin snack machine (fast transaction problem)</td><td>on: July 18, 2010, 01:59:15 AM</td></tr><tr><td colspan=3>Quote from: llama on July 18, 2010, 12:03:29 AM

This is a good start, but still not impermeable.

I didn't say impermeable, I said good-enough.  The loss in practice would be far lower than with credit cards.

Quote

(for example, by refusing to propogate word of the transaction at the vending machine)

No, the vending machine talks to a big service provider (aka payment processor) that provides this service to many merchants.  Think something like a credit card processor with a new job.  They would have many well connected network nodes.</td></tr><tr><td>307</td><td> Bitcoin / Development & Technical Discussion / Re: Network Size</td><td>on: July 17, 2010, 11:25:16 PM</td></tr><tr><td colspan=3>Quote from: NewLibertyStandard on July 17, 2010, 10:22:09 PM

Version 0.3 was supposed to reduce the number of outgoing connections on non-port forwarded clients from 15 to 8, but I don't think it really happened. I'm not positive if this is the case. Correct me if I'm wrong.

In 0.3.0, the change to 8 only ended up in the Windows version, the other versions still had 15.**Please upgrade to 0.3.2, it's available now.</td></tr><tr><td>308</td><td> Bitcoin / Development & Technical Discussion / Re: Source code documentation</td><td>on: July 17, 2010, 11:18:30 PM</td></tr><tr><td colspan=3>I didn't realize you were going to document all the intentionally undocumented commands.  They're unsupported and not intended to be used by users.**All the user-facing commands are listed in the -? help.</td></tr><tr><td>309</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin 0.3.2 released</td><td>on: July 17, 2010, 10:54:24 PM</td></tr><tr><td colspan=3>Quote from: llama on July 17, 2010, 09:56:25 PM

However, it's important that you don't lock all the way up the very latest block.  Otherwise, the attacker could generate a fake block (or a few) right before you happen to lock it, and then his attack would be far easier than it would have been without the block lock.

I went about 200 blocks back.  The block chain was a clean straight line without branches, and there was only one known version of the locked block.

Quote from: llama on July 17, 2010, 09:56:25 PM

Also, I'm assuming that the block lock means that the blocks will also come prepackaged with the client.  Is this so?

Sorry, not yet, but I do want to make the initial block download faster.</td></tr><tr><td>310</td><td> Bitcoin / Technical Support / Re: Assertion Failure - Ubuntu Lucid</td><td>on: July 17, 2010, 10:37:06 PM</td></tr><tr><td colspan=3>Quote from: singpolyma on July 17, 2010, 10:19:48 PM

My coins disappeared, but I assume they'll come back when it's up to current?

Right, they'll re-appear when it's finished downloading all the blocks.</td></tr><tr><td>311</td><td> Bitcoin / Bitcoin Discussion / Re: Bitcoin snack machine (fast transaction problem)</td><td>on: July 17, 2010, 10:29:13 PM</td></tr><tr><td colspan=3>I believe it'll be possible for a payment processing company to provide as a service the rapid distribution of transactions with good-enough checking in something like 10 seconds or less.**The network nodes only accept the first version of a transaction they receive to incorporate into the block they're trying to generate.  When you broadcast a transaction, if someone else broadcasts a double-spend at the same time, it's a race to propagate to the most nodes first.  If one has a slight head start, it'll geometrically spread through the network faster and get most of the nodes.**A rough back-of-the-envelope example:*1         0*4         1*16        4*64        16*80%      20%**So if a double-spend has to wait even a second, it has a huge disadvantage.**The payment processor has connections with many nodes.  When it gets a transaction, it blasts it out, and at the same time monitors the network for double-spends.  If it receives a double-spend on any of its many listening nodes, then it alerts that the transaction is bad.  A double-spent transaction wouldn't get very far without one of the listeners hearing it.  The double-spender would have to wait until the listening phase is over, but by then, the payment processor's broadcast has reached most nodes, or is so far ahead in propagating that the double-spender has no hope of grabbing a significant percentage of the remaining nodes.</td></tr><tr><td>312</td><td> Bitcoin / Development & Technical Discussion / Bitcoin 0.3.2 released</td><td>on: July 17, 2010, 09:35:51 PM</td></tr><tr><td colspan=3>Download links available now on bitcoin.org.  Everyone should upgrade to this version.**- Added a simple security safeguard that locks-in the block chain up to this point.*- Reduced addr messages to save bandwidth now that there are plenty of nodes to connect to.*- Spanish translation by milkiway.*- French translation by aidos.**The security safeguard makes it so even if someone does have more than 50% of the network's CPU power, they can't try to go back and redo the block chain before yesterday.  (if you have this update)**I'll probably put a checkpoint in each version from now on.  Once the software has settled what the widely accepted block chain is, there's no point in leaving open the unwanted non-zero possibility of revision months later.</td></tr><tr><td>313</td><td> Bitcoin / Bitcoin Discussion / Re: Nenolod, the guy that wants to prove Bitcoin doesn't work.</td><td>on: July 17, 2010, 04:56:06 PM</td></tr><tr><td colspan=3>0.3.2 has some security safeguards to lock in the block chain up to this point and limit the damage a little if someone gets 50%.**But if someone has 50%+ of the CPU power and malicious intent, they can prove what it already says in the design document.</td></tr><tr><td>314</td><td> Bitcoin / Development & Technical Discussion / Re: Privacy versus Safety: handling change</td><td>on: July 17, 2010, 04:27:39 PM</td></tr><tr><td colspan=3>We should queue up a supply of pre-made addresses in the wallet to use when a new address is needed.  They aren't very big, so it wouldn't hurt to have a lot of them.  This would more generally cover the case also where someone backs up, then requests a new address and receives a big payment with it.  Maybe there should be separate queues so one type of demand on addresses doesn't deplete it for the others.**The addresses would be created and stored in the normal place, but also listed on a separate list of created-but-never-used addresses.  When an address is requested, the address at the front of the never-used queue is handed out, and a new address is created and added to the back.**There's some kind of rescan in the block loading code that was made to repair the case where someone copied their wallet.dat.  I would need to check that the rescan handles the case of rediscovering received payments in blocks that were already received, but are forgotten because the wallet was restored.</td></tr><tr><td>315</td><td> Bitcoin / Development & Technical Discussion / Re: BUG Report: Rounding glitch</td><td>on: July 17, 2010, 04:06:12 PM</td></tr><tr><td colspan=3>It must be a rounding error when getinfo converts to floating point to return the JSON-RPC result.  The only place where it uses floating point to represent money is returning a value in JSON-RPC.**1.139999999999 is longer than bitcoin can internally represent.**internally, it could only be:*1.13999999 or*1.14000000**1.139999999999 is much much closer to 1.14000000 than 1.13999999, so it must be 1.14000000.**The code is this:*(double)GetBalance() / (double)COIN.**(I can't think of an easy way to fix it at the moment)</td></tr><tr><td>316</td><td> Bitcoin / Bitcoin Discussion / Re: A New Currency System for the World</td><td>on: July 16, 2010, 10:20:09 PM</td></tr><tr><td colspan=3>Quote from: hugolp on May 08, 2010, 10:38:51 AM

When I run bitcoin it becomes very sluggish, almost unusable. When I stop bitcoin everything goes ok again. Its running Ubuntu desktop 10.04 amd64 using ia32libs and the binary in bitcoin 0.20 tarball.

0.3.1 fixes that, sets the generate threads to the lowest priority.  Download links are on the homepage now.</td></tr><tr><td>317</td><td> Bitcoin / Development & Technical Discussion / Re: Bitcoin 0.3.1 released</td><td>on: July 16, 2010, 09:06:57 PM</td></tr><tr><td colspan=3>I uploaded windows 0.3.1 rc1 and linux 0.3.1 rc2 to SourceForge and updated the links on the homepage.**You don't need to update to 0.3.1 unless you had one of the problems listed in the first post.  If you've got it working already, stay with 0.3.0.</td></tr><tr><td>318</td><td> Bitcoin / Development & Technical Discussion / Sample account system using JSON-RPC needed</td><td>on: July 16, 2010, 07:45:10 PM</td></tr><tr><td colspan=3>We need someone to write sample code, preferably Python or Java, showing the recommended way to use the JSON-RPC interface to create an account system.  Most sites that sell things will need something like this.  Someone who's kept up on the JSON-RPC threads here should have some idea how it should work.**When a user is logged in to their account, you show the bitcoin address they can send to to add funds.  Before showing it, you check if it's been used, if it has then you replace it with a new one (getnewaddress <username>).  You only need to keep the latest bitcoin address for the account in your database.  (I posted a sample code fragment for this in an earlier thread somewhere, search on getnewaddress)**You use getreceivedbylabel <username> with the username as the label to get the "credit" amount of the account.  You need to keep a "debit" amount in your database.  The current balance of the account is (credit - debit).  When the user spends money, you increase debit.**If you're requiring more than 0 confirmations, it's nice if you show the current balance (0 confirmations) and the available balance (1 or more confirmations), so they can immediately see that their payment is acknowledged.  Not all sites need to wait for confirmations, so the dual current & available should be optional.  Most sites selling digital goods are fine to accept 0 confirmations. **A nice sample app for this would be a simple bank site, which would have the above, plus the option to send a payment to a bitcoin address.  The sample code should be the simplest possible with the minimum extra stuff to make it a working site.**vekja.net is an example of a site like this.</td></tr><tr><td>319</td><td> Bitcoin / Bitcoin Discussion / Re: Proof-of-work difficulty increasing</td><td>on: July 16, 2010, 06:43:51 PM</td></tr><tr><td colspan=3>Right, the difficulty adjustment is trying to keep it so the network as a whole generates an average of 6 blocks per hour.  The time for your block to mature will always be around 20 hours.**The recent adjustment put us back to close to 6 blocks per hour again.**There's a site where you can see the time between blocks, and since block 68545, it's been more like 10 minutes per block:*http://nullvoid.org/bitcoin/statistix.php</td></tr><tr><td>320</td><td> Bitcoin / Development & Technical Discussion / Re: Website integration for bitcoin</td><td>on: July 16, 2010, 06:23:04 PM</td></tr><tr><td colspan=3>I've been trying to encourage someone to write and release some sample Python code showing the recommended way to do the typical accounting stuff, but to no avail.  It would be nice if you didn't have to re-invent the wheel like you're doing here.  Search on getnewaddress and you should find a thread where I gave a small fragment of sample pseudocode.</td></tr></table>
